(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{E5tf:function(t,e,i){"use strict";i.r(e),i.d(e,"ChildRoutesModule",function(){return Yb});var a=i("tyNb"),b=i("fXoL"),o=i("uBF3"),r=i("PSD3"),n=i.n(r),c=i("lJxs"),s=i("AytR"),d=i("tk/3");const l=s.a.base_url;let u=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}createCaja(t){return this.http.post(l+"/caja",t,this.headers)}loadCajas(){return this.http.get(l+"/caja",this.headers).pipe(Object(c.a)(t=>t))}loadOneCaja(t){return this.http.get(`${l}/caja/turno/${t}`,this.headers).pipe(Object(c.a)(t=>t.caja))}updateCaja(t,e){return this.http.put(`${l}/caja/${e}`,t,this.headers)}statusUpdateCaja(t){return this.http.delete(`${l}/caja/${t}`,this.headers).pipe(Object(c.a)(t=>t.caja))}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(d.a))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var p=i("G9xo"),m=i("ofXK");const h=function(){return["configuracion/caja"]};function f(t,e){1&t&&(b.Mb(0,"div",3),b.Mb(1,"div",4),b.Mb(2,"div",5),b.Mb(3,"div",6),b.Mb(4,"div",7),b.Mb(5,"div",8),b.Mb(6,"span",9),b.pc(7,"No existen cajas disponibles"),b.Lb(),b.Lb(),b.Mb(8,"div",10),b.pc(9,"Debes ir a la seccion de configuraci\xf3n en el modulo de caja para crear una caja"),b.Lb(),b.Lb(),b.Ib(10,"i",11),b.Lb(),b.Lb(),b.Mb(11,"div",12),b.Mb(12,"a",13),b.pc(13,"Crear Caja"),b.Lb(),b.Mb(14,"div",14),b.Ib(15,"i",15),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(12),b.dc("routerLink",b.gc(1,h)))}function M(t,e){if(1&t&&(b.Mb(0,"span",9),b.pc(1),b.Lb()),2&t){const t=b.Xb().$implicit;b.wb(1),b.rc("",t.cajero.name," ")}}function v(t,e){1&t&&(b.Mb(0,"span",9),b.pc(1,"Disponible "),b.Lb())}function L(t,e){if(1&t){const t=b.Nb();b.Mb(0,"a",20),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb().abrirCaja(e.caid)}),b.pc(1,"Abrir caja"),b.Lb()}}function g(t,e){1&t&&(b.Mb(0,"a",21),b.pc(1,"Caja abierta"),b.Lb())}const w=function(t,e){return{"bg-dark":t,"bg-success cursor":e}};function I(t,e){if(1&t&&(b.Mb(0,"div",3),b.Mb(1,"div",16),b.Mb(2,"div",5),b.Mb(3,"div",6),b.Mb(4,"div",7),b.Mb(5,"div",8),b.oc(6,M,2,1,"span",17),b.oc(7,v,2,0,"span",17),b.Lb(),b.Mb(8,"div",10),b.pc(9),b.Lb(),b.Lb(),b.Ib(10,"i",11),b.Lb(),b.Lb(),b.Mb(11,"div",12),b.oc(12,L,2,0,"a",18),b.oc(13,g,2,0,"a",19),b.Mb(14,"div",14),b.Ib(15,"i",15),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngClass",b.ic(6,w,0==t.cerrada,1==t.cerrada)),b.wb(5),b.dc("ngIf",!t.cerrada),b.wb(1),b.dc("ngIf",t.cerrada),b.wb(2),b.qc(t.description),b.wb(3),b.dc("ngIf",t.cerrada),b.wb(1),b.dc("ngIf",!t.cerrada)}}let y=(()=>{class t{constructor(t,e){this.cajaService=t,this.turnoService=e,this.listaCaja=[]}ngOnInit(){this.cargarCajas()}cargarCajas(){this.cajaService.loadCajas().subscribe(({cajas:t})=>{this.listaCaja=t},t=>{n.a.fire("Error",t.error.msg,"error")})}abrirCaja(t){""===localStorage.getItem("turno")||null===localStorage.getItem("turno")?n.a.fire({title:"Monto Inicial de caja",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirmar",showLoaderOnConfirm:!0,preConfirm:t=>t}).then(e=>{e.value>0&&this.turnoService.createCaja({caja:t,initial:e.value}).subscribe(t=>{this.cargarCajas(),localStorage.setItem("turno",t.turno.tid)})}):n.a.fire("Ya existe una caja abierta","Debes de cerrar caja para poder abrir he iniciar un turno nuevo","warning")}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(u),b.Hb(p.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-apertura"]],decls:3,vars:2,consts:[[1,"row"],["class","col-xxl-3 col-lg-4",4,"ngIf"],["class","col-xxl-3 col-lg-4",4,"ngFor","ngForOf"],[1,"col-xxl-3","col-lg-4"],[1,"card","bg-primary","text-white","mb-4"],[1,"card-body"],[1,"d-flex","justify-content-between","align-items-center"],[1,"mr-3"],[1,"text-white-75","small"],[1,"fw-bold"],[1,"text-lg","font-weight-bold"],[1,"bi-display"],[1,"card-footer","d-flex","align-items-center","justify-content-between"],[1,"small","text-white","stretched-link",3,"routerLink"],[1,"small","text-white"],[1,"fas","fa-angle-right"],[1,"card","text-white","mb-4",3,"ngClass"],["class","fw-bold",4,"ngIf"],["class","small text-white stretched-link",3,"click",4,"ngIf"],["class","small text-white stretched-link",4,"ngIf"],[1,"small","text-white","stretched-link",3,"click"],[1,"small","text-white","stretched-link"]],template:function(t,e){1&t&&(b.Mb(0,"div",0),b.oc(1,f,16,2,"div",1),b.oc(2,I,16,9,"div",2),b.Lb()),2&t&&(b.wb(1),b.dc("ngIf",0==e.listaCaja.length),b.wb(1),b.dc("ngForOf",e.listaCaja))},directives:[m.m,m.l,a.d,m.k],encapsulation:2}),t})(),x=(()=>{class t{constructor(t){this.empresaService=t}ngOnInit(){this.cargarEmpresa()}cargarEmpresa(){this.empresaService.getDatos().subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(o.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-dashboard"]],decls:14,vars:0,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","ticket1-tab",1,"nav-link","text-dark","active"],[1,"bi-grid",2,"font-size","1rem"],[1,"container-fluid","my-4"],[1,"row"],[1,"col-md-12"],[1,"col"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Dashboard"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Tablero Principal"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.Mb(11,"div",8),b.Ib(12,"app-apertura"),b.Lb(),b.Ib(13,"div",9),b.Lb(),b.Lb())},directives:[y],encapsulation:2}),t})();var k=i("3Pt+"),C=i("quSY");class T extends C.a{constructor(t,e){super()}schedule(t,e=0){return this}}class S extends T{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const i=this.id,a=this.scheduler;return null!=i&&(this.id=this.recycleAsyncId(a,i,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(a,this.id,e),this}requestAsyncId(t,e,i=0){return setInterval(t.flush.bind(t,this),i)}recycleAsyncId(t,e,i=0){if(null!==i&&this.delay===i&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const i=this._execute(t,e);if(i)return i;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let i=!1,a=void 0;try{this.work(t)}catch(b){i=!0,a=!!b&&b||new Error(b)}if(i)return this.unsubscribe(),a}_unsubscribe(){const t=this.id,e=this.scheduler,i=e.actions,a=i.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==a&&i.splice(a,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}let P=(()=>{class t{constructor(e,i=t.now){this.SchedulerAction=e,this.now=i}schedule(t,e=0,i){return new this.SchedulerAction(this,t).schedule(i,e)}}return t.now=()=>Date.now(),t})();class F extends P{constructor(t,e=P.now){super(t,()=>F.delegate&&F.delegate!==this?F.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,i){return F.delegate&&F.delegate!==this?F.delegate.schedule(t,e,i):super.schedule(t,e,i)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let i;this.active=!0;do{if(i=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,i){for(;t=e.shift();)t.unsubscribe();throw i}}}const N=new F(S);var j=i("7o/Q"),D=i("EY2u"),A=i("LRne"),E=i("HDdC");let X=(()=>{class t{constructor(t,e,i){this.kind=t,this.value=e,this.error=i,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,i){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return i&&i()}}accept(t,e,i){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,i)}toObservable(){switch(this.kind){case"N":return Object(A.a)(this.value);case"E":return t=this.error,new E.a(e=>e.error(t));case"C":return Object(D.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function q(t,e=N){var i;const a=(i=t)instanceof Date&&!isNaN(+i)?+t-e.now():Math.abs(t);return t=>t.lift(new R(a,e))}class R{constructor(t,e){this.delay=t,this.scheduler=e}call(t,e){return e.subscribe(new U(t,this.delay,this.scheduler))}}class U extends j.a{constructor(t,e,i){super(t),this.delay=e,this.scheduler=i,this.queue=[],this.active=!1,this.errored=!1}static dispatch(t){const e=t.source,i=e.queue,a=t.scheduler,b=t.destination;for(;i.length>0&&i[0].time-a.now()<=0;)i.shift().notification.observe(b);if(i.length>0){const e=Math.max(0,i[0].time-a.now());this.schedule(t,e)}else this.unsubscribe(),e.active=!1}_schedule(t){this.active=!0,this.destination.add(t.schedule(U.dispatch,this.delay,{source:this,destination:this.destination,scheduler:t}))}scheduleNotification(t){if(!0===this.errored)return;const e=this.scheduler,i=new z(e.now()+this.delay,t);this.queue.push(i),!1===this.active&&this._schedule(e)}_next(t){this.scheduleNotification(X.createNext(t))}_error(t){this.errored=!0,this.queue=[],this.destination.error(t),this.unsubscribe()}_complete(){this.scheduleNotification(X.createComplete()),this.unsubscribe()}}class z{constructor(t,e){this.time=t,this.notification=e}}const $=s.a.base_url;let O=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}cargarClientes(t=0){return this.http.get(`${$}${"/clients?desde="+t}`,this.headers).pipe(q(500),Object(c.a)(t=>t))}createClient(t){return this.http.post($+"/clients",t,this.headers)}updateClient(t,e){return this.http.put(`${$}/clients/${e}`,t,this.headers)}deleteClient(t){return this.http.delete(`${$}/clients/${t}`,this.headers)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(d.a))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const H=s.a.base_url;let G=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}search(t,e){return this.http.get(`${H}/search/${t}/${e}`,this.headers).pipe(q(500),Object(c.a)(t=>t))}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(d.a))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function B(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",49),b.Mb(2,"div",50),b.Mb(3,"span",51),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",23),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function V(t,e){1&t&&(b.Mb(0,"tr",69),b.Mb(1,"th",70),b.Mb(2,"h4",23),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}function W(t,e){if(1&t&&(b.Mb(0,"th",79),b.pc(1),b.Lb()),2&t){const t=b.Xb().index;b.wb(1),b.qc(t+1)}}function Y(t,e){if(1&t&&(b.Mb(0,"th",80),b.pc(1),b.Lb()),2&t){const t=b.Xb().index,e=b.Xb(2);b.wb(1),b.qc(t+1+e.desde)}}function Z(t,e){1&t&&(b.Mb(0,"span"),b.pc(1,"-"),b.Lb())}function K(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",71),b.oc(1,W,2,1,"th",72),b.oc(2,Y,2,1,"th",73),b.Mb(3,"td",74),b.pc(4),b.Lb(),b.Mb(5,"td"),b.pc(6),b.Lb(),b.Mb(7,"td"),b.pc(8),b.Lb(),b.Mb(9,"td"),b.pc(10),b.Lb(),b.Mb(11,"td"),b.pc(12),b.Lb(),b.Mb(13,"td"),b.pc(14),b.oc(15,Z,2,0,"span",13),b.pc(16),b.Lb(),b.Mb(17,"td"),b.pc(18),b.Lb(),b.Mb(19,"td",69),b.Mb(20,"button",75),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).actualizarCliente(i)}),b.Ib(21,"i",76),b.Lb(),b.Mb(22,"button",77),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).borrarCliente(i.cid)}),b.Ib(23,"i",78),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=b.Xb(2);b.wb(1),b.dc("ngIf",0===i.desde),b.wb(1),b.dc("ngIf",i.desde>0),b.wb(2),b.qc(t.name),b.wb(2),b.qc(t.cedula),b.wb(2),b.qc(t.email),b.wb(2),b.qc(t.phone),b.wb(2),b.qc(t.address),b.wb(2),b.rc("",t.department," "),b.wb(1),b.dc("ngIf",t.city||t.department),b.wb(1),b.rc(" ",t.city,""),b.wb(2),b.qc(t.zip)}}function _(t,e){if(1&t&&(b.Mb(0,"small",23),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function J(t,e){if(1&t&&(b.Mb(0,"small",23),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.clientes.length,")")}}function Q(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",81),b.Mb(1,"button",82),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(-10)}),b.pc(2,"Anterior"),b.Lb(),b.Mb(3,"button",82),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(10)}),b.pc(4,"Siguiente"),b.Lb(),b.Lb()}if(2&t){const t=b.Xb(2);b.wb(1),b.yb("",t.btnAtras," btn btn-sm btn-dark btnW waves-effect waves-light px-3"),b.wb(2),b.yb("",t.btnAdelante," btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2")}}function tt(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div"),b.Mb(2,"div",52),b.Mb(3,"span",53),b.Ib(4,"i",54),b.Lb(),b.Mb(5,"input",55,56),b.Tb("keyup",function(){b.lc(t);const e=b.kc(6);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(7,"label",57),b.pc(8,"Buscar Cliente"),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",58),b.Mb(10,"table",59),b.Mb(11,"thead",60),b.Mb(12,"tr"),b.Mb(13,"th",61),b.pc(14,"#"),b.Lb(),b.Mb(15,"th",62),b.pc(16,"Nombres"),b.Lb(),b.Mb(17,"th",61),b.pc(18,"Cedula"),b.Lb(),b.Mb(19,"th",61),b.pc(20,"Email"),b.Lb(),b.Mb(21,"th",61),b.pc(22,"Telefono"),b.Lb(),b.Mb(23,"th",61),b.pc(24,"Direcci\xf3n"),b.Lb(),b.Mb(25,"th",61),b.pc(26,"Departamento"),b.Lb(),b.Mb(27,"th",61),b.pc(28,"Codigo Postal"),b.Lb(),b.Mb(29,"th",63),b.pc(30,"Acciones"),b.Lb(),b.Lb(),b.Lb(),b.Mb(31,"tbody"),b.oc(32,V,4,0,"tr",64),b.oc(33,K,24,11,"tr",65),b.Lb(),b.Lb(),b.Lb(),b.Mb(34,"div",39),b.Mb(35,"div",66),b.Mb(36,"small",23),b.pc(37),b.Lb(),b.oc(38,_,2,1,"small",67),b.oc(39,J,2,2,"small",67),b.Lb(),b.oc(40,Q,5,6,"div",68),b.Lb(),b.Lb()}if(2&t){const t=b.kc(6),e=b.Xb();b.wb(32),b.dc("ngIf",!e.sinResultados),b.wb(1),b.dc("ngForOf",e.clientes),b.wb(4),b.rc("Total de clientes: (",e.totalClientes,")"),b.wb(1),b.dc("ngIf",0!==e.resultado),b.wb(1),b.dc("ngIf",0!==e.desde),b.wb(1),b.dc("ngIf",0===t.value.length)}}function et(t,e){1&t&&(b.Mb(0,"p",83),b.pc(1,"- El nombre es obligatorio"),b.Lb())}function it(t,e){1&t&&(b.Mb(0,"p",83),b.pc(1,"- La cedula de ciudadania es obligatoria"),b.Lb())}function at(t,e){1&t&&(b.Mb(0,"p",83),b.pc(1,"- El email es obligatorio y tiene que ser un email valido"),b.Lb())}function bt(t,e){1&t&&(b.Mb(0,"p",83),b.pc(1,"- El nombre es obligatorio"),b.Lb())}function ot(t,e){1&t&&(b.Mb(0,"p",83),b.pc(1,"- La cedula de ciudadania es obligatoria"),b.Lb())}function rt(t,e){1&t&&(b.Mb(0,"p",83),b.pc(1,"- El email es obligatorio y tiene que ser un email valido"),b.Lb())}let nt=(()=>{class t{constructor(t,e,i){this.clientService=t,this.searchService=e,this.fb=i,this.totalClientes=0,this.resultado=0,this.clientes=[],this.clientesTemp=[],this.desde=0,this.cargando=!0,this.sinResultados=!0,this.btnAtras="",this.btnAdelante="",this.formSubmitted=!1,this.newClientForm=this.fb.group({name:["",[k.p.required,k.p.minLength(3)]],cedula:["",[k.p.required,k.p.minLength(3)]],email:["",[k.p.required,k.p.email,k.p.minLength(7)]],phone:[""],address:[""],city:[""],department:[""],zip:[""]}),this.formSubmittedUp=!1,this.upClientForm=this.fb.group({_id:["",[k.p.required,k.p.minLength(24)]],name:["",[k.p.required,k.p.minLength(3)]],cedula:["",[k.p.required,k.p.minLength(3)]],email:["",[k.p.required,k.p.email,k.p.minLength(7)]],phone:[""],address:[""],city:[""],department:[""],zip:[""]})}ngOnInit(){this.cargarClientes()}crearCliente(){this.formSubmitted=!0,this.newClientForm.invalid||this.clientService.createClient(this.newClientForm.value).subscribe(t=>{n.a.fire("Estupendo","Se ha creado el cliente exitosamente!","success"),this.cargarClientes(),this.formSubmitted=!1,this.newClientForm.reset()},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValido(t){return!(!this.newClientForm.get(t).invalid||!this.formSubmitted)}cargarClientes(){this.cargando=!0,this.sinResultados=!0,this.clientService.cargarClientes(this.desde).subscribe(({total:t,clients:e})=>{if(0===e.length)return this.sinResultados=!1,this.clientes=[],void(this.resultado=0);this.totalClientes=t,this.clientes=e,this.clientesTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalClientes>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalClientes<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.clientes.length||this.desde+10>=this.totalClientes?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}cambiarPagina(t){this.desde+=t,this.desde<0?this.desde=0:this.desde>this.totalClientes&&(this.desde-=t),this.cargarClientes()}buscar(t){if(this.sinResultados=!0,0===t.length)return this.clientes=this.clientesTemp,void(this.resultado=0);this.sinResultados=!0,this.searchService.search("clients",t).subscribe(({total:t,resultados:e})=>{if(0===e.length)return this.sinResultados=!1,this.clientes=[],void(this.resultado=0);this.totalClientes=t,this.clientes=e,this.resultado=e.length})}borrarCliente(t){this.clientService.deleteClient(t).subscribe(t=>{n.a.fire("Estupendo","Se ha borrado el cliente exitosamente!","success"),this.cargarClientes()},t=>{n.a.fire("Error",t.error.msg,"error")})}actualizarCliente(t){this.upClientForm.setValue({_id:t.cid,name:t.name||"",cedula:t.cedula||"",email:t.email||"",phone:t.phone||"",address:t.address||"",city:t.city||"",department:t.department||"",zip:t.zip||""})}updateCLiente(){this.formSubmittedUp=!0,this.upClientForm.invalid||this.clientService.updateClient(this.upClientForm.value,this.upClientForm.value._id).subscribe(t=>{n.a.fire("Estupendo",`Se ha actualizado el cliente ${this.upClientForm.value.name} exitosamente!`,"success"),this.cargarClientes(),this.formSubmittedUp=!1,this.upClientForm.reset()},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValidoUpdate(t){return!(!this.upClientForm.get(t).invalid||!this.formSubmittedUp)}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(O),b.Hb(G),b.Hb(k.d))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-clientes"]],decls:160,vars:10,consts:[[1,"bg-header-dark","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","home-tab","data-bs-toggle","tab","href","#home","role","tab","aria-controls","home","aria-selected","true",1,"nav-link","active"],[1,"bi-people",2,"font-size","1rem"],["id","crear-tab","data-bs-toggle","modal","data-bs-target","#nuevoCliente",1,"nav-link","text-success","cursor"],[1,"bi-person-plus",2,"font-size","1rem"],["id","myTabContent",1,"tab-content","mt-4","bg-light2"],["id","home","role","tabpanel","aria-labelledby","home-tab",1,"tab-pane","fade","show","active"],[1,"px-3"],[1,"text-dark"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],["id","nuevoCliente","tabindex","-1","aria-labelledby","nuevoClienteModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","nuevoClienteModal",1,"modal-title"],[1,"bi-person-plus",2,"font-size","2rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","newClientForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"row","mb-3"],[1,"col-md-6","px-md-1"],[1,"form-floating"],["formControlName","name","type","text","placeholder","Nombres",1,"form-control","text-capitalize"],["for","floatingInput"],["formControlName","cedula","type","text","placeholder","Cedula de ciudadania",1,"form-control"],["formControlName","email","type","email","placeholder","Email",1,"form-control"],["formControlName","phone","type","text","placeholder","Telefono",1,"form-control"],[1,"col-md-12","px-md-1"],["formControlName","address","type","text","placeholder","Direcci\xf3n",1,"form-control"],[1,"col-md-5","px-md-1"],["formControlName","department","type","text","placeholder","Departamento",1,"form-control"],["formControlName","city","type","text","placeholder","Ciudad",1,"form-control"],[1,"col-md-2","px-md-1"],["formControlName","zip","type","text","placeholder","ZIP",1,"form-control"],[1,"row"],[1,"text-danger","mb-2"],["class","mb-1 animated fadeIn",4,"ngIf"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","actualizarCLiente","tabindex","-1","aria-labelledby","actualizarCLienteModal","aria-hidden","true",1,"modal","fade"],["id","actualizarCLienteModal",1,"modal-title"],[1,"bi-pencil",2,"font-size","1rem"],["action","","id","upClientForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"form-floating","mb-2"],[1,"position-absolute","top-50","start-90","translate-middle"],[1,"bi-search",2,"font-size","1rem"],["type","text","id","floatingInput","placeholder","Buscar Cliente",1,"form-control",3,"keyup"],["search",""],["for","floatingInput "],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2 ",1,"text-muted"],["scope","col ",1,"text-muted","w100"],["class","text-center ",4,"ngIf"],["class","trHover",4,"ngFor","ngForOf"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],["class","col d-flex justify-content-end",4,"ngIf"],[1,"text-center"],["colspan","10",1,"py-4"],[1,"trHover"],["scope","row ",4,"ngIf"],["scope","row",4,"ngIf"],["colspan","2"],["type","button","data-bs-toggle","modal","data-bs-target","#actualizarCLiente",1,"btn","btn-link","p-1","text-primary",3,"click"],[1,"bi-pen",2,"font-size","0.9rem"],["type","button",1,"btn","btn-link","p-1","text-danger",3,"click"],[1,"bi-trash",2,"font-size","0.9rem"],["scope","row "],["scope","row"],[1,"col","d-flex","justify-content-end"],["type","button",3,"click"],[1,"mb-1","animated","fadeIn"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"CLIENTES"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Administraci\xf3n de clientes "),b.Lb(),b.Lb(),b.Mb(9,"li",3),b.Mb(10,"a",6),b.Ib(11,"i",7),b.pc(12," Nuevo Cliente "),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(13,"div",8),b.Mb(14,"div",9),b.Mb(15,"div",10),b.Mb(16,"div"),b.Mb(17,"h5",11),b.pc(18,"ADMINISTRACI\xd3N DE CLIENTES"),b.Lb(),b.Mb(19,"p"),b.pc(20,"Administra todos los clientes de tu negocio (cr\xe9dito, facturaci\xf3n, etc) de forma centralizada."),b.Lb(),b.Lb(),b.Mb(21,"div",12),b.oc(22,B,7,0,"div",13),b.oc(23,tt,41,6,"div",13),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"div",14),b.Mb(25,"div",15),b.Mb(26,"div",16),b.Mb(27,"div",17),b.Mb(28,"h5",18),b.Ib(29,"i",19),b.pc(30," Nuevo Cliente"),b.Lb(),b.Ib(31,"button",20),b.Lb(),b.Mb(32,"div",21),b.Mb(33,"form",22),b.Tb("ngSubmit",function(){return e.crearCliente()}),b.Mb(34,"h5",23),b.pc(35,"Datos Personales"),b.Lb(),b.Mb(36,"div",24),b.Mb(37,"div",25),b.Mb(38,"div",26),b.Ib(39,"input",27),b.Mb(40,"label",28),b.pc(41,"Nombres"),b.Lb(),b.Lb(),b.Lb(),b.Mb(42,"div",25),b.Mb(43,"div",26),b.Ib(44,"input",29),b.Mb(45,"label",28),b.pc(46,"Cedula de ciudadania"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(47,"div",24),b.Mb(48,"div",25),b.Mb(49,"div",26),b.Ib(50,"input",30),b.Mb(51,"label",28),b.pc(52,"Email"),b.Lb(),b.Lb(),b.Lb(),b.Mb(53,"div",25),b.Mb(54,"div",26),b.Ib(55,"input",31),b.Mb(56,"label",28),b.pc(57,"Telefono"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(58,"h5",23),b.pc(59,"DIRECCI\xd3N"),b.Lb(),b.Mb(60,"div",24),b.Mb(61,"div",32),b.Mb(62,"div",26),b.Ib(63,"input",33),b.Mb(64,"label",28),b.pc(65,"Direcci\xf3n"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(66,"div",24),b.Mb(67,"div",34),b.Mb(68,"div",26),b.Ib(69,"input",35),b.Mb(70,"label",28),b.pc(71,"Departamento"),b.Lb(),b.Lb(),b.Lb(),b.Mb(72,"div",34),b.Mb(73,"div",26),b.Ib(74,"input",36),b.Mb(75,"label",28),b.pc(76,"Ciudad"),b.Lb(),b.Lb(),b.Lb(),b.Mb(77,"div",37),b.Mb(78,"div",26),b.Ib(79,"input",38),b.Mb(80,"label",28),b.pc(81,"ZIP"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(82,"div",39),b.Mb(83,"div",40),b.oc(84,et,2,0,"p",41),b.oc(85,it,2,0,"p",41),b.oc(86,at,2,0,"p",41),b.Lb(),b.Lb(),b.Mb(87,"button",42),b.pc(88,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(89,"div",43),b.Mb(90,"button",44),b.pc(91,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(92,"div",45),b.Mb(93,"div",15),b.Mb(94,"div",16),b.Mb(95,"div",17),b.Mb(96,"h5",46),b.Ib(97,"i",47),b.pc(98," Actualizar Cliente"),b.Lb(),b.Ib(99,"button",20),b.Lb(),b.Mb(100,"div",21),b.Mb(101,"form",48),b.Tb("ngSubmit",function(){return e.updateCLiente()}),b.Mb(102,"h5",23),b.pc(103,"Datos Personales"),b.Lb(),b.Mb(104,"div",24),b.Mb(105,"div",25),b.Mb(106,"div",26),b.Ib(107,"input",27),b.Mb(108,"label",28),b.pc(109,"Nombres"),b.Lb(),b.Lb(),b.Lb(),b.Mb(110,"div",25),b.Mb(111,"div",26),b.Ib(112,"input",29),b.Mb(113,"label",28),b.pc(114,"Cedula de ciudadania"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(115,"div",24),b.Mb(116,"div",25),b.Mb(117,"div",26),b.Ib(118,"input",30),b.Mb(119,"label",28),b.pc(120,"Email"),b.Lb(),b.Lb(),b.Lb(),b.Mb(121,"div",25),b.Mb(122,"div",26),b.Ib(123,"input",31),b.Mb(124,"label",28),b.pc(125,"Telefono"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(126,"h5",23),b.pc(127,"DIRECCI\xd3N"),b.Lb(),b.Mb(128,"div",24),b.Mb(129,"div",32),b.Mb(130,"div",26),b.Ib(131,"input",33),b.Mb(132,"label",28),b.pc(133,"Direcci\xf3n"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(134,"div",24),b.Mb(135,"div",34),b.Mb(136,"div",26),b.Ib(137,"input",35),b.Mb(138,"label",28),b.pc(139,"Departamento"),b.Lb(),b.Lb(),b.Lb(),b.Mb(140,"div",34),b.Mb(141,"div",26),b.Ib(142,"input",36),b.Mb(143,"label",28),b.pc(144,"Ciudad"),b.Lb(),b.Lb(),b.Lb(),b.Mb(145,"div",37),b.Mb(146,"div",26),b.Ib(147,"input",38),b.Mb(148,"label",28),b.pc(149,"ZIP"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(150,"div",39),b.Mb(151,"div",40),b.oc(152,bt,2,0,"p",41),b.oc(153,ot,2,0,"p",41),b.oc(154,rt,2,0,"p",41),b.Lb(),b.Lb(),b.Mb(155,"button",42),b.pc(156,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(157,"div",43),b.Mb(158,"button",44),b.pc(159,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(22),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando),b.wb(10),b.dc("formGroup",e.newClientForm),b.wb(51),b.dc("ngIf",e.campoValido("name")),b.wb(1),b.dc("ngIf",e.campoValido("cedula")),b.wb(1),b.dc("ngIf",e.campoValido("email")),b.wb(15),b.dc("formGroup",e.upClientForm),b.wb(51),b.dc("ngIf",e.campoValidoUpdate("name")),b.wb(1),b.dc("ngIf",e.campoValidoUpdate("cedula")),b.wb(1),b.dc("ngIf",e.campoValidoUpdate("email")))},directives:[m.m,k.r,k.i,k.f,k.b,k.h,k.e,m.l],encapsulation:2}),t})();const ct=s.a.base_url;let st=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}createMesa(t){return this.http.post(ct+"/mesas",t,this.headers)}loadMesas(t=0){return this.http.get(`${ct}${"/mesas?desde="+t}`,this.headers).pipe(q(500),Object(c.a)(t=>t))}loadMesaId(t){return this.http.get(`${ct}/mesas/${t}`,this.headers).pipe(Object(c.a)(t=>t.mesa))}updateMesa(t,e){return this.http.put(`${ct}/mesas/${e}`,t,this.headers)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(d.a))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function dt(t,e){1&t&&(b.Mb(0,"small",15),b.pc(1," Ocupada "),b.Lb())}function lt(t,e){1&t&&(b.Mb(0,"small",16),b.pc(1," Disponible "),b.Lb())}const ut=function(t){return["/dashboard/ventas/mesa",t]},pt=function(t,e){return{"text-danger":t,"text-success":e}};function mt(t,e){if(1&t&&(b.Mb(0,"div",7),b.Mb(1,"button",8),b.oc(2,dt,2,0,"small",9),b.oc(3,lt,2,0,"small",10),b.Ib(4,"i",11),b.Mb(5,"h5",12),b.pc(6),b.Lb(),b.Ib(7,"img",13),b.Mb(8,"h6",14),b.pc(9),b.Lb(),b.Lb(),b.Lb()),2&t){const t=e.$implicit;b.wb(1),b.dc("routerLink",b.hc(7,ut,t.mid)),b.wb(1),b.dc("ngIf",!t.disponible),b.wb(1),b.dc("ngIf",t.disponible),b.wb(1),b.dc("ngClass",b.ic(9,pt,0==t.disponible,1==t.disponible)),b.wb(2),b.qc(t.name),b.wb(1),b.fc("src","../../../assets/img/icons/",t.img||"ticket.svg","",b.mc),b.wb(2),b.rc(" ",t.mesero.name," ")}}let ht=(()=>{class t{constructor(t,e){this.router=t,this.mesasService=e,this.listaMesas=[],this.listaMesasTemp=[],this.totalMesas=0,this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.btnAtras="",this.btnAdelante=""}ngOnInit(){if(""===localStorage.getItem("turno")&&null===localStorage.getItem("turno"))return n.a.fire("No autorizado","Debes de abrir caja para iniciar","info"),void this.router.navigateByUrl("/");this.cargarMesas()}cargarMesas(){this.cargando=!0,this.sinResultados=!0,this.mesasService.loadMesas(this.desde).subscribe(({total:t,mesas:e})=>{if(0===e.length)return this.sinResultados=!1,this.cargando=!1,this.listaMesas=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalMesas=t,this.listaMesas=e,this.listaMesasTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalMesas>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalMesas<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.listaMesas.length||this.desde+10>=this.totalMesas?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(a.b),b.Hb(st))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-ventas"]],decls:10,vars:1,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],[1,"container-fluid"],[1,"p-2","border-bottom","border-top","my-2"],[1,"mb-2","text-muted"],[1,"d-flex","flex-wrap"],["class","p-2",4,"ngFor","ngForOf"],[1,"p-2"],["type","button",1,"bg-white","p-3","btn","btnW","waves-effect","waves-ligth","position-relative",3,"routerLink"],["class","text-danger",4,"ngIf"],["class","text-success",4,"ngIf"],[1,"bi-dot","position-absolute","top-0","start-100","translate-middle","pe-4","pt-2",2,"font-size","2.5rem",3,"ngClass"],[1,"mb-0","text-wrap"],["alt","",2,"max-height","100px",3,"src"],[1,"mb-0","text-wrap","fw-normal"],[1,"text-danger"],[1,"text-success"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Ventas"),b.Lb(),b.Lb(),b.Lb(),b.Mb(4,"div",2),b.Mb(5,"div",3),b.Mb(6,"h4",4),b.pc(7,"Mesas"),b.Lb(),b.Mb(8,"div",5),b.oc(9,mt,10,12,"div",6),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(9),b.dc("ngForOf",e.listaMesas))},directives:[m.l,a.c,m.m,m.k],encapsulation:2}),t})();const ft=s.a.base_url;let Mt=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}createProduct(t){return this.http.post(ft+"/products",t,this.headers)}cargarProductos(t=0){return this.http.get(`${ft}${"/products?desde="+t}`,this.headers).pipe(q(500),Object(c.a)(t=>t))}cargarProductoId(t){return this.http.get(`${ft}${"/products/"+t}`,this.headers).pipe(q(500),Object(c.a)(t=>t.product))}cargarProductoCodigo(t){return this.http.get(`${ft}${"/products/code/"+t}`,this.headers).pipe(Object(c.a)(t=>t.product))}cargarProductoDepartamento(t){return this.http.get(`${ft}${"/products/department/"+t}`,this.headers).pipe(q(500),Object(c.a)(t=>t))}actualizarProducto(t,e){return this.http.put(`${ft}/products/${e}`,t,this.headers)}deleteProduct(t){return this.http.delete(`${ft}/products/${t}`,this.headers)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(d.a))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const vt=s.a.base_url;let Lt=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}loadDepartment(){return this.http.get(vt+"/departments",this.headers).pipe(Object(c.a)(t=>t))}createDepartment(t){return this.http.post(vt+"/departments",t,this.headers)}updateDepartment(t,e){return this.http.put(`${vt}/departments/${e}`,t,this.headers)}statusUpdateDepartment(t){return this.http.delete(`${vt}/departments/${t}`,this.headers).pipe(Object(c.a)(t=>t.department))}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(d.a))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const gt=["search"],wt=["qty"];function It(t,e){1&t&&(b.Mb(0,"div",61),b.Mb(1,"h6",6),b.pc(2,"Sin resultados"),b.Lb(),b.Lb())}function yt(t,e){1&t&&(b.Mb(0,"div",64),b.Mb(1,"div",65),b.Mb(2,"span",66),b.pc(3,"Loading..."),b.Lb(),b.Lb(),b.Mb(4,"div"),b.Mb(5,"small",6),b.pc(6,"Cargando..."),b.Lb(),b.Lb(),b.Lb())}function xt(t,e){if(1&t){const t=b.Nb();b.Mb(0,"li",68),b.Mb(1,"div",70),b.Mb(2,"div",71),b.Mb(3,"span"),b.pc(4),b.Lb(),b.Lb(),b.Mb(5,"div",72),b.Mb(6,"button",73),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(4).seleccionarProducto(i)}),b.Ib(7,"i",74),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit;b.wb(4),b.rc(" ",t.name," ")}}function kt(t,e){if(1&t&&(b.Mb(0,"ul",67),b.Mb(1,"li",68),b.Mb(2,"h6"),b.pc(3),b.Lb(),b.Lb(),b.oc(4,xt,8,1,"li",69),b.Lb()),2&t){const t=b.Xb(3);b.wb(3),b.rc("Resultados: (",t.searchProduct.length,")"),b.wb(1),b.dc("ngForOf",t.searchProduct)}}function Ct(t,e){if(1&t&&(b.Mb(0,"div",61),b.oc(1,yt,7,0,"div",62),b.oc(2,kt,5,2,"ul",63),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.dc("ngIf",t.cargando),b.wb(1),b.dc("ngIf",!t.cargando)}}function Tt(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",75),b.Mb(1,"th",76),b.Mb(2,"small"),b.pc(3),b.Lb(),b.Lb(),b.Mb(4,"td"),b.Mb(5,"small"),b.pc(6),b.Lb(),b.Lb(),b.Mb(7,"td"),b.Mb(8,"small"),b.pc(9),b.Lb(),b.Lb(),b.Mb(10,"td"),b.Mb(11,"button",77),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).eliminarProductoKit(i)}),b.Ib(12,"small",78),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=e.index;b.wb(3),b.qc(i+1),b.wb(3),b.qc(t.product.name),b.wb(3),b.qc(t.qty)}}function St(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",7),b.Mb(1,"h6",6),b.pc(2,"Agregar Productos"),b.Lb(),b.Ib(3,"hr"),b.Mb(4,"div",44),b.Mb(5,"div",9),b.Mb(6,"input",45,46),b.Tb("keyup",function(){b.lc(t);const e=b.kc(7);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(8,"label",11),b.pc(9,"Buscar Producto"),b.Lb(),b.Lb(),b.oc(10,It,3,0,"div",47),b.oc(11,Ct,3,2,"div",47),b.Lb(),b.Mb(12,"div",7),b.Mb(13,"div",48),b.Ib(14,"input",49),b.Lb(),b.Mb(15,"div",48),b.Ib(16,"input",50,51),b.Lb(),b.Mb(18,"div",52),b.Mb(19,"button",53),b.Tb("click",function(){b.lc(t);const e=b.kc(17);return b.Xb().agregarProductoKit(e.value)}),b.Ib(20,"i",54),b.Lb(),b.Lb(),b.Lb(),b.Mb(21,"div",13),b.Mb(22,"div",55),b.Mb(23,"table",56),b.Mb(24,"thead",57),b.Mb(25,"tr",6),b.Mb(26,"th",58),b.pc(27,"#"),b.Lb(),b.Mb(28,"th",59),b.pc(29,"Nombre"),b.Lb(),b.Mb(30,"th",59),b.pc(31,"Cantidad"),b.Lb(),b.Ib(32,"th",59),b.Lb(),b.Lb(),b.Mb(33,"tbody"),b.oc(34,Tt,13,3,"tr",60),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb();b.wb(10),b.dc("ngIf",t.sinResultados),b.wb(1),b.dc("ngIf",t.searchProduct.length>0),b.wb(3),b.dc("value",t.inProducto),b.wb(5),b.yb("",t.btnAddKit," btn btnW waves-effect waves-ligth px-3 btn-success"),b.wb(15),b.dc("ngForOf",t.kits)}}function Pt(t,e){if(1&t&&(b.Mb(0,"option",80),b.pc(1),b.Lb()),2&t){const t=b.Xb().$implicit;b.ec("value",t.did),b.wb(1),b.qc(t.name)}}function Ft(t,e){if(1&t&&(b.Kb(0),b.oc(1,Pt,2,2,"option",79),b.Jb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngIf",t.status)}}function Nt(t,e){1&t&&(b.Mb(0,"p",81),b.pc(1,"- El codigo de barra es obligatorio"),b.Lb())}function jt(t,e){1&t&&(b.Mb(0,"p",81),b.pc(1,"- El nombre del producto es obligatorio"),b.Lb())}function Dt(t,e){1&t&&(b.Mb(0,"p",81),b.pc(1,"- El tipo del producto es obligatorio"),b.Lb())}function At(t,e){1&t&&(b.Mb(0,"p",81),b.pc(1,"- El precio es obligatorio"),b.Lb())}function Et(t,e){1&t&&(b.Mb(0,"p",81),b.pc(1,"- El costo es obligatorio"),b.Lb())}let Xt=(()=>{class t{constructor(t,e,i,a){this.fb=t,this.searchService=e,this.productService=i,this.departmentService=a,this.kits=[],this.formSubmitted=!1,this.productoForm=this.fb.group({code:["",[k.p.required,k.p.minLength(3)]],name:["",[k.p.required,k.p.minLength(3)]],type:["0",[k.p.required,k.p.minLength(3)]],cost:[0,[k.p.required]],gain:[20],price:[0,[k.p.required]],kit:[""],wholesale:[0],department:[0],stock:[0],min:[0],max:[0],expiration:[""],visibility:[!0]}),this.sinResultados=!1,this.cargando=!1,this.searchProduct=[],this.inProducto="",this.btnAddKit="disabled",this.departamentos=[],this.costoN=0,this.gananciaN=20,this.precioN=0}ngOnInit(){this.cargarDepartamentos()}buscar(t){if(this.cargando=!0,0===t.length)return this.sinResultados=!1,void(this.searchProduct=[]);this.searchService.search("products",t).subscribe(({resultados:t})=>{if(this.cargando=!1,0===t.length)return this.searchProduct=[],void(this.sinResultados=!0);this.searchProduct=t},t=>{this.searchProduct=[],this.sinResultados=!1,n.a.fire("Error",t.error.msg,"error")})}seleccionarProducto(t){this.searchProduct=[],this.sinResultados=!1,this.search.nativeElement.value="",this.seleKit=t,this.inProducto=t.name,""!==this.inProducto&&(this.btnAddKit="")}agregarProductoKit(t){this.btnAddKit="disabled",this.inProducto="",this.qty.nativeElement.value="",0===t||"0"===t||""===t||t<0?n.a.fire("Atenci\xf3n","No has agregado una cantidad","info"):(this.kits.push({qty:t,product:{_id:this.seleKit.pid,name:this.seleKit.name}}),this.productoForm.value.kit=this.kits)}eliminarProductoKit(t){const e=this.kits.indexOf(t);-1!==e&&this.kits.splice(e,1),this.productoForm.value.kit=this.kits}crearProducto(){this.productoForm.value.kit="Paquete"!==this.productoForm.value.type?[]:this.kits,this.productoForm.value.price=this.precioN,this.formSubmitted=!0,this.productoForm.invalid||this.productService.createProduct(this.productoForm.value).subscribe(t=>{n.a.fire("Estupendo","Se ha guardado el producto exitosamente!","success"),this.formSubmitted=!1,this.productoForm.reset({code:"",name:"",type:"",cost:0,gain:20,price:0,kit:"",wholesale:0,department:0,stock:0,min:0,max:0,expiration:""})},t=>{n.a.fire("Error",t.error.msg,"error")})}cargarDepartamentos(){this.departmentService.loadDepartment().subscribe(({departments:t})=>{this.departamentos=t},t=>{n.a.fire("Error",t.error.msg,"error")})}porcentaje(t,e){let i;switch(t){case"costo":this.costoN=parseFloat(e),i=this.costoN*this.gananciaN/100,this.precioN=this.costoN/(1-this.gananciaN/100);break;case"ganancia":this.gananciaN=parseFloat(e),i=this.costoN*this.gananciaN/100,this.precioN=this.costoN/(1-this.gananciaN/100);break;case"precio":this.precioN=parseFloat(e),i=100*this.costoN/this.precioN,this.gananciaN=-1*(i-100);break;default:return}this.productoForm.value.price=this.precioN}campoValido(t){return!(!this.productoForm.get(t).invalid||!this.formSubmitted)}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(k.d),b.Hb(G),b.Hb(Mt),b.Hb(Lt))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-nuevo"]],viewQuery:function(t,e){if(1&t&&(b.tc(gt,!0),b.tc(wt,!0)),2&t){let t;b.jc(t=b.Ub())&&(e.search=t.first),b.jc(t=b.Ub())&&(e.qty=t.first)}},decls:106,vars:11,consts:[[1,"container-fluid","my-4"],[1,"col-lg-8","mx-auto"],[1,"card"],[1,"card-header"],[1,"card-body"],["id","productoForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"row","mb-3"],[1,"col-md-6","px-md-1"],[1,"form-floating"],["formControlName","code","type","text","placeholder","Codigo de barras",1,"form-control","text-capitalize"],["for","floatingInput"],["formControlName","name","type","text","placeholder","Nombre del producto",1,"form-control"],[1,"col-md-12","px-md-1"],["id","floatingSelectType","aria-label","Floating label select example","formControlName","type",1,"form-select"],["type",""],["selected","","value","0"],["value","Unidad"],["value","Granel"],["value","Paquete"],["for","floatingSelect"],["class","row mb-3",4,"ngIf"],[1,"col-md-3","px-md-1"],["formControlName","cost","type","number","min","0","placeholder","costo",1,"form-control",3,"value","keyup"],["costo",""],["formControlName","gain","type","number","min","0","placeholder","Ganancia",1,"form-control",3,"value","change"],["ganancia",""],["formControlName","price","type","number","min","0","placeholder","Precio",1,"form-control",3,"value","change"],["precio",""],["formControlName","wholesale","type","text","placeholder","Al Mayor",1,"form-control"],["id","floatingSelect","aria-label","Floating label select example","formControlName","department",1,"form-select"],[4,"ngFor","ngForOf"],["formControlName","expiration","type","date","placeholder","Fecha de vencimiento",1,"form-control"],[1,"col-md-4","px-md-1"],["formControlName","stock","type","text","placeholder","Stok",1,"form-control"],["formControlName","min","type","text","placeholder","Minimo",1,"form-control"],["formControlName","max","type","text","placeholder","Maximo",1,"form-control"],[1,"form-check","mt-2"],["formControlName","visibility","type","checkbox","value","","id","checkProducto","checked","",1,"form-check-input"],["for","checkProducto",1,"form-check-label"],[1,"row"],[1,"text-danger","mb-2"],["class","mb-1 animated fadeIn",4,"ngIf"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],[1,"col-md-12","px-md-1","mb-3"],["type","text","placeholder","Buscar Producto",1,"form-control",3,"keyup"],["search",""],["class","bg-white py-3 px-2 shadow col-10","style","position: absolute; z-index: 1020;",4,"ngIf"],[1,"col-md-5","px-md-1"],["type","text","disabled","","placeholder","Producto",1,"form-control",3,"value"],["type","number","min","0","placeholder","Cantidad",1,"form-control"],["qty",""],[1,"col-md-2","px-md-1"],["type","button",3,"click"],[1,"bi-plus",2,"font-size","1rem"],[1,"border","border-redounded","py-2","px-2"],[1,"table","table-sm","table-borderless","table-striped","table-hover"],[1,"border-bottom"],["scope","col",2,"width","30px"],["scope","col"],["class","trHover",4,"ngFor","ngForOf"],[1,"bg-white","py-3","px-2","shadow","col-10",2,"position","absolute","z-index","1020"],["class","text-center py-3",4,"ngIf"],["class","list-group list-group-flush overflow-auto","style","max-height: 200px;",4,"ngIf"],[1,"text-center","py-3"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"list-group","list-group-flush","overflow-auto",2,"max-height","200px"],[1,"list-group-item"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"align-self-center"],[1,"ms-auto"],[1,"btn","btn-link","p-1","text-success","float-end",3,"click"],[1,"bi-arrow-90deg-right"],[1,"trHover"],["scope","row"],[1,"btn","btn-link","p-1","text-danger",3,"click"],[1,"bi-trash",2,"font-size","0.9rem"],[3,"value",4,"ngIf"],[3,"value"],[1,"mb-1","animated","fadeIn"]],template:function(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",0),b.Mb(1,"div",1),b.Mb(2,"div",2),b.Mb(3,"div",3),b.pc(4," Informacion del producto "),b.Lb(),b.Mb(5,"div",4),b.Mb(6,"form",5),b.Tb("ngSubmit",function(){return e.crearProducto()}),b.Mb(7,"h5",6),b.pc(8,"Producto"),b.Lb(),b.Mb(9,"div",7),b.Mb(10,"div",8),b.Mb(11,"div",9),b.Ib(12,"input",10),b.Mb(13,"label",11),b.pc(14,"Codigo de barras"),b.Lb(),b.Lb(),b.Lb(),b.Mb(15,"div",8),b.Mb(16,"div",9),b.Ib(17,"input",12),b.Mb(18,"label",11),b.pc(19,"Nombre del producto"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(20,"h5",6),b.pc(21,"Tipo"),b.Lb(),b.Mb(22,"div",7),b.Mb(23,"div",13),b.Mb(24,"div",9),b.Mb(25,"select",14,15),b.Mb(27,"option",16),b.pc(28,"Seleccionar Tipo"),b.Lb(),b.Mb(29,"option",17),b.pc(30,"Unidad"),b.Lb(),b.Mb(31,"option",18),b.pc(32,"Granel"),b.Lb(),b.Mb(33,"option",19),b.pc(34,"Paquete"),b.Lb(),b.Lb(),b.Mb(35,"label",20),b.pc(36,"Seleccionar Tipo"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.oc(37,St,35,7,"div",21),b.Mb(38,"div",7),b.Mb(39,"div",22),b.Mb(40,"div",9),b.Mb(41,"input",23,24),b.Tb("keyup",function(){b.lc(t);const i=b.kc(42);return e.porcentaje("costo",i.value)}),b.Lb(),b.Mb(43,"label",11),b.pc(44,"costo"),b.Lb(),b.Lb(),b.Lb(),b.Mb(45,"div",22),b.Mb(46,"div",9),b.Mb(47,"input",25,26),b.Tb("change",function(){b.lc(t);const i=b.kc(48);return e.porcentaje("ganancia",i.value)}),b.Lb(),b.Mb(49,"label",11),b.pc(50,"Ganancia"),b.Lb(),b.Lb(),b.Lb(),b.Mb(51,"div",22),b.Mb(52,"div",9),b.Mb(53,"input",27,28),b.Tb("change",function(){b.lc(t);const i=b.kc(54);return e.porcentaje("precio",i.value)}),b.Lb(),b.Mb(55,"label",11),b.pc(56,"Precio"),b.Lb(),b.Lb(),b.Lb(),b.Mb(57,"div",22),b.Mb(58,"div",9),b.Ib(59,"input",29),b.Mb(60,"label",11),b.pc(61,"Al Mayor"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(62,"div",7),b.Mb(63,"div",8),b.Mb(64,"div",9),b.Mb(65,"select",30),b.Mb(66,"option",16),b.pc(67,"Seleccionar Departamento"),b.Lb(),b.oc(68,Ft,2,1,"ng-container",31),b.Lb(),b.Mb(69,"label",20),b.pc(70,"Seleccionar Departamento"),b.Lb(),b.Lb(),b.Lb(),b.Mb(71,"div",8),b.Mb(72,"div",9),b.Ib(73,"input",32),b.Mb(74,"label",11),b.pc(75,"Fecha de vencimiento"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(76,"div",7),b.Mb(77,"div",33),b.Mb(78,"div",9),b.Ib(79,"input",34),b.Mb(80,"label",11),b.pc(81,"Stock"),b.Lb(),b.Lb(),b.Lb(),b.Mb(82,"div",33),b.Mb(83,"div",9),b.Ib(84,"input",35),b.Mb(85,"label",11),b.pc(86,"Minimo"),b.Lb(),b.Lb(),b.Lb(),b.Mb(87,"div",33),b.Mb(88,"div",9),b.Ib(89,"input",36),b.Mb(90,"label",11),b.pc(91,"Maximo"),b.Lb(),b.Lb(),b.Lb(),b.Mb(92,"div",33),b.Mb(93,"div",37),b.Ib(94,"input",38),b.Mb(95,"label",39),b.pc(96," Producto Visible "),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(97,"div",40),b.Mb(98,"div",41),b.oc(99,Nt,2,0,"p",42),b.oc(100,jt,2,0,"p",42),b.oc(101,Dt,2,0,"p",42),b.oc(102,At,2,0,"p",42),b.oc(103,Et,2,0,"p",42),b.Lb(),b.Lb(),b.Mb(104,"button",43),b.pc(105,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.kc(26);b.wb(6),b.dc("formGroup",e.productoForm),b.wb(31),b.dc("ngIf","Paquete"===t.value),b.wb(4),b.dc("value",e.costoN),b.wb(6),b.dc("value",e.gananciaN),b.wb(6),b.dc("value",e.precioN),b.wb(15),b.dc("ngForOf",e.departamentos),b.wb(31),b.dc("ngIf",e.campoValido("code")),b.wb(1),b.dc("ngIf",e.campoValido("name")),b.wb(1),b.dc("ngIf",e.campoValido("type")),b.wb(1),b.dc("ngIf",e.campoValido("price")),b.wb(1),b.dc("ngIf",e.campoValido("cost"))}},directives:[k.r,k.i,k.f,k.b,k.h,k.e,k.o,k.k,k.q,m.m,k.l,m.l,k.a],encapsulation:2}),t})();const qt=s.a.base_url;let Rt=(()=>{class t{constructor(){}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}updateImage(t,e,i){return a=this,void 0,o=function*(){try{const a=`${qt}/uploads/${e}/${i}`,b=new FormData;b.append("image",t);const o=yield fetch(a,{method:"PUT",headers:{"x-token":localStorage.getItem("token")||""},body:b}),r=yield o.json();return!!r.ok&&r.nombreArchivo}catch(a){return console.log(a),!1}},new((b=void 0)||(b=Promise))(function(t,e){function i(t){try{n(o.next(t))}catch(i){e(i)}}function r(t){try{n(o.throw(t))}catch(i){e(i)}}function n(e){var a;e.done?t(e.value):(a=e.value,a instanceof b?a:new b(function(t){t(a)})).then(i,r)}n((o=o.apply(a,[])).next())});var a,b,o}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Ut=["fileImg"];function zt(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",42),b.Mb(2,"div",43),b.Mb(3,"span",44),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",12),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function $t(t,e){1&t&&(b.Mb(0,"tr",63),b.Mb(1,"th",64),b.Mb(2,"h4",12),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}function Ot(t,e){if(1&t&&(b.Mb(0,"th",75),b.pc(1),b.Lb()),2&t){const t=b.Xb().index;b.wb(1),b.qc(t+1)}}function Ht(t,e){if(1&t&&(b.Mb(0,"th",76),b.pc(1),b.Lb()),2&t){const t=b.Xb().index,e=b.Xb(2);b.wb(1),b.qc(t+1+e.desde)}}function Gt(t,e){if(1&t&&b.Ib(0,"img",77),2&t){const t=b.Xb().$implicit;b.fc("src","http://localhost:3000/api/uploads/department/",t.img,"",b.mc)}}function Bt(t,e){1&t&&b.Ib(0,"img",78)}function Vt(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",79),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.did)}),b.pc(1,"Activo"),b.Lb()}}function Wt(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",80),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.did)}),b.pc(1,"Desactivo"),b.Lb()}}function Yt(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",65),b.oc(1,Ot,2,1,"th",66),b.oc(2,Ht,2,1,"th",67),b.Mb(3,"td"),b.oc(4,Gt,1,1,"img",68),b.oc(5,Bt,1,0,"img",69),b.Lb(),b.Mb(6,"td",70),b.pc(7),b.Lb(),b.Mb(8,"td"),b.oc(9,Vt,2,0,"button",71),b.oc(10,Wt,2,0,"button",72),b.Lb(),b.Mb(11,"td",63),b.Mb(12,"button",73),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).informacionDepartamento(i)}),b.Ib(13,"i",74),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=b.Xb(2);b.wb(1),b.dc("ngIf",0===i.desde),b.wb(1),b.dc("ngIf",i.desde>0),b.wb(2),b.dc("ngIf",t.img),b.wb(1),b.dc("ngIf",!t.img),b.wb(2),b.qc(t.name),b.wb(2),b.dc("ngIf",t.status),b.wb(1),b.dc("ngIf",!t.status)}}function Zt(t,e){if(1&t&&(b.Mb(0,"small",12),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function Kt(t,e){if(1&t&&(b.Mb(0,"small",12),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.departmentos.length,")")}}function _t(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div"),b.Mb(2,"div",45),b.Mb(3,"span",46),b.Ib(4,"i",47),b.Lb(),b.Mb(5,"input",48,49),b.Tb("keyup",function(){b.lc(t);const e=b.kc(6);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(7,"label",50),b.pc(8,"Buscar Departamento"),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",51),b.Mb(10,"button",52),b.pc(11,"Crear Departamento"),b.Lb(),b.Lb(),b.Mb(12,"div",53),b.Mb(13,"table",54),b.Mb(14,"thead",55),b.Mb(15,"tr"),b.Mb(16,"th",56),b.pc(17,"#"),b.Lb(),b.Ib(18,"th",56),b.Mb(19,"th",57),b.pc(20,"Nombre"),b.Lb(),b.Mb(21,"th",56),b.pc(22,"Estado"),b.Lb(),b.Mb(23,"th",58),b.pc(24,"Acciones"),b.Lb(),b.Lb(),b.Lb(),b.Mb(25,"tbody"),b.oc(26,$t,4,0,"tr",59),b.oc(27,Yt,14,7,"tr",60),b.Lb(),b.Lb(),b.Lb(),b.Mb(28,"div",21),b.Mb(29,"div",61),b.Mb(30,"small",12),b.pc(31),b.Lb(),b.oc(32,Zt,2,1,"small",62),b.oc(33,Kt,2,2,"small",62),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb();b.wb(26),b.dc("ngIf",!t.sinResultados),b.wb(1),b.dc("ngForOf",t.departmentos),b.wb(4),b.rc("Total de departamentos: (",t.totalDepartamentos,")"),b.wb(1),b.dc("ngIf",0!==t.resultado),b.wb(1),b.dc("ngIf",0!==t.desde)}}function Jt(t,e){1&t&&(b.Mb(0,"p",81),b.pc(1,"- El nombre es obligatorio"),b.Lb())}function Qt(t,e){if(1&t&&b.Ib(0,"img",82),2&t){const t=b.Xb();b.fc("src","http://localhost:3000/api/uploads/department/",t.imgDepartamento,"",b.mc)}}function te(t,e){if(1&t&&b.Ib(0,"img",82),2&t){const t=b.Xb();b.dc("src",t.imgTemp,b.mc)}}function ee(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",83),b.Tb("click",function(){return b.lc(t),b.Xb().subirImg()}),b.pc(1,"Actualizar Imagen"),b.Lb()}if(2&t){const t=b.Xb();b.dc("disabled",!t.subirImagen)}}function ie(t,e){1&t&&(b.Mb(0,"p",81),b.pc(1,"- El nombre es obligatorio"),b.Lb())}let ae=(()=>{class t{constructor(t,e,i,a){this.departmentService=t,this.searchService=e,this.fb=i,this.fileUploadService=a,this.departmentos=[],this.departmentosTemp=[],this.totalDepartamentos=0,this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.newDepartmentForm=this.fb.group({name:["",[k.p.required,k.p.minLength(3)]],visibility:[!0,[k.p.required]]}),this.formSubmitted=!1,this.upDepartmentForm=this.fb.group({name:["",[k.p.required,k.p.minLength(3)]],id:["",[k.p.required,k.p.minLength(3)]],visibility:[!0,[k.p.required]]}),this.imgDepartamento="no-image",this.formSubmittedUp=!1,this.imgTemp=null}ngOnInit(){this.cargarDepartamentos()}cargarDepartamentos(){this.cargando=!0,this.sinResultados=!0,this.departmentService.loadDepartment().subscribe(({total:t,departments:e})=>{this.totalDepartamentos=t,this.departmentos=e,this.departmentosTemp=e,this.resultado=0,this.cargando=!1},t=>{n.a.fire("Error",t.error.msg,"error")})}buscar(t){if(this.sinResultados=!0,0===t.length)return this.departmentos=this.departmentosTemp,void(this.resultado=0);this.sinResultados=!0,this.searchService.search("departments",t).subscribe(({total:t,resultados:e})=>{if(0===e.length)return this.sinResultados=!1,this.departmentos=[],void(this.resultado=0);this.totalDepartamentos=t,this.departmentos=e,this.resultado=e.length},t=>{n.a.fire("Error",t.error.msg,"error")})}crearDepartamento(){this.formSubmitted=!0,this.newDepartmentForm.invalid||this.departmentService.createDepartment(this.newDepartmentForm.value).subscribe(t=>{this.cargarDepartamentos(),n.a.fire("Estupendo",`Se ha creado el Departamento ${this.newDepartmentForm.value.name}, exitosamente!`,"success"),this.newDepartmentForm.reset(),this.formSubmitted=!1},t=>{n.a.fire("Error",t.error.msgm,"error")})}campoValido(t){return!(!this.newDepartmentForm.get(t).invalid||!this.formSubmitted)}informacionDepartamento(t){this.imgDepartamento=t.img||"no-image",this.upDepartmentForm.setValue({name:t.name,id:t.did,visibility:t.visibility||!0})}actualizarDepartamento(){this.formSubmittedUp=!0,this.upDepartmentForm.invalid||this.departmentService.updateDepartment(this.upDepartmentForm.value,this.upDepartmentForm.value.id).subscribe(t=>{this.cargarDepartamentos(),n.a.fire("Estupendo",`El departamento ${this.upDepartmentForm.value.name}, ha sido actualizado`,"success"),this.upDepartmentForm.reset(),this.formSubmittedUp=!1},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValidoUpdate(t){return!(!this.upDepartmentForm.get(t).invalid||!this.formSubmittedUp)}statusUpdate(t){this.departmentService.statusUpdateDepartment(t).subscribe(t=>{let e;e=t.status?"Activado":"Desactivado",this.cargarDepartamentos(),n.a.fire("Estupendo",`El departamento ${t.name}, ha sido ${e}`,"success")},t=>{n.a.fire("Error",t.error.msg,"error")})}cambiarImage(t){if(this.subirImagen=t,!t)return this.imgTemp=null;const e=new FileReader;e.readAsDataURL(t),e.onloadend=()=>{this.imgTemp=e.result}}subirImg(){this.fileUploadService.updateImage(this.subirImagen,"department",this.upDepartmentForm.value.id).then(t=>this.cargarDepartamentos()),this.fileImg.nativeElement.value="",this.imgDepartamento="no-image",this.imgTemp=null}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(Lt),b.Hb(G),b.Hb(k.d),b.Hb(Rt))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-departamentos"]],viewQuery:function(t,e){if(1&t&&b.tc(Ut,!0),2&t){let t;b.jc(t=b.Ub())&&(e.fileImg=t.first)}},decls:77,vars:9,consts:[[1,"container-fluid"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],["id","nuevoDepartamento","tabindex","-1","aria-labelledby","nuevoDepartamentoModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","nuevoDepartamentoModal",1,"modal-title"],[1,"bi-collection",2,"font-size","1rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","newDepartmentForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"row","mb-3"],[1,"col-md-12","px-md-1"],[1,"form-floating"],["formControlName","name","type","text","placeholder","Nombre del Departamento",1,"form-control","text-capitalize"],["for","floatingInput"],[1,"form-check","mt-2"],["formControlName","visibility","type","checkbox","value","","id","flexCheckChecked","checked","",1,"form-check-input"],["for","flexCheckChecked",1,"form-check-label"],[1,"row"],[1,"text-danger","mb-2"],["class","mb-1 animated fadeIn",4,"ngIf"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","actualizarDepartamento","tabindex","-1","aria-labelledby","actualizarDepartamentoModal","aria-hidden","true",1,"modal","fade"],["id","actualizarDepartamentoModal",1,"modal-title"],["id","upDepartmentForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"col","py-2","text-center"],[1,"card"],[1,"card-body","text-center"],["class","avatar-redondo-lg mx-auto","alt","",3,"src",4,"ngIf"],[1,"mb-3"],["for","formFileSm",1,"form-label"],["id","formFileSm","type","file",1,"form-control","form-control-sm",3,"change"],["fileImg",""],[1,"small","font-italic","text-muted","mb-4"],["class","btn btnW btn-primary waves-effect waves-light px-3","type","button",3,"disabled","click",4,"ngIf"],["formControlName","visibility","type","checkbox","value","","id","flexCheckChecked2",1,"form-check-input"],["for","flexCheckChecked2",1,"form-check-label"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"form-floating","mb-2"],[1,"position-absolute","top-50","start-90","translate-middle"],[1,"bi-search",2,"font-size","1rem"],["type","text","id","floatingInput2","placeholder","Buscar Departamento",1,"form-control",3,"keyup"],["search",""],["for","floatingInput2 "],[1,"d-flex","justify-content-end"],["type","button","data-bs-toggle","modal","data-bs-target","#nuevoDepartamento",1,"btn","btn-sm","btn-primary","btnW","waves-effect","waves-ligth"],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2",1,"text-muted"],["scope","col ",1,"text-muted","w100"],["class","text-center ",4,"ngIf"],["class","trHover",4,"ngFor","ngForOf"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],[1,"text-center"],["colspan","10",1,"py-4"],[1,"trHover"],["scope","row ",4,"ngIf"],["scope","row",4,"ngIf"],["class","avatar avatar-img","alt","",3,"src",4,"ngIf"],["src","http://localhost:3000/api/uploads/department/no-image","class","avatar avatar-img","alt","",4,"ngIf"],["colspan","2"],["type","button","class","btn btnW waves-effect waves-ligth btn-success btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btnW waves-effect waves-ligth btn-danger btn-sm",3,"click",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#actualizarDepartamento",1,"btn","btn-link","p-1","text-primary",3,"click"],[1,"bi","bi-box-arrow-up-right"],["scope","row "],["scope","row"],["alt","",1,"avatar","avatar-img",3,"src"],["src","http://localhost:3000/api/uploads/department/no-image","alt","",1,"avatar","avatar-img"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-success","btn-sm",3,"click"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-danger","btn-sm",3,"click"],[1,"mb-1","animated","fadeIn"],["alt","",1,"avatar-redondo-lg","mx-auto",3,"src"],["type","button",1,"btn","btnW","btn-primary","waves-effect","waves-light","px-3",3,"disabled","click"]],template:function(t,e){1&t&&(b.Mb(0,"div",0),b.Mb(1,"div",1),b.oc(2,zt,7,0,"div",2),b.oc(3,_t,34,5,"div",2),b.Lb(),b.Lb(),b.Mb(4,"div",3),b.Mb(5,"div",4),b.Mb(6,"div",5),b.Mb(7,"div",6),b.Mb(8,"h5",7),b.Ib(9,"i",8),b.pc(10," Crear Departamento"),b.Lb(),b.Ib(11,"button",9),b.Lb(),b.Mb(12,"div",10),b.Mb(13,"form",11),b.Tb("ngSubmit",function(){return e.crearDepartamento()}),b.Mb(14,"h5",12),b.pc(15,"Informacion del Departamento"),b.Lb(),b.Mb(16,"div",13),b.Mb(17,"div",14),b.Mb(18,"div",15),b.Ib(19,"input",16),b.Mb(20,"label",17),b.pc(21,"Nombre del Departamento"),b.Lb(),b.Lb(),b.Mb(22,"div",18),b.Ib(23,"input",19),b.Mb(24,"label",20),b.pc(25," Departamento Visible "),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(26,"div",21),b.Mb(27,"div",22),b.oc(28,Jt,2,0,"p",23),b.Lb(),b.Lb(),b.Mb(29,"button",24),b.pc(30,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(31,"div",25),b.Mb(32,"button",26),b.pc(33,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(34,"div",27),b.Mb(35,"div",4),b.Mb(36,"div",5),b.Mb(37,"div",6),b.Mb(38,"h5",28),b.Ib(39,"i",8),b.pc(40," Crear Departamento"),b.Lb(),b.Ib(41,"button",9),b.Lb(),b.Mb(42,"div",10),b.Mb(43,"form",29),b.Tb("ngSubmit",function(){return e.actualizarDepartamento()}),b.Mb(44,"h5",12),b.pc(45,"Informacion del Departamento"),b.Lb(),b.Mb(46,"div",30),b.Mb(47,"div",31),b.Mb(48,"div",32),b.oc(49,Qt,1,1,"img",33),b.oc(50,te,1,1,"img",33),b.Mb(51,"div",34),b.Mb(52,"label",35),b.pc(53,"Seleccionar Imagen"),b.Lb(),b.Mb(54,"input",36,37),b.Tb("change",function(t){return e.cambiarImage(t.target.files[0])}),b.Lb(),b.Lb(),b.Mb(56,"div",38),b.pc(57,"JPG - PNG - WEBP - no mayor a 5 mb"),b.Lb(),b.oc(58,ee,2,1,"button",39),b.Lb(),b.Lb(),b.Lb(),b.Mb(59,"div",13),b.Mb(60,"div",14),b.Mb(61,"div",15),b.Ib(62,"input",16),b.Mb(63,"label",17),b.pc(64,"Nombre del Departamento"),b.Lb(),b.Lb(),b.Mb(65,"div",18),b.Ib(66,"input",40),b.Mb(67,"label",41),b.pc(68," Departamento Visible "),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(69,"div",21),b.Mb(70,"div",22),b.oc(71,ie,2,0,"p",23),b.Lb(),b.Lb(),b.Mb(72,"button",24),b.pc(73,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(74,"div",25),b.Mb(75,"button",26),b.pc(76,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(2),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando),b.wb(10),b.dc("formGroup",e.newDepartmentForm),b.wb(15),b.dc("ngIf",e.campoValido("name")),b.wb(15),b.dc("formGroup",e.upDepartmentForm),b.wb(6),b.dc("ngIf",!e.imgTemp),b.wb(1),b.dc("ngIf",e.imgTemp),b.wb(8),b.dc("ngIf",e.imgTemp),b.wb(13),b.dc("ngIf",e.campoValidoUpdate("name")))},directives:[m.m,k.r,k.i,k.f,k.b,k.h,k.e,k.a,m.l],encapsulation:2}),t})();const be=s.a.base_url;let oe=(()=>{class t{transform(t,e){return t?`${be}/uploads/${e}/${t}`:`${be}/uploads/${e}/no-image`}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=b.Gb({name:"imagen",type:t,pure:!0}),t})();function re(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",19),b.Mb(2,"div",20),b.Mb(3,"span",21),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",22),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function ne(t,e){1&t&&(b.Mb(0,"tr",41),b.Mb(1,"th",42),b.Mb(2,"h4",22),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}function ce(t,e){if(1&t&&(b.Mb(0,"th",52),b.pc(1),b.Lb()),2&t){const t=b.Xb().index;b.wb(1),b.qc(t+1)}}function se(t,e){if(1&t&&(b.Mb(0,"th",53),b.pc(1),b.Lb()),2&t){const t=b.Xb().index,e=b.Xb(2);b.wb(1),b.qc(t+1+e.desde)}}function de(t,e){if(1&t&&(b.Mb(0,"span"),b.pc(1),b.Yb(2,"number"),b.Lb()),2&t){const t=b.Xb().$implicit;b.wb(1),b.rc(" ",b.ac(2,1,t.stock+(t.returned||0)+(t.bought||0)-(t.sold||0)-(t.damaged||0),"1.3")," ")}}function le(t,e){if(1&t&&(b.Mb(0,"span"),b.pc(1),b.Yb(2,"number"),b.Lb()),2&t){const t=b.Xb().$implicit;b.wb(1),b.rc(" ",b.Zb(2,1,t.stock+(t.returned||0)+(t.bought||0)-(t.sold||0)-(t.damaged||0))," ")}}const ue=function(t){return["/dashboard/producto",t]};function pe(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",43),b.oc(1,ce,2,1,"th",44),b.oc(2,se,2,1,"th",45),b.Mb(3,"td"),b.Ib(4,"img",46),b.Yb(5,"imagen"),b.Lb(),b.Mb(6,"td"),b.Mb(7,"small"),b.pc(8),b.Lb(),b.Lb(),b.Mb(9,"td",47),b.pc(10),b.Lb(),b.Mb(11,"td"),b.pc(12),b.Lb(),b.Mb(13,"td"),b.oc(14,de,3,4,"span",16),b.oc(15,le,3,3,"span",16),b.Lb(),b.Mb(16,"td"),b.pc(17),b.Lb(),b.Mb(18,"td"),b.pc(19),b.Yb(20,"currency"),b.Lb(),b.Mb(21,"td"),b.pc(22),b.Lb(),b.Mb(23,"td"),b.pc(24),b.Yb(25,"currency"),b.Lb(),b.Mb(26,"td"),b.pc(27),b.Yb(28,"currency"),b.Lb(),b.Mb(29,"td",41),b.Mb(30,"button",48),b.Ib(31,"i",49),b.Lb(),b.Mb(32,"button",50),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).borrarProducto(i.pid)}),b.Ib(33,"i",51),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=b.Xb(2);b.wb(1),b.dc("ngIf",0===i.desde),b.wb(1),b.dc("ngIf",i.desde>0),b.wb(2),b.dc("src",b.ac(5,14,t.img,"products"),b.mc),b.wb(4),b.qc(t.code),b.wb(2),b.qc(t.name),b.wb(2),b.qc(t.department.name),b.wb(2),b.dc("ngIf","Granel"===t.type),b.wb(1),b.dc("ngIf","Granel"!==t.type),b.wb(2),b.qc(t.type),b.wb(2),b.qc(b.Zb(20,17,t.cost)),b.wb(3),b.rc("",t.gain,"%"),b.wb(2),b.qc(b.Zb(25,19,t.price)),b.wb(3),b.qc(b.Zb(28,21,t.wholesale)),b.wb(3),b.dc("routerLink",b.hc(23,ue,t.pid))}}function me(t,e){if(1&t&&(b.Mb(0,"small",22),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function he(t,e){if(1&t&&(b.Mb(0,"small",22),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.productos.length,")")}}function fe(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",54),b.Mb(1,"button",55),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(-10)}),b.pc(2,"Anterior"),b.Lb(),b.Mb(3,"button",55),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(10)}),b.pc(4,"Siguiente"),b.Lb(),b.Lb()}if(2&t){const t=b.Xb(2);b.wb(1),b.yb("",t.btnAtras," btn btn-sm btn-dark btnW waves-effect waves-light px-3"),b.wb(2),b.yb("",t.btnAdelante," btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2")}}function Me(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div"),b.Mb(2,"div",23),b.Mb(3,"span",24),b.Ib(4,"i",25),b.Lb(),b.Mb(5,"input",26,27),b.Tb("keyup",function(){b.lc(t);const e=b.kc(6);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(7,"label",28),b.pc(8,"Buscar Producto"),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",29),b.Mb(10,"table",30),b.Mb(11,"thead",31),b.Mb(12,"tr"),b.Mb(13,"th",32),b.pc(14,"#"),b.Lb(),b.Ib(15,"th",32),b.Mb(16,"th",32),b.pc(17,"Codigo"),b.Lb(),b.Mb(18,"th",33),b.pc(19,"Nombre"),b.Lb(),b.Mb(20,"th",32),b.pc(21,"Departamento"),b.Lb(),b.Mb(22,"th",32),b.pc(23,"stock"),b.Lb(),b.Mb(24,"th",32),b.pc(25,"Tipo"),b.Lb(),b.Mb(26,"th",32),b.pc(27,"Costo"),b.Lb(),b.Mb(28,"th",32),b.pc(29,"Ganancia"),b.Lb(),b.Mb(30,"th",32),b.pc(31,"Precio"),b.Lb(),b.Mb(32,"th",32),b.pc(33,"Precio Mayor"),b.Lb(),b.Mb(34,"th",34),b.pc(35,"Acciones"),b.Lb(),b.Lb(),b.Lb(),b.Mb(36,"tbody"),b.oc(37,ne,4,0,"tr",35),b.oc(38,pe,34,25,"tr",36),b.Lb(),b.Lb(),b.Lb(),b.Mb(39,"div",37),b.Mb(40,"div",38),b.Mb(41,"small",22),b.pc(42),b.Lb(),b.oc(43,me,2,1,"small",39),b.oc(44,he,2,2,"small",39),b.Lb(),b.oc(45,fe,5,6,"div",40),b.Lb(),b.Lb()}if(2&t){const t=b.kc(6),e=b.Xb();b.wb(37),b.dc("ngIf",!e.sinResultados),b.wb(1),b.dc("ngForOf",e.productos),b.wb(4),b.rc("Total de productos: (",e.totalProductos,")"),b.wb(1),b.dc("ngIf",0!==e.resultado),b.wb(1),b.dc("ngIf",0!==e.desde),b.wb(1),b.dc("ngIf",0===t.value.length)}}let ve=(()=>{class t{constructor(t,e,i){this.productService=t,this.searchService=e,this.fb=i,this.totalProductos=0,this.productos=[],this.productosTemp=[],this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.btnAtras="",this.btnAdelante=""}ngOnInit(){this.cargarProductos()}cargarProductos(){this.cargando=!0,this.sinResultados=!0,this.productService.cargarProductos(this.desde).subscribe(({total:t,products:e})=>{if(0===e.length)return this.sinResultados=!1,this.cargando=!1,this.productos=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalProductos=t,this.productos=e,this.productosTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalProductos>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalProductos<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.productos.length||this.desde+10>=this.totalProductos?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}cambiarPagina(t){this.desde+=t,this.desde<0?this.desde=0:this.desde>this.totalProductos&&(this.desde-=t),this.cargarProductos()}buscar(t){if(this.sinResultados=!0,0===t.length)return this.productos=this.productosTemp,void(this.resultado=0);this.sinResultados=!0,this.searchService.search("products",t).subscribe(({total:t,resultados:e})=>{if(0===e.length)return this.sinResultados=!1,this.productos=[],void(this.resultado=0);this.totalProductos=t,this.productos=e,this.resultado=e.length})}borrarProducto(t){this.productService.deleteProduct(t).subscribe(t=>{n.a.fire("Estupendo","Se ha borrado el Producto exitosamente!","success"),this.cargarProductos()},t=>{n.a.fire("Error",t.error.msg,"error")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(Mt),b.Hb(G),b.Hb(k.d))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-productos"]],decls:32,vars:2,consts:[[1,"bg-header-yellow","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","administracion-tab","data-bs-toggle","tab","href","#administracion","role","tab","aria-controls","administracion","aria-selected","true",1,"nav-link","text-dark","active"],[1,"bi-files",2,"font-size","1rem"],[1,"nav-item"],["id","nuevo-tab","data-bs-toggle","tab","href","#nuevo","role","tab","aria-controls","nuevo","aria-selected","false",1,"nav-link","text-primary"],[1,"bi-pencil-square",2,"font-size","1rem"],["id","departamentos-tab","data-bs-toggle","tab","href","#departamentos","role","tab","aria-controls","departamentos","aria-selected","false",1,"nav-link","text-dark"],[1,"bi-collection",2,"font-size","1rem"],["id","myTabContent",1,"tab-content","mt-4","bg-light2"],["id","administracion","role","tabpanel","aria-labelledby","administracion-tab",1,"tab-pane","fade","show","active"],[1,"container-fluid"],[1,"text-dark"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],["id","nuevo","role","tabpanel","aria-labelledby","nuevo-tab",1,"tab-pane","fade","show"],["id","departamentos","role","tabpanel","aria-labelledby","departamentos-tab",1,"tab-pane","fade","show"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"text-muted"],[1,"form-floating","mb-2"],[1,"position-absolute","top-50","start-90","translate-middle"],[1,"bi-search",2,"font-size","1rem"],["type","text","id","floatingInput","placeholder","Buscar Producto",1,"form-control",3,"keyup"],["search",""],["for","floatingInput "],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2",1,"text-muted"],["scope","col ",1,"text-muted","w100"],["class","text-center ",4,"ngIf"],["class","trHover ",4,"ngFor","ngForOf"],[1,"row"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],["class","col d-flex justify-content-end",4,"ngIf"],[1,"text-center"],["colspan","13",1,"py-4"],[1,"trHover"],["scope","row ",4,"ngIf"],["scope","row",4,"ngIf"],["alt","",1,"avatar","avatar-img",3,"src"],["colspan","2"],["type","button",1,"btn","btn-link","p-1","text-primary",3,"routerLink"],[1,"bi","bi-box-arrow-up-right"],["type","button",1,"btn","btn-link","p-1","text-danger",3,"click"],[1,"bi-trash",2,"font-size","0.9rem"],["scope","row "],["scope","row"],[1,"col","d-flex","justify-content-end"],["type","button",3,"click"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"PRODUCTOS"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Administracion de Productos"),b.Lb(),b.Lb(),b.Mb(9,"li",6),b.Mb(10,"a",7),b.Ib(11,"i",8),b.pc(12," Nuevo"),b.Lb(),b.Lb(),b.Mb(13,"li",6),b.Mb(14,"a",9),b.Ib(15,"i",10),b.pc(16," Departamentos"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(17,"div",11),b.Mb(18,"div",12),b.Mb(19,"div",13),b.Mb(20,"div"),b.Mb(21,"h5",14),b.pc(22,"ADMINISTRACI\xd3N DE PRODUCTOS"),b.Lb(),b.Mb(23,"p"),b.pc(24,"Administra todos los productos de forma centralizada."),b.Lb(),b.Lb(),b.Mb(25,"div",15),b.oc(26,re,7,0,"div",16),b.oc(27,Me,46,6,"div",16),b.Lb(),b.Lb(),b.Lb(),b.Mb(28,"div",17),b.Ib(29,"app-nuevo"),b.Lb(),b.Mb(30,"div",18),b.Ib(31,"app-departamentos"),b.Lb(),b.Lb()),2&t&&(b.wb(26),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando))},directives:[m.m,Xt,ae,m.l,a.c],pipes:[oe,m.c,m.f],encapsulation:2}),t})(),Le=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Bb({type:t,selectors:[["app-inventario"]],decls:2,vars:0,template:function(t,e){1&t&&(b.Mb(0,"p"),b.pc(1,"inventario works!"),b.Lb())},encapsulation:2}),t})(),ge=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Bb({type:t,selectors:[["app-compras"]],decls:2,vars:0,template:function(t,e){1&t&&(b.Mb(0,"p"),b.pc(1,"compras works!"),b.Lb())},encapsulation:2}),t})(),we=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Bb({type:t,selectors:[["app-configuracion"]],decls:43,vars:0,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","ticket1-tab",1,"nav-link","text-dark","active"],[1,"bi-gear",2,"font-size","1rem"],[1,"container-fluid","my-2"],[1,"p-2","border-bottom","border-top","mt-2"],[1,"mb-2","text-muted"],[1,"d-flex","flex-wrap"],[1,"p-2"],["routerLink","./usuarios","type","button",1,"btn","bg-white","btnW","waves-effect","waves-blue","text-muted"],[1,"bi-people",2,"font-size","1.5rem"],["routerLink","./caja","type","button",1,"btn","bg-white","btnW","waves-effect","waves-blue","text-muted"],[1,"bi-laptop",2,"font-size","1.5rem"],["routerLink","./mesas","type","button",1,"btn","bg-white","btnW","waves-effect","waves-blue","text-muted"],[1,"bi-grid",2,"font-size","1.5rem"],["routerLink","./empresa","type","button",1,"btn","bg-white","btnW","waves-effect","waves-blue","text-muted"],[1,"bi-building",2,"font-size","1.5rem"],[1,"p-2","border-bottom","border-bottom"],["routerLink","./cierres","type","button",1,"btn","bg-white","btnW","waves-effect","waves-blue","text-muted"],[1,"bi-calendar-check",2,"font-size","1.5rem"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Configuraciones"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Tablero Principal"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.Mb(11,"h4",8),b.pc(12,"General"),b.Lb(),b.Mb(13,"div",9),b.Mb(14,"div",10),b.Mb(15,"button",11),b.Ib(16,"i",12),b.Mb(17,"h5"),b.pc(18,"Usuarios"),b.Lb(),b.Lb(),b.Lb(),b.Mb(19,"div",10),b.Mb(20,"button",13),b.Ib(21,"i",14),b.Mb(22,"h5"),b.pc(23,"Cajas"),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"div",10),b.Mb(25,"button",15),b.Ib(26,"i",16),b.Mb(27,"h5"),b.pc(28,"Mesas"),b.Lb(),b.Lb(),b.Lb(),b.Mb(29,"div",10),b.Mb(30,"button",17),b.Ib(31,"i",18),b.Mb(32,"h5"),b.pc(33,"Mi Empresa"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(34,"div",19),b.Mb(35,"h4",8),b.pc(36,"Reportes"),b.Lb(),b.Mb(37,"div",9),b.Mb(38,"div",10),b.Mb(39,"button",20),b.Ib(40,"i",21),b.Mb(41,"h5"),b.pc(42,"Cierres"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb())},directives:[a.c],encapsulation:2}),t})();const Ie=s.a.base_url;let ye=(()=>{class t{constructor(t){this.http=t}get token(){return localStorage.getItem("token")||""}get headers(){return{headers:{"x-token":this.token}}}createInvoice(t,e){return this.http.post(`${Ie}/invoice/${e}`,t,this.headers)}loadInvoicesDate(t){return this.http.get(`${Ie}/invoice/date/${t}`,this.headers).pipe(Object(c.a)(t=>t))}loadInvoices(t=0){return this.http.get(`${Ie}/invoice?desde=${t}`,this.headers).pipe(q(500),Object(c.a)(t=>t))}loadInvoiceId(t){return this.http.get(`${Ie}/invoice/${t}`,this.headers).pipe(Object(c.a)(t=>t.invoice))}returnInvoice(t){return this.http.delete(`${Ie}/invoice/${t}`,this.headers)}}return t.\u0275fac=function(e){return new(e||t)(b.Qb(d.a))},t.\u0275prov=b.Db({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function xe(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",4),b.Mb(2,"div",5),b.Mb(3,"span",6),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",7),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function ke(t,e){1&t&&(b.Mb(0,"tr",25),b.Mb(1,"th",26),b.Mb(2,"h4",7),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}const Ce=function(t){return["/dashboard/factura",t]};function Te(t,e){if(1&t&&(b.Mb(0,"tr",28),b.Mb(1,"th"),b.pc(2),b.Lb(),b.Mb(3,"td",29),b.pc(4),b.Lb(),b.Mb(5,"td"),b.pc(6),b.Lb(),b.Mb(7,"td"),b.pc(8),b.Yb(9,"currency"),b.Lb(),b.Mb(10,"td"),b.pc(11),b.Lb(),b.Mb(12,"td"),b.pc(13),b.Yb(14,"date"),b.Lb(),b.Mb(15,"td",25),b.Mb(16,"button",30),b.Ib(17,"i",31),b.Lb(),b.Lb(),b.Lb()),2&t){const t=b.Xb().$implicit;b.fc("title","Cajero: ",t.user.name,""),b.wb(2),b.qc(t.invoice),b.wb(2),b.rc(" ",t.client.name," "),b.wb(2),b.rc(" ",t.client.cedula," "),b.wb(2),b.rc(" ",b.Zb(9,8,t.amount)," "),b.wb(3),b.rc(" ",t.type," "),b.wb(2),b.rc(" ",b.ac(14,10,t.fecha,"medium")," "),b.wb(3),b.dc("routerLink",b.hc(13,Ce,t.iid))}}function Se(t,e){if(1&t&&(b.Kb(0),b.oc(1,Te,18,15,"tr",27),b.Jb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngIf",!t.credito)}}function Pe(t,e){if(1&t&&(b.Mb(0,"small",7),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function Fe(t,e){if(1&t&&(b.Mb(0,"small",7),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.facturas.length,")")}}function Ne(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",32),b.Mb(1,"button",33),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(-50)}),b.pc(2,"Anterior"),b.Lb(),b.Mb(3,"button",33),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(50)}),b.pc(4,"Siguiente"),b.Lb(),b.Lb()}if(2&t){const t=b.Xb(2);b.wb(1),b.yb("",t.btnAtras," btn btn-sm btn-dark btnW waves-effect waves-light px-3"),b.wb(2),b.yb("",t.btnAdelante," btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2")}}function je(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div",8),b.Mb(2,"div"),b.Mb(3,"button",9),b.Tb("click",function(){return b.lc(t),b.Xb().cargarFacturas()}),b.Ib(4,"i",10),b.pc(5," Recargar "),b.Lb(),b.Lb(),b.Mb(6,"div",11),b.Mb(7,"input",12,13),b.Tb("change",function(){b.lc(t);const e=b.kc(8);return b.Xb().buscar(e.value)}),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",14),b.Mb(10,"table",15),b.Mb(11,"thead",16),b.Mb(12,"tr"),b.Mb(13,"th",17),b.pc(14,"#"),b.Lb(),b.Mb(15,"th",18),b.pc(16,"Cliente"),b.Lb(),b.Mb(17,"th",17),b.pc(18,"Cedula"),b.Lb(),b.Mb(19,"th",17),b.pc(20,"Monto"),b.Lb(),b.Mb(21,"th",17),b.pc(22,"Metodo"),b.Lb(),b.Mb(23,"th",17),b.pc(24,"fecha"),b.Lb(),b.Ib(25,"th",17),b.Lb(),b.Lb(),b.Mb(26,"tbody"),b.oc(27,ke,4,0,"tr",19),b.oc(28,Se,2,1,"ng-container",20),b.Lb(),b.Lb(),b.Lb(),b.Mb(29,"div",21),b.Mb(30,"div",22),b.Mb(31,"small",7),b.pc(32),b.Lb(),b.oc(33,Pe,2,1,"small",23),b.oc(34,Fe,2,2,"small",23),b.Lb(),b.oc(35,Ne,5,6,"div",24),b.Lb(),b.Lb()}if(2&t){const t=b.kc(8),e=b.Xb();b.wb(27),b.dc("ngIf",!e.sinResultados),b.wb(1),b.dc("ngForOf",e.facturas),b.wb(4),b.rc("Total de facturas: (",e.totalFacturas,")"),b.wb(1),b.dc("ngIf",0!==e.resultado),b.wb(1),b.dc("ngIf",0!==e.desde),b.wb(1),b.dc("ngIf",0===t.value.length)}}let De=(()=>{class t{constructor(t,e){this.invoiceService=t,this.searchService=e,this.totalFacturas=0,this.facturas=[],this.facturasTemp=[],this.cargando=!0,this.sinResultados=!0,this.resultado=0,this.desde=0,this.btnAtras="",this.btnAdelante=""}ngOnInit(){this.cargarFacturas()}cargarFacturas(){this.cargando=!0,this.sinResultados=!0,this.invoiceService.loadInvoices(this.desde).subscribe(({total:t,invoices:e})=>{if(0===e.length)return this.sinResultados=!1,this.cargando=!1,this.facturas=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalFacturas=t,this.facturas=e,this.facturasTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalFacturas>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalFacturas<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.facturas.length||this.desde+10>=this.totalFacturas?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}buscar(t){return this.sinResultados=!0,null===t?(this.facturas=this.facturasTemp,void(this.resultado=0)):t?(this.sinResultados=!0,void this.invoiceService.loadInvoicesDate(t).subscribe(({total:t,invoices:e})=>{if(0===e.length)return this.sinResultados=!1,this.facturas=[],void(this.resultado=0);this.totalFacturas=t,this.facturas=e,this.resultado=e.length})):(this.facturas=this.facturasTemp,void(this.resultado=0))}cambiarPagina(t){this.desde+=t,this.desde<0?this.desde=0:this.desde>this.totalFacturas&&(this.desde-=t),this.cargarFacturas()}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(ye),b.Hb(G))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-total"]],decls:9,vars:2,consts:[[1,"container-fluid"],[1,"text-dark"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"text-muted"],[1,"d-flex"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi-arrow-clockwise"],[1,"col-4","col-md-2","ms-auto"],["type","date",1,"form-control",3,"change"],["search",""],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2",1,"text-muted"],["class","text-center ",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],["class","col d-flex justify-content-end",4,"ngIf"],[1,"text-center"],["colspan","10",1,"py-4"],["class","trHover","tabindex","0","data-bs-toggle","tooltip",3,"title",4,"ngIf"],["tabindex","0","data-bs-toggle","tooltip",1,"trHover",3,"title"],["colspan","2"],["type","button",1,"btn","btn-link","p-1","text-primary",3,"routerLink"],[1,"bi","bi-box-arrow-up-right"],[1,"col","d-flex","justify-content-end"],["type","button",3,"click"]],template:function(t,e){1&t&&(b.Mb(0,"div",0),b.Mb(1,"div"),b.Mb(2,"h5",1),b.pc(3,"FACTURAS DE VENTAS"),b.Lb(),b.Mb(4,"p"),b.pc(5,"Lista de todas las facturas de ventas."),b.Lb(),b.Lb(),b.Mb(6,"div",2),b.oc(7,xe,7,0,"div",3),b.oc(8,je,36,6,"div",3),b.Lb(),b.Lb()),2&t&&(b.wb(7),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando))},directives:[m.m,m.l,a.c],pipes:[m.c,m.e],encapsulation:2}),t})();function Ae(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",4),b.Mb(2,"div",5),b.Mb(3,"span",6),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",7),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function Ee(t,e){1&t&&(b.Mb(0,"tr",25),b.Mb(1,"th",26),b.Mb(2,"h4",7),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}const Xe=function(t){return["/dashboard/factura",t]};function qe(t,e){if(1&t&&(b.Mb(0,"tr",28),b.Mb(1,"th"),b.pc(2),b.Lb(),b.Mb(3,"td",29),b.pc(4),b.Lb(),b.Mb(5,"td"),b.pc(6),b.Lb(),b.Mb(7,"td"),b.pc(8),b.Yb(9,"currency"),b.Lb(),b.Mb(10,"td"),b.pc(11),b.Lb(),b.Mb(12,"td"),b.pc(13),b.Yb(14,"date"),b.Lb(),b.Mb(15,"td",25),b.Mb(16,"button",30),b.Ib(17,"i",31),b.Lb(),b.Lb(),b.Lb()),2&t){const t=b.Xb().$implicit;b.fc("title","Cajero: ",t.user.name,""),b.wb(2),b.qc(t.invoice),b.wb(2),b.rc(" ",t.client.name," "),b.wb(2),b.rc(" ",t.client.cedula," "),b.wb(2),b.rc(" ",b.Zb(9,8,t.amount)," "),b.wb(3),b.rc(" ",t.type," "),b.wb(2),b.rc(" ",b.ac(14,10,t.fecha,"medium")," "),b.wb(3),b.dc("routerLink",b.hc(13,Xe,t.iid))}}function Re(t,e){if(1&t&&(b.Kb(0),b.oc(1,qe,18,15,"tr",27),b.Jb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngIf",t.credito)}}function Ue(t,e){if(1&t&&(b.Mb(0,"small",7),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function ze(t,e){if(1&t&&(b.Mb(0,"small",7),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.facturas.length,")")}}function $e(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",32),b.Mb(1,"button",33),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(-10)}),b.pc(2,"Anterior"),b.Lb(),b.Mb(3,"button",33),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(10)}),b.pc(4,"Siguiente"),b.Lb(),b.Lb()}if(2&t){const t=b.Xb(2);b.wb(1),b.yb("",t.btnAtras," btn btn-sm btn-dark btnW waves-effect waves-light px-3"),b.wb(2),b.yb("",t.btnAdelante," btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2")}}function Oe(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div"),b.Mb(2,"div",8),b.Mb(3,"span",9),b.Ib(4,"i",10),b.Lb(),b.Mb(5,"input",11,12),b.Tb("keyup",function(){b.lc(t);const e=b.kc(6);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(7,"label",13),b.pc(8,"Buscar Factura"),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",14),b.Mb(10,"table",15),b.Mb(11,"thead",16),b.Mb(12,"tr"),b.Mb(13,"th",17),b.pc(14,"#"),b.Lb(),b.Mb(15,"th",18),b.pc(16,"Cliente"),b.Lb(),b.Mb(17,"th",17),b.pc(18,"Cedula"),b.Lb(),b.Mb(19,"th",17),b.pc(20,"Monto"),b.Lb(),b.Mb(21,"th",17),b.pc(22,"Metodo"),b.Lb(),b.Mb(23,"th",17),b.pc(24,"fecha"),b.Lb(),b.Ib(25,"th",17),b.Lb(),b.Lb(),b.Mb(26,"tbody"),b.oc(27,Ee,4,0,"tr",19),b.oc(28,Re,2,1,"ng-container",20),b.Lb(),b.Lb(),b.Lb(),b.Mb(29,"div",21),b.Mb(30,"div",22),b.Mb(31,"small",7),b.pc(32),b.Lb(),b.oc(33,Ue,2,1,"small",23),b.oc(34,ze,2,2,"small",23),b.Lb(),b.oc(35,$e,5,6,"div",24),b.Lb(),b.Lb()}if(2&t){const t=b.kc(6),e=b.Xb();b.wb(27),b.dc("ngIf",!e.sinResultados),b.wb(1),b.dc("ngForOf",e.facturas),b.wb(4),b.rc("Total de facturas: (",e.totalFacturas,")"),b.wb(1),b.dc("ngIf",0!==e.resultado),b.wb(1),b.dc("ngIf",0!==e.desde),b.wb(1),b.dc("ngIf",0===t.value.length)}}let He=(()=>{class t{constructor(t){this.invoiceService=t,this.totalFacturas=0,this.facturas=[],this.facturasTemp=[],this.cargando=!0,this.sinResultados=!0,this.resultado=0,this.desde=0,this.btnAtras="",this.btnAdelante=""}ngOnInit(){this.cargarFacturas()}cargarFacturas(){this.cargando=!0,this.sinResultados=!0,this.invoiceService.loadInvoices(this.desde).subscribe(({total:t,invoices:e})=>{if(0===e.length)return this.sinResultados=!1,this.cargando=!1,this.facturas=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalFacturas=t,this.facturas=e,this.facturasTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalFacturas>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalFacturas<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.facturas.length||this.desde+10>=this.totalFacturas?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(ye))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-credito"]],decls:9,vars:2,consts:[[1,"container-fluid"],[1,"text-dark"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"text-muted"],[1,"form-floating","mb-2"],[1,"position-absolute","top-50","start-90","translate-middle"],[1,"bi-search",2,"font-size","1rem"],["type","text","id","floatingInputCredito","placeholder","Buscar Factura por numero",1,"form-control",3,"keyup"],["search",""],["for","floatingInputCredito "],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2",1,"text-muted"],["class","text-center ",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],["class","col d-flex justify-content-end",4,"ngIf"],[1,"text-center"],["colspan","10",1,"py-4"],["class","trHover","tabindex","0","data-bs-toggle","tooltip",3,"title",4,"ngIf"],["tabindex","0","data-bs-toggle","tooltip",1,"trHover",3,"title"],["colspan","2"],["type","button",1,"btn","btn-link","p-1","text-primary",3,"routerLink"],[1,"bi","bi-box-arrow-up-right"],[1,"col","d-flex","justify-content-end"],["type","button",3,"click"]],template:function(t,e){1&t&&(b.Mb(0,"div",0),b.Mb(1,"div"),b.Mb(2,"h5",1),b.pc(3,"FACTURAS DE VENTAS A CREDITO"),b.Lb(),b.Mb(4,"p"),b.pc(5,"Lista de todas las facturas de ventas a credito."),b.Lb(),b.Lb(),b.Mb(6,"div",2),b.oc(7,Ae,7,0,"div",3),b.oc(8,Oe,36,6,"div",3),b.Lb(),b.Lb()),2&t&&(b.wb(7),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando))},directives:[m.m,m.l,a.c],pipes:[m.c,m.e],encapsulation:2}),t})(),Ge=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=b.Bb({type:t,selectors:[["app-facturas"]],decls:18,vars:0,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","facturas-tab","data-bs-toggle","tab","href","#facturas","role","tab","aria-controls","facturas","aria-selected","true",1,"nav-link","text-dark","active"],[1,"bi-journal-check",2,"font-size","1rem"],[1,"nav-item"],["id","creditos-tab","data-bs-toggle","tab","href","#creditos","role","tab","aria-controls","creditos","aria-selected","false",1,"nav-link","text-dark"],[1,"bi-clock-history",2,"font-size","1rem"],["id","myTabContent",1,"tab-content","mt-4","bg-light2"],["id","facturas","role","tabpanel","aria-labelledby","facturas-tab",1,"tab-pane","fade","show","active"],["id","creditos","role","tabpanel","aria-labelledby","creditos-tab",1,"tab-pane","fade"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Facturas"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Facturas"),b.Lb(),b.Lb(),b.Mb(9,"li",6),b.Mb(10,"a",7),b.Ib(11,"i",8),b.pc(12," Creditos"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(13,"div",9),b.Mb(14,"div",10),b.Ib(15,"app-total"),b.Lb(),b.Mb(16,"div",11),b.Ib(17,"app-credito"),b.Lb(),b.Lb())},directives:[De,He],encapsulation:2}),t})();var Be=i("qfBg");const Ve=["fileImg"];function We(t,e){if(1&t&&(b.Ib(0,"img",32),b.Yb(1,"imagen")),2&t){const t=b.Xb();b.dc("src",b.ac(1,1,t.usuario.img,"user"),b.mc)}}function Ye(t,e){if(1&t&&b.Ib(0,"img",32),2&t){const t=b.Xb();b.dc("src",t.imgTemp,b.mc)}}function Ze(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",33),b.Tb("click",function(){return b.lc(t),b.Xb().subirImg()}),b.pc(1,"Actualizar Imagen"),b.Lb()}if(2&t){const t=b.Xb();b.dc("disabled",!t.subirImagen)}}let Ke=(()=>{class t{constructor(t,e,i){this.fileUploadService=t,this.fb=e,this.userService=i,this.formSubmitted=!1,this.upUserForm=this.fb.group({usuario:["",[k.p.required,k.p.maxLength(3)]],name:["",[k.p.required,k.p.maxLength(3)]],password:["",[k.p.minLength(6)]],repassword:["",[k.p.minLength(6)]]}),this.imgTemp=null,this.imgProducto="no-image",this.usuario=i.user,this.upUserForm.reset({usuario:this.usuario.usuario,name:this.usuario.name,uid:this.usuario.uid})}ngOnInit(){}actualizarUsuario(){""===this.upUserForm.value.password&&this.upUserForm.reset({usuario:this.upUserForm.value.usuario,name:this.upUserForm.value.name}),this.userService.updateUser(this.upUserForm.value,this.usuario.uid).subscribe(t=>{console.log(t.user),n.a.fire("Estupendo","Se ha actualizado tu perfil exitosamente","success")},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValido(t){return!(!this.upUserForm.get(t).invalid||!this.formSubmitted)}cambiarImage(t){if(this.subirImagen=t,!t)return this.imgTemp=null;const e=new FileReader;e.readAsDataURL(t),e.onloadend=()=>{this.imgTemp=e.result}}subirImg(){this.fileUploadService.updateImage(this.subirImagen,"user",this.usuario.uid).then(t=>this.usuario.img=t),this.fileImg.nativeElement.value="",this.imgProducto="no-image",this.imgTemp=null}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(Rt),b.Hb(k.d),b.Hb(Be.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-perfil"]],viewQuery:function(t,e){if(1&t&&b.tc(Ve,!0),2&t){let t;b.jc(t=b.Ub())&&(e.fileImg=t.first)}},decls:56,vars:4,consts:[[1,"bg-header-yellow","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","nuevo-tab",1,"nav-link","text-dark","active"],[1,"bi-pencil",2,"font-size","1rem"],[1,"container-fluid","my-4"],[1,"row"],[1,"col-lg-4","text-center"],[1,"card"],[1,"card-body","text-center"],["class","avatar-redondo-lg mx-auto","alt","",3,"src",4,"ngIf"],[1,"small","font-italic","text-muted","mb-4"],[1,"mb-3"],["for","formFileSm",1,"form-label"],["id","formFileSm","type","file",1,"form-control","form-control-sm",3,"change"],["fileImg",""],["class","btn btnW btn-primary waves-effect waves-light px-3","type","button",3,"disabled","click",4,"ngIf"],[1,"col-lg-8"],[1,"card-header"],[1,"card-body"],["id","upProductForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"form-floating"],["formControlName","usuario","type","text","placeholder","Usuario",1,"form-control"],["for","floatingInput"],["formControlName","name","type","text","placeholder","Nombres",1,"form-control"],[1,"row","mb-3"],["formControlName","password","type","password","placeholder","Contrase\xf1a",1,"form-control"],["formControlName","repassword","type","password","placeholder","Repetir Contrase\xf1a",1,"form-control"],[1,"text-danger","mb-2"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],["alt","",1,"avatar-redondo-lg","mx-auto",3,"src"],["type","button",1,"btn","btnW","btn-primary","waves-effect","waves-light","px-3",3,"disabled","click"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"PERFIL"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Editar Producto"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.Mb(11,"div",8),b.Mb(12,"div",9),b.Mb(13,"div",10),b.oc(14,We,2,4,"img",11),b.oc(15,Ye,1,1,"img",11),b.Mb(16,"div",12),b.pc(17,"JPG - PNG - WEBP - no mayor a 5 mb"),b.Lb(),b.Mb(18,"div",13),b.Mb(19,"label",14),b.pc(20,"Seleccionar Imagen"),b.Lb(),b.Mb(21,"input",15,16),b.Tb("change",function(t){return e.cambiarImage(t.target.files[0])}),b.Lb(),b.Lb(),b.oc(23,Ze,2,1,"button",17),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"div",18),b.Mb(25,"div",9),b.Mb(26,"div",19),b.pc(27," Mi Perfil "),b.Lb(),b.Mb(28,"div",20),b.Mb(29,"form",21),b.Tb("ngSubmit",function(){return e.actualizarUsuario()}),b.Mb(30,"h5",22),b.pc(31,"Datos Personales"),b.Lb(),b.Mb(32,"div",13),b.Mb(33,"div",23),b.Ib(34,"input",24),b.Mb(35,"label",25),b.pc(36,"Usuario"),b.Lb(),b.Lb(),b.Lb(),b.Mb(37,"div",13),b.Mb(38,"div",23),b.Ib(39,"input",26),b.Mb(40,"label",25),b.pc(41,"Nombres"),b.Lb(),b.Lb(),b.Lb(),b.Mb(42,"div",27),b.Mb(43,"div",23),b.Ib(44,"input",28),b.Mb(45,"label",25),b.pc(46,"Contrase\xf1a"),b.Lb(),b.Lb(),b.Lb(),b.Mb(47,"div",27),b.Mb(48,"div",23),b.Ib(49,"input",29),b.Mb(50,"label",25),b.pc(51,"Repetir Contrase\xf1a"),b.Lb(),b.Lb(),b.Lb(),b.Mb(52,"div",7),b.Ib(53,"div",30),b.Lb(),b.Mb(54,"button",31),b.pc(55,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(14),b.dc("ngIf",!e.imgTemp),b.wb(1),b.dc("ngIf",e.imgTemp),b.wb(8),b.dc("ngIf",e.imgTemp),b.wb(6),b.dc("formGroup",e.upUserForm))},directives:[m.m,k.r,k.i,k.f,k.b,k.h,k.e],pipes:[oe],encapsulation:2}),t})();const _e=["search"],Je=["qty"],Qe=["fileImg"],ti=["cantidadE"],ei=["cantidadS"];function ii(t,e){if(1&t&&(b.Mb(0,"h4",88),b.pc(1),b.Yb(2,"number"),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.rc(" ",b.Zb(2,1,t.producto.stock+(t.producto.returned||0)+(t.producto.bought||0)-(t.producto.sold||0)-(t.producto.damaged||0))," ")}}function ai(t,e){if(1&t&&(b.Mb(0,"h4",88),b.pc(1),b.Yb(2,"number"),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.rc(" ",b.ac(2,1,t.producto.stock+(t.producto.returned||0)+(t.producto.bought||0)-(t.producto.sold||0)-(t.producto.damaged||0),"1.3")," ")}}function bi(t,e){if(1&t&&(b.Ib(0,"img",89),b.Yb(1,"imagen")),2&t){const t=b.Xb();b.dc("src",b.ac(1,1,t.producto.img,"products"),b.mc)}}function oi(t,e){if(1&t&&b.Ib(0,"img",89),2&t){const t=b.Xb();b.dc("src",t.imgTemp,b.mc)}}function ri(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",90),b.Tb("click",function(){return b.lc(t),b.Xb().subirImg()}),b.pc(1,"Actualizar Imagen"),b.Lb()}if(2&t){const t=b.Xb();b.dc("disabled",!t.subirImagen)}}function ni(t,e){1&t&&(b.Mb(0,"div",108),b.Mb(1,"h6",28),b.pc(2,"Sin resultados"),b.Lb(),b.Lb())}function ci(t,e){1&t&&(b.Mb(0,"div",111),b.Mb(1,"div",112),b.Mb(2,"span",113),b.pc(3,"Loading..."),b.Lb(),b.Lb(),b.Mb(4,"div"),b.Mb(5,"small",28),b.pc(6,"Cargando..."),b.Lb(),b.Lb(),b.Lb())}function si(t,e){if(1&t){const t=b.Nb();b.Mb(0,"li",115),b.Mb(1,"div",117),b.Mb(2,"div",118),b.Mb(3,"span"),b.pc(4),b.Lb(),b.Lb(),b.Mb(5,"div",119),b.Mb(6,"button",120),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(4).seleccionarProducto(i)}),b.Ib(7,"i",121),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit;b.wb(4),b.rc(" ",t.name," ")}}function di(t,e){if(1&t&&(b.Mb(0,"ul",114),b.Mb(1,"li",115),b.Mb(2,"h6"),b.pc(3),b.Lb(),b.Lb(),b.oc(4,si,8,1,"li",116),b.Lb()),2&t){const t=b.Xb(3);b.wb(3),b.rc("Resultados: (",t.searchProduct.length,")"),b.wb(1),b.dc("ngForOf",t.searchProduct)}}function li(t,e){if(1&t&&(b.Mb(0,"div",108),b.oc(1,ci,7,0,"div",109),b.oc(2,di,5,2,"ul",110),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.dc("ngIf",t.cargando),b.wb(1),b.dc("ngIf",!t.cargando)}}function ui(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",122),b.Mb(1,"th",123),b.Mb(2,"small"),b.pc(3),b.Lb(),b.Lb(),b.Mb(4,"td"),b.Mb(5,"small"),b.pc(6),b.Lb(),b.Lb(),b.Mb(7,"td"),b.Mb(8,"small"),b.pc(9),b.Lb(),b.Lb(),b.Mb(10,"td"),b.Mb(11,"button",124),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).eliminarProductoKit(i)}),b.Ib(12,"small",125),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=e.index;b.wb(3),b.qc(i+1),b.wb(3),b.qc(t.product.name),b.wb(3),b.qc(t.qty)}}function pi(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",29),b.Mb(1,"h6",28),b.pc(2,"Agregar Productos"),b.Lb(),b.Ib(3,"hr"),b.Mb(4,"div",91),b.Mb(5,"div",31),b.Mb(6,"input",92,93),b.Tb("keyup",function(){b.lc(t);const e=b.kc(7);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(8,"label",33),b.pc(9,"Buscar Producto"),b.Lb(),b.Lb(),b.oc(10,ni,3,0,"div",94),b.oc(11,li,3,2,"div",94),b.Lb(),b.Mb(12,"div",29),b.Mb(13,"div",95),b.Ib(14,"input",96),b.Lb(),b.Mb(15,"div",95),b.Ib(16,"input",97,98),b.Lb(),b.Mb(18,"div",99),b.Mb(19,"button",100),b.Tb("click",function(){b.lc(t);const e=b.kc(17);return b.Xb().agregarProductoKit(e.value)}),b.Ib(20,"i",101),b.Lb(),b.Lb(),b.Lb(),b.Mb(21,"div",35),b.Mb(22,"div",102),b.Mb(23,"table",103),b.Mb(24,"thead",104),b.Mb(25,"tr",28),b.Mb(26,"th",105),b.pc(27,"#"),b.Lb(),b.Mb(28,"th",106),b.pc(29,"Nombre"),b.Lb(),b.Mb(30,"th",106),b.pc(31,"Cantidad"),b.Lb(),b.Ib(32,"th",106),b.Lb(),b.Lb(),b.Mb(33,"tbody"),b.oc(34,ui,13,3,"tr",107),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb();b.wb(10),b.dc("ngIf",t.sinResultados),b.wb(1),b.dc("ngIf",t.searchProduct.length>0),b.wb(3),b.dc("value",t.inProducto),b.wb(5),b.yb("",t.btnAddKit," btn btnW waves-effect waves-ligth px-3 btn-success"),b.wb(15),b.dc("ngForOf",t.kits)}}function mi(t,e){if(1&t&&(b.Mb(0,"option",127),b.pc(1),b.Lb()),2&t){const t=b.Xb().$implicit;b.ec("value",t.did),b.wb(1),b.qc(t.name)}}function hi(t,e){if(1&t&&(b.Kb(0),b.oc(1,mi,2,2,"option",126),b.Jb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngIf",t.status)}}let fi=(()=>{class t{constructor(t,e,i,a,b,o,r){this.productService=t,this.fb=e,this.router=i,this.activatedRoute=a,this.searchService=b,this.departmentService=o,this.fileUploadService=r,this.searchProduct=[],this.kits=[],this.formSubmitted=!1,this.upProductForm=this.fb.group({code:[""],name:[""],type:[0],cost:[""],gain:[""],price:[""],kit:[""],wholesale:[""],department:[""],min:[0],max:[0],expiration:[""],pid:[""],visibility:[!0]}),this.sinResultados=!1,this.cargando=!1,this.inProducto="",this.btnAddKit="disabled",this.departamentos=[],this.imgTemp=null,this.imgProducto="no-image"}ngOnInit(){this.cargarDepartamentos(),this.activatedRoute.params.subscribe(({id:t})=>{this.productoID=t,this.cargarProducto(t)})}cargarProducto(t){this.productService.cargarProductoId(t).subscribe(t=>{this.producto=t,this.productoImg=t.img;const{code:e,name:i,type:a,cost:b,gain:o,expiration:r,visibility:n,price:c,wholesale:s,department:{_id:d},pid:l}=t,u=t.min||0,p=t.max||0;let m;this.costoN=b||0,this.gananciaN=o||20,this.precioN=c||0,this.upProductForm.value.price=this.precioN,this.kits=t.kit,(null!==r||r)&&(m=r.toString().slice(0,10)),this.upProductForm.reset({code:e,name:i,type:a,cost:b,price:c,visibility:n,wholesale:s,gain:o,department:d,min:u,max:p,expiration:m,pid:l})})}buscar(t){if(this.cargando=!0,0===t.length)return this.sinResultados=!1,void(this.searchProduct=[]);this.searchService.search("products",t).subscribe(({resultados:t})=>{if(this.cargando=!1,0===t.length)return this.searchProduct=[],void(this.sinResultados=!0);this.searchProduct=t},t=>{this.searchProduct=[],this.sinResultados=!1})}seleccionarProducto(t){this.searchProduct=[],this.sinResultados=!1,this.search.nativeElement.value="",this.seleKit=t,this.inProducto=t.name,""!==this.inProducto&&(this.btnAddKit="")}agregarProductoKit(t){this.btnAddKit="disabled",this.inProducto="",this.qty.nativeElement.value="",0===t||"0"===t||""===t||t<0?n.a.fire("Atenci\xf3n","No has agregado una cantidad","info"):(this.kits.push({qty:t,product:{_id:this.seleKit.pid,name:this.seleKit.name}}),this.upProductForm.value.kit=this.kits)}eliminarProductoKit(t){const e=this.kits.indexOf(t);-1!==e&&this.kits.splice(e,1),this.upProductForm.value.kit=this.kits}cargarDepartamentos(){this.departmentService.loadDepartment().subscribe(({departments:t})=>{this.departamentos=t},t=>{n.a.fire("Error",t.error.msg,"error")})}porcentaje(t,e){let i;switch(t){case"costo":this.costoN=parseFloat(e),i=this.costoN*this.gananciaN/100,this.precioN=this.costoN/(1-this.gananciaN/100);break;case"ganancia":this.gananciaN=parseFloat(e),i=this.costoN*this.gananciaN/100,this.precioN=this.costoN/(1-this.gananciaN/100);break;case"precio":this.precioN=parseFloat(e),i=100*this.costoN/this.precioN,this.gananciaN=-1*(i-100);break;default:return}this.upProductForm.value.price=this.precioN}actualizarProducto(){this.upProductForm.value.kit="Paquete"!==this.upProductForm.value.type?[]:this.kits,this.upProductForm.value.price=this.precioN,console.log("cantidad ",this.upProductForm.value.stock),this.productService.actualizarProducto(this.upProductForm.value,this.upProductForm.value.pid).subscribe(t=>{n.a.fire("Estupendo",`Se ha actualizado el producto, ${this.upProductForm.value.name} con exito!`,"success"),this.activatedRoute.params.subscribe(({id:t})=>{this.cargarProducto(t)})},t=>{n.a.fire("Error",t.error.msg,"error")})}cambiarImage(t){if(this.subirImagen=t,!t)return this.imgTemp=null;const e=new FileReader;e.readAsDataURL(t),e.onloadend=()=>{this.imgTemp=e.result}}subirImg(){this.fileUploadService.updateImage(this.subirImagen,"products",this.productoID).then(t=>this.producto.img=t),this.fileImg.nativeElement.value="",this.imgProducto="no-image",this.imgTemp=null}ajustar(t,e){if(e<=0||!e)return n.a.fire("Atenci\xf3n","Debes de asignar una canitidad","info");"entrada"===t?this.producto.bought?this.producto.bought+=Number(e):this.producto.bought=Number(e):this.producto.damaged?this.producto.damaged+=Number(e):this.producto.damaged=Number(e),this.productService.actualizarProducto(this.producto,this.producto.pid).subscribe(t=>{n.a.fire("Estupendo",`Se ha actualizado el inventario del producto, ${this.producto.name} exitosamente!`,"success"),this.cargarProducto(this.producto.pid),this.cantidadE.nativeElement.value="",this.cantidadS.nativeElement.value=""},t=>{n.a.fire("Error",t.error.msg,"error")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(Mt),b.Hb(k.d),b.Hb(a.b),b.Hb(a.a),b.Hb(G),b.Hb(Lt),b.Hb(Rt))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-producto"]],viewQuery:function(t,e){if(1&t&&(b.tc(_e,!0),b.tc(Je,!0),b.tc(Qe,!0),b.tc(ti,!0),b.tc(ei,!0)),2&t){let t;b.jc(t=b.Ub())&&(e.search=t.first),b.jc(t=b.Ub())&&(e.qty=t.first),b.jc(t=b.Ub())&&(e.fileImg=t.first),b.jc(t=b.Ub())&&(e.cantidadE=t.first),b.jc(t=b.Ub())&&(e.cantidadS=t.first)}},decls:167,vars:11,consts:[[1,"bg-header-yellow","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","nuevo-tab",1,"nav-link","text-dark","active"],[1,"bi-pencil",2,"font-size","1rem"],[1,"container-fluid","my-4"],[1,"row"],[1,"col-lg-4","text-center"],[1,"card","bg-success","text-white"],[1,"card-body","text-center"],[1,"mb-0"],["class","display-6",4,"ngIf"],[1,"d-grid","gap-2","mt-2","mb-4"],["data-bs-toggle","modal","data-bs-target","#ajustarInventario","type","button",1,"btn","btn-dark"],[1,"bi-card-checklist"],[1,"card"],["class","avatar-redondo-lg mx-auto","alt","",3,"src",4,"ngIf"],[1,"small","font-italic","text-muted","mb-4"],[1,"mb-3"],["for","formFileSm",1,"form-label"],["id","formFileSm","type","file",1,"form-control","form-control-sm",3,"change"],["fileImg",""],["class","btn btnW btn-primary waves-effect waves-light px-3","type","button",3,"disabled","click",4,"ngIf"],[1,"col-lg-8"],[1,"card-header"],[1,"card-body"],["id","upProductForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"row","mb-3"],[1,"col-md-6","px-md-1"],[1,"form-floating"],["formControlName","code","type","text","placeholder","Codigo de barras",1,"form-control","text-capitalize"],["for","floatingInput"],["formControlName","name","type","text","placeholder","Nombre del producto",1,"form-control"],[1,"col-md-12","px-md-1"],["id","floatingSelectType","aria-label","Floating label select example","formControlName","type",1,"form-select"],["type",""],["selected","","value","0"],["value","Unidad"],["value","Granel"],["value","Paquete"],["for","floatingSelect"],["class","row mb-3",4,"ngIf"],[1,"col-md-3","px-md-1"],["formControlName","cost","type","number","min","0","placeholder","costo",1,"form-control",3,"value","keyup"],["costo",""],["formControlName","gain","type","number","min","0","placeholder","Ganancia",1,"form-control",3,"value","change"],["ganancia",""],["formControlName","price","type","number","min","0","placeholder","Precio",1,"form-control",3,"value","change"],["precio",""],["formControlName","wholesale","type","text","placeholder","Al Mayor",1,"form-control"],["id","floatingSelect","aria-label","Floating label select example","formControlName","department",1,"form-select"],[4,"ngFor","ngForOf"],["formControlName","expiration","type","date","placeholder","Fecha de vencimiento",1,"form-control"],["formControlName","min","type","text","placeholder","Minimo",1,"form-control"],["formControlName","max","type","text","placeholder","Maximo",1,"form-control"],[1,"col-md-4","px-md-1"],[1,"form-check","mt-2"],["formControlName","visibility","type","checkbox","value","","id","checkProducto","checked","",1,"form-check-input"],["for","checkProducto",1,"form-check-label"],[1,"text-danger","mb-2"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],["id","ajustarInventario","tabindex","-1","aria-labelledby","ajustarInventarioModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","ajustarInventarioModal",1,"modal-title"],[1,"bi-arrow-left-right",2,"font-size","1rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","nav-entradas-tab","data-bs-toggle","tab","href","#nav-entradas","role","tab","aria-controls","nav-entradas","aria-selected","true",1,"nav-link","active"],[1,"bi-box-arrow-in-right"],["id","nav-salidas-tab","data-bs-toggle","tab","href","#nav-salidas","role","tab","aria-controls","nav-salidas","aria-selected","false",1,"nav-link"],[1,"bi-box-arrow-right"],["id","nav-tabContent",1,"tab-content"],["id","nav-entradas","role","tabpanel","aria-labelledby","nav-entradas-tab",1,"tab-pane","fade","show","active"],[1,"py-4"],[1,"form-group"],["for",""],["type","number","placeholder","Agregue la cantidad de productos nuevos",1,"form-control"],["cantidadE",""],[1,"col","py-2"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary",3,"click"],["id","nav-salidas","role","tabpanel","aria-labelledby","nav-salidas-tab",1,"tab-pane","fade"],["type","number","placeholder","Registre el ajuste de los productos",1,"form-control"],["cantidadS",""],[1,"display-6"],["alt","",1,"avatar-redondo-lg","mx-auto",3,"src"],["type","button",1,"btn","btnW","btn-primary","waves-effect","waves-light","px-3",3,"disabled","click"],[1,"col-md-12","px-md-1","mb-3"],["type","text","placeholder","Buscar Producto",1,"form-control",3,"keyup"],["search",""],["class","bg-white py-3 px-2 shadow col-10","style","position: absolute; z-index: 1020;",4,"ngIf"],[1,"col-md-5","px-md-1"],["type","text","disabled","","placeholder","Producto",1,"form-control",3,"value"],["type","number","min","0","placeholder","Cantidad",1,"form-control"],["qty",""],[1,"col-md-2","px-md-1"],["type","button",3,"click"],[1,"bi-plus",2,"font-size","1rem"],[1,"border","border-redounded","py-2","px-2"],[1,"table","table-sm","table-borderless","table-striped","table-hover"],[1,"border-bottom"],["scope","col",2,"width","30px"],["scope","col"],["class","trHover",4,"ngFor","ngForOf"],[1,"bg-white","py-3","px-2","shadow","col-10",2,"position","absolute","z-index","1020"],["class","text-center py-3",4,"ngIf"],["class","list-group list-group-flush overflow-auto","style","max-height: 200px;",4,"ngIf"],[1,"text-center","py-3"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"list-group","list-group-flush","overflow-auto",2,"max-height","200px"],[1,"list-group-item"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"align-self-center"],[1,"ms-auto"],[1,"btn","btn-link","p-1","text-success","float-end",3,"click"],[1,"bi-arrow-90deg-right"],[1,"trHover"],["scope","row"],[1,"btn","btn-link","p-1","text-danger",3,"click"],[1,"bi-trash",2,"font-size","0.9rem"],[3,"value",4,"ngIf"],[3,"value"]],template:function(t,e){if(1&t){const t=b.Nb();b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"PRODUCTOS"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Editar Producto"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.Mb(11,"div",8),b.Mb(12,"div",9),b.Mb(13,"div",10),b.Mb(14,"p",11),b.pc(15,"Stock"),b.Lb(),b.oc(16,ii,3,3,"h4",12),b.oc(17,ai,3,4,"h4",12),b.Lb(),b.Lb(),b.Mb(18,"div",13),b.Mb(19,"button",14),b.Ib(20,"i",15),b.pc(21," Ajustar Inventario "),b.Lb(),b.Lb(),b.Mb(22,"div",16),b.Mb(23,"div",10),b.oc(24,bi,2,4,"img",17),b.oc(25,oi,1,1,"img",17),b.Mb(26,"div",18),b.pc(27,"JPG - PNG - WEBP - no mayor a 5 mb"),b.Lb(),b.Mb(28,"div",19),b.Mb(29,"label",20),b.pc(30,"Seleccionar Imagen"),b.Lb(),b.Mb(31,"input",21,22),b.Tb("change",function(t){return e.cambiarImage(t.target.files[0])}),b.Lb(),b.Lb(),b.oc(33,ri,2,1,"button",23),b.Lb(),b.Lb(),b.Lb(),b.Mb(34,"div",24),b.Mb(35,"div",16),b.Mb(36,"div",25),b.pc(37," Informacion del producto "),b.Lb(),b.Mb(38,"div",26),b.Mb(39,"form",27),b.Tb("ngSubmit",function(){return e.actualizarProducto()}),b.Mb(40,"h5",28),b.pc(41,"Producto"),b.Lb(),b.Mb(42,"div",29),b.Mb(43,"div",30),b.Mb(44,"div",31),b.Ib(45,"input",32),b.Mb(46,"label",33),b.pc(47,"Codigo de barras"),b.Lb(),b.Lb(),b.Lb(),b.Mb(48,"div",30),b.Mb(49,"div",31),b.Ib(50,"input",34),b.Mb(51,"label",33),b.pc(52,"Nombre del producto"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(53,"h5",28),b.pc(54,"Tipo"),b.Lb(),b.Mb(55,"div",29),b.Mb(56,"div",35),b.Mb(57,"div",31),b.Mb(58,"select",36,37),b.Mb(60,"option",38),b.pc(61,"Seleccionar Tipo"),b.Lb(),b.Mb(62,"option",39),b.pc(63,"Unidad"),b.Lb(),b.Mb(64,"option",40),b.pc(65,"Granel"),b.Lb(),b.Mb(66,"option",41),b.pc(67,"Paquete"),b.Lb(),b.Lb(),b.Mb(68,"label",42),b.pc(69,"Seleccionar Tipo"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.oc(70,pi,35,7,"div",43),b.Mb(71,"div",29),b.Mb(72,"div",44),b.Mb(73,"div",31),b.Mb(74,"input",45,46),b.Tb("keyup",function(){b.lc(t);const i=b.kc(75);return e.porcentaje("costo",i.value)}),b.Lb(),b.Mb(76,"label",33),b.pc(77,"costo"),b.Lb(),b.Lb(),b.Lb(),b.Mb(78,"div",44),b.Mb(79,"div",31),b.Mb(80,"input",47,48),b.Tb("change",function(){b.lc(t);const i=b.kc(81);return e.porcentaje("ganancia",i.value)}),b.Lb(),b.Mb(82,"label",33),b.pc(83,"Ganancia"),b.Lb(),b.Lb(),b.Lb(),b.Mb(84,"div",44),b.Mb(85,"div",31),b.Mb(86,"input",49,50),b.Tb("change",function(){b.lc(t);const i=b.kc(87);return e.porcentaje("precio",i.value)}),b.Lb(),b.Mb(88,"label",33),b.pc(89,"Precio"),b.Lb(),b.Lb(),b.Lb(),b.Mb(90,"div",44),b.Mb(91,"div",31),b.Ib(92,"input",51),b.Mb(93,"label",33),b.pc(94,"Al Mayor"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(95,"div",29),b.Mb(96,"div",30),b.Mb(97,"div",31),b.Mb(98,"select",52),b.Mb(99,"option",38),b.pc(100,"Seleccionar Departamento"),b.Lb(),b.oc(101,hi,2,1,"ng-container",53),b.Lb(),b.Mb(102,"label",42),b.pc(103,"Seleccionar Departamento"),b.Lb(),b.Lb(),b.Lb(),b.Mb(104,"div",30),b.Mb(105,"div",31),b.Ib(106,"input",54),b.Mb(107,"label",33),b.pc(108,"Fecha de vencimiento"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(109,"div",29),b.Mb(110,"div",30),b.Mb(111,"div",31),b.Ib(112,"input",55),b.Mb(113,"label",33),b.pc(114,"Minimo"),b.Lb(),b.Lb(),b.Lb(),b.Mb(115,"div",30),b.Mb(116,"div",31),b.Ib(117,"input",56),b.Mb(118,"label",33),b.pc(119,"Maximo"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(120,"div",57),b.Mb(121,"div",58),b.Ib(122,"input",59),b.Mb(123,"label",60),b.pc(124," Producto Visible "),b.Lb(),b.Lb(),b.Lb(),b.Mb(125,"div",7),b.Ib(126,"div",61),b.Lb(),b.Mb(127,"button",62),b.pc(128,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(129,"div",63),b.Mb(130,"div",64),b.Mb(131,"div",65),b.Mb(132,"div",66),b.Mb(133,"h5",67),b.Ib(134,"i",68),b.pc(135," Movimientos "),b.Lb(),b.Ib(136,"button",69),b.Lb(),b.Mb(137,"div",70),b.Mb(138,"nav"),b.Mb(139,"div",71),b.Mb(140,"a",72),b.Ib(141,"i",73),b.pc(142," Ingresar"),b.Lb(),b.Mb(143,"a",74),b.Ib(144,"i",75),b.pc(145," Ajustar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(146,"div",76),b.Mb(147,"div",77),b.Mb(148,"div",78),b.Mb(149,"div",79),b.Mb(150,"label",80),b.pc(151,"Aumentar"),b.Lb(),b.Ib(152,"input",81,82),b.Lb(),b.Mb(154,"div",83),b.Mb(155,"button",84),b.Tb("click",function(){b.lc(t);const i=b.kc(153);return e.ajustar("entrada",i.value)}),b.pc(156,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(157,"div",85),b.Mb(158,"div",78),b.Mb(159,"div",79),b.Mb(160,"label",80),b.pc(161,"Ajuste"),b.Lb(),b.Ib(162,"input",86,87),b.Lb(),b.Mb(164,"div",83),b.Mb(165,"button",84),b.Tb("click",function(){b.lc(t);const i=b.kc(163);return e.ajustar("salida",i.value)}),b.pc(166,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.kc(59);b.wb(16),b.dc("ngIf","Granel"!==e.producto.type),b.wb(1),b.dc("ngIf","Granel"===e.producto.type),b.wb(7),b.dc("ngIf",!e.imgTemp),b.wb(1),b.dc("ngIf",e.imgTemp),b.wb(8),b.dc("ngIf",e.imgTemp),b.wb(6),b.dc("formGroup",e.upProductForm),b.wb(31),b.dc("ngIf","Paquete"===t.value),b.wb(4),b.dc("value",e.costoN),b.wb(6),b.dc("value",e.gananciaN),b.wb(6),b.dc("value",e.precioN),b.wb(15),b.dc("ngForOf",e.departamentos)}},directives:[m.m,k.r,k.i,k.f,k.b,k.h,k.e,k.o,k.k,k.q,k.l,m.l,k.a],pipes:[m.f,oe],encapsulation:2}),t})();function Mi(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",35),b.Mb(2,"div",36),b.Mb(3,"span",37),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",18),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function vi(t,e){1&t&&(b.Mb(0,"tr",56),b.Mb(1,"th",57),b.Mb(2,"h4",18),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}function Li(t,e){if(1&t&&(b.Mb(0,"th",68),b.pc(1),b.Lb()),2&t){const t=b.Xb().index;b.wb(1),b.qc(t+1)}}function gi(t,e){if(1&t&&(b.Mb(0,"th",69),b.pc(1),b.Lb()),2&t){const t=b.Xb().index,e=b.Xb(2);b.wb(1),b.qc(t+1+e.desde)}}function wi(t,e){1&t&&(b.Mb(0,"span",70),b.pc(1,"Abierta"),b.Lb())}function Ii(t,e){1&t&&(b.Mb(0,"span",71),b.pc(1,"Cerrada"),b.Lb())}function yi(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",72),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.caid)}),b.pc(1,"Activa"),b.Lb()}}function xi(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",73),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.caid)}),b.pc(1,"Desactivada"),b.Lb()}}function ki(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",58),b.oc(1,Li,2,1,"th",59),b.oc(2,gi,2,1,"th",60),b.Mb(3,"td",61),b.pc(4),b.Lb(),b.Mb(5,"td",61),b.pc(6),b.Lb(),b.Mb(7,"td"),b.oc(8,wi,2,0,"span",62),b.oc(9,Ii,2,0,"span",63),b.Lb(),b.Mb(10,"td"),b.oc(11,yi,2,0,"button",64),b.oc(12,xi,2,0,"button",65),b.Lb(),b.Mb(13,"td",56),b.Mb(14,"button",66),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).informacionCaja(i)}),b.Ib(15,"i",67),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=b.Xb(2);b.wb(1),b.dc("ngIf",0===i.desde),b.wb(1),b.dc("ngIf",i.desde>0),b.wb(2),b.qc(t.name),b.wb(2),b.qc(t.description),b.wb(2),b.dc("ngIf",!t.cerrada),b.wb(1),b.dc("ngIf",t.cerrada),b.wb(2),b.dc("ngIf",t.status),b.wb(1),b.dc("ngIf",!t.status)}}function Ci(t,e){if(1&t&&(b.Mb(0,"small",18),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function Ti(t,e){if(1&t&&(b.Mb(0,"small",18),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.listaCaja.length,")")}}function Si(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div"),b.Mb(2,"div",38),b.Mb(3,"span",39),b.Ib(4,"i",40),b.Lb(),b.Mb(5,"input",41,42),b.Tb("keyup",function(){b.lc(t);const e=b.kc(6);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(7,"label",43),b.pc(8,"Buscar Caja"),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",44),b.Mb(10,"button",45),b.pc(11,"Crear Caja"),b.Lb(),b.Lb(),b.Mb(12,"div",46),b.Mb(13,"table",47),b.Mb(14,"thead",48),b.Mb(15,"tr"),b.Mb(16,"th",49),b.pc(17,"#"),b.Lb(),b.Mb(18,"th",50),b.pc(19,"Nombre"),b.Lb(),b.Mb(20,"th",50),b.pc(21,"Descripci\xf3n"),b.Lb(),b.Mb(22,"th",49),b.pc(23,"Estado"),b.Lb(),b.Mb(24,"th",49),b.pc(25,"Activa"),b.Lb(),b.Mb(26,"th",51),b.pc(27,"Acciones"),b.Lb(),b.Lb(),b.Lb(),b.Mb(28,"tbody"),b.oc(29,vi,4,0,"tr",52),b.oc(30,ki,16,8,"tr",53),b.Lb(),b.Lb(),b.Lb(),b.Mb(31,"div",25),b.Mb(32,"div",54),b.Mb(33,"small",18),b.pc(34),b.Lb(),b.oc(35,Ci,2,1,"small",55),b.oc(36,Ti,2,2,"small",55),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb();b.wb(29),b.dc("ngIf",!t.sinResultados),b.wb(1),b.dc("ngForOf",t.listaCaja),b.wb(4),b.rc("Total de cajas: (",t.totalCajas,")"),b.wb(1),b.dc("ngIf",0!==t.resultado),b.wb(1),b.dc("ngIf",0!==t.desde)}}function Pi(t,e){1&t&&(b.Mb(0,"p",74),b.pc(1,"- El nombre es obligatorio"),b.Lb())}function Fi(t,e){1&t&&(b.Mb(0,"p",74),b.pc(1,"- Debe de tener como minimo 5 letras"),b.Lb())}function Ni(t,e){1&t&&(b.Mb(0,"p",74),b.pc(1,"- El nombre es obligatorio"),b.Lb())}function ji(t,e){1&t&&(b.Mb(0,"p",74),b.pc(1,"- La descripci\xf3n es obligatoria"),b.Lb())}let Di=(()=>{class t{constructor(t,e,i){this.cajaService=t,this.fb=e,this.searchService=i,this.listaCaja=[],this.listaCajaTemp=[],this.totalCajas=0,this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.formSubmitted=!1,this.newCajaForm=this.fb.group({name:["",[k.p.required,k.p.minLength(3)]],description:["",[k.p.minLength(5)]]}),this.formSubmittedUp=!1,this.upCajaForm=this.fb.group({name:["",[k.p.required,k.p.minLength(3)]],description:["",[k.p.required,k.p.minLength(3)]],id:["",[k.p.required,k.p.minLength(3)]]})}ngOnInit(){this.cargarCajas()}buscar(t){if(this.sinResultados=!0,0===t.length)return this.listaCaja=this.listaCajaTemp,void(this.resultado=0);this.sinResultados=!0,this.searchService.search("caja",t).subscribe(({total:t,resultados:e})=>{if(0===e.length)return this.sinResultados=!1,this.listaCaja=[],void(this.resultado=0);this.totalCajas=t,this.listaCaja=e,this.resultado=e.length})}crearCaja(){this.formSubmitted=!0,this.newCajaForm.invalid||this.cajaService.createCaja(this.newCajaForm.value).subscribe(t=>{this.formSubmitted=!1,this.cargarCajas(),this.newCajaForm.reset(),n.a.fire("Estupendo","Se ha creado la caja exitosamente","success")},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValido(t){return!(!this.newCajaForm.get(t).invalid||!this.formSubmitted)}cargarCajas(){this.cajaService.loadCajas().subscribe(({total:t,cajas:e})=>{this.totalCajas=t,this.listaCaja=e,this.listaCajaTemp=e,this.resultado=0,this.cargando=!1},t=>{n.a.fire("Error",t.error.msg,"error")})}informacionCaja(t){this.upCajaForm.setValue({name:t.name,description:t.description,id:t.caid})}actualizarCaja(){this.formSubmittedUp=!0,this.upCajaForm.invalid||this.cajaService.updateCaja(this.upCajaForm.value,this.upCajaForm.value.id).subscribe(t=>{this.formSubmittedUp=!1,this.cargarCajas(),this.upCajaForm.reset(),n.a.fire("Estupendo","Se ha actualizado la caja exitosamente","success")},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValidoUpdate(t){return!(!this.upCajaForm.get(t).invalid||!this.formSubmittedUp)}statusUpdate(t){this.cajaService.statusUpdateCaja(t).subscribe(t=>{let e;e=t.status?"Activada":"Desactivada",this.cargarCajas(),n.a.fire("Estupendo",`La caja ${t.name}, ha sido ${e}`,"success")},t=>{n.a.fire("Error",t.error.msg,"error")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(u),b.Hb(k.d),b.Hb(G))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-caja"]],decls:79,vars:8,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","ticket1-tab",1,"nav-link","text-dark","active"],[1,"bi-gear",2,"font-size","1rem"],[1,"container-fluid","my-4"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],["id","nuevaCaja","tabindex","-1","aria-labelledby","nuevaCajaModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","nuevaCajaModal",1,"modal-title"],[1,"bi-collection",2,"font-size","1rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","newDepartmentForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"row","mb-3"],[1,"col-md-12","px-md-1"],[1,"form-floating"],["formControlName","name","type","text","placeholder","Nombre de la caja",1,"form-control","text-capitalize"],["for","floatingInput"],["formControlName","description","type","text","placeholder","Descripci\xf3n",1,"form-control"],[1,"row"],[1,"text-danger","mb-2"],["class","mb-1 animated fadeIn",4,"ngIf"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","actualizarCaja","tabindex","-1","aria-labelledby","actualizarCajaModal","aria-hidden","true",1,"modal","fade"],["id","actualizarCajaModal",1,"modal-title"],["id","upCajaForm","autocomplete","off",3,"formGroup","ngSubmit"],["formControlName","description","type","text","placeholder","Descripci\xf3n de la caja",1,"form-control","text-capitalize"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"form-floating","mb-2"],[1,"position-absolute","top-50","start-90","translate-middle"],[1,"bi-search",2,"font-size","1rem"],["type","text","id","floatingInput2","placeholder","Buscar Caja",1,"form-control",3,"keyup"],["search",""],["for","floatingInput2 "],[1,"d-flex","justify-content-end"],["type","button","data-bs-toggle","modal","data-bs-target","#nuevaCaja",1,"btn","btn-sm","btn-primary","btnW","waves-effect","waves-ligth"],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2",1,"text-muted"],["scope","col ",1,"text-muted","w100"],["class","text-center ",4,"ngIf"],["class","trHover",4,"ngFor","ngForOf"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],[1,"text-center"],["colspan","10",1,"py-4"],[1,"trHover"],["scope","row ",4,"ngIf"],["scope","row",4,"ngIf"],["colspan","2"],["class","badge rounded-pill bg-danger text-white-75",4,"ngIf"],["class","badge rounded-pill bg-success text-white-75",4,"ngIf"],["type","button","class","btn btnW waves-effect waves-ligth btn-success btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btnW waves-effect waves-ligth btn-danger btn-sm",3,"click",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#actualizarCaja",1,"btn","btn-link","p-1","text-primary",3,"click"],[1,"bi","bi-box-arrow-up-right"],["scope","row "],["scope","row"],[1,"badge","rounded-pill","bg-danger","text-white-75"],[1,"badge","rounded-pill","bg-success","text-white-75"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-success","btn-sm",3,"click"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-danger","btn-sm",3,"click"],[1,"mb-1","animated","fadeIn"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Configuraciones / Caja"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Tablero Principal"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.oc(11,Mi,7,0,"div",8),b.oc(12,Si,37,5,"div",8),b.Lb(),b.Lb(),b.Mb(13,"div",9),b.Mb(14,"div",10),b.Mb(15,"div",11),b.Mb(16,"div",12),b.Mb(17,"h5",13),b.Ib(18,"i",14),b.pc(19," Crear Caja Nueva"),b.Lb(),b.Ib(20,"button",15),b.Lb(),b.Mb(21,"div",16),b.Mb(22,"form",17),b.Tb("ngSubmit",function(){return e.crearCaja()}),b.Mb(23,"h5",18),b.pc(24,"Informacion de la caja"),b.Lb(),b.Mb(25,"div",19),b.Mb(26,"div",20),b.Mb(27,"div",21),b.Ib(28,"input",22),b.Mb(29,"label",23),b.pc(30,"Nombre de la caja"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(31,"div",19),b.Mb(32,"div",20),b.Mb(33,"div",21),b.Ib(34,"input",24),b.Mb(35,"label",23),b.pc(36,"Descripci\xf3n"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(37,"div",25),b.Mb(38,"div",26),b.oc(39,Pi,2,0,"p",27),b.oc(40,Fi,2,0,"p",27),b.Lb(),b.Lb(),b.Mb(41,"button",28),b.pc(42,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(43,"div",29),b.Mb(44,"button",30),b.pc(45,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(46,"div",31),b.Mb(47,"div",10),b.Mb(48,"div",11),b.Mb(49,"div",12),b.Mb(50,"h5",32),b.Ib(51,"i",14),b.pc(52," Actualizar Caja"),b.Lb(),b.Ib(53,"button",15),b.Lb(),b.Mb(54,"div",16),b.Mb(55,"form",33),b.Tb("ngSubmit",function(){return e.actualizarCaja()}),b.Mb(56,"h5",18),b.pc(57,"Informacion de la caja"),b.Lb(),b.Mb(58,"div",19),b.Mb(59,"div",20),b.Mb(60,"div",21),b.Ib(61,"input",22),b.Mb(62,"label",23),b.pc(63,"Nombre de la caja"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(64,"div",19),b.Mb(65,"div",20),b.Mb(66,"div",21),b.Ib(67,"input",34),b.Mb(68,"label",23),b.pc(69,"Descripci\xf3n de la caja"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(70,"div",25),b.Mb(71,"div",26),b.oc(72,Ni,2,0,"p",27),b.oc(73,ji,2,0,"p",27),b.Lb(),b.Lb(),b.Mb(74,"button",28),b.pc(75,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(76,"div",29),b.Mb(77,"button",30),b.pc(78,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(11),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando),b.wb(10),b.dc("formGroup",e.newCajaForm),b.wb(17),b.dc("ngIf",e.campoValido("name")),b.wb(1),b.dc("ngIf",e.campoValido("description")),b.wb(15),b.dc("formGroup",e.upCajaForm),b.wb(17),b.dc("ngIf",e.campoValidoUpdate("name")),b.wb(1),b.dc("ngIf",e.campoValidoUpdate("description")))},directives:[m.m,k.r,k.i,k.f,k.b,k.h,k.e,m.l],styles:[""]}),t})();function Ai(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",32),b.Mb(2,"div",33),b.Mb(3,"span",34),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",18),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function Ei(t,e){1&t&&(b.Mb(0,"tr",53),b.Mb(1,"th",54),b.Mb(2,"h4",18),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}function Xi(t,e){if(1&t&&(b.Mb(0,"th",63),b.pc(1),b.Lb()),2&t){const t=b.Xb().index;b.wb(1),b.qc(t+1)}}function qi(t,e){if(1&t&&(b.Mb(0,"th",64),b.pc(1),b.Lb()),2&t){const t=b.Xb().index,e=b.Xb(2);b.wb(1),b.qc(t+1+e.desde)}}function Ri(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",65),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.uid)}),b.pc(1,"Activo"),b.Lb()}}function Ui(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",66),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.uid)}),b.pc(1,"Desactivo"),b.Lb()}}function zi(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",55),b.oc(1,Xi,2,1,"th",56),b.oc(2,qi,2,1,"th",57),b.Mb(3,"td",58),b.pc(4),b.Lb(),b.Mb(5,"td"),b.oc(6,Ri,2,0,"button",59),b.oc(7,Ui,2,0,"button",60),b.Lb(),b.Mb(8,"td",53),b.Mb(9,"button",61),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).informacionDepartamento(i)}),b.Ib(10,"i",62),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=b.Xb(2);b.wb(1),b.dc("ngIf",0===i.desde),b.wb(1),b.dc("ngIf",i.desde>0),b.wb(2),b.qc(t.name),b.wb(2),b.dc("ngIf",t.status),b.wb(1),b.dc("ngIf",!t.status)}}function $i(t,e){if(1&t&&(b.Mb(0,"small",18),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function Oi(t,e){if(1&t&&(b.Mb(0,"small",18),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.usuarios.length,")")}}function Hi(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div"),b.Mb(2,"div",35),b.Mb(3,"span",36),b.Ib(4,"i",37),b.Lb(),b.Mb(5,"input",38,39),b.Tb("keyup",function(){b.lc(t);const e=b.kc(6);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(7,"label",40),b.pc(8,"Buscar Usuarios"),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",41),b.Mb(10,"button",42),b.pc(11,"Crear Usuario"),b.Lb(),b.Lb(),b.Mb(12,"div",43),b.Mb(13,"table",44),b.Mb(14,"thead",45),b.Mb(15,"tr"),b.Mb(16,"th",46),b.pc(17,"#"),b.Lb(),b.Mb(18,"th",47),b.pc(19,"Nombre"),b.Lb(),b.Mb(20,"th",46),b.pc(21,"Estado"),b.Lb(),b.Mb(22,"th",48),b.pc(23,"Acciones"),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"tbody"),b.oc(25,Ei,4,0,"tr",49),b.oc(26,zi,11,5,"tr",50),b.Lb(),b.Lb(),b.Lb(),b.Mb(27,"div",26),b.Mb(28,"div",51),b.Mb(29,"small",18),b.pc(30),b.Lb(),b.oc(31,$i,2,1,"small",52),b.oc(32,Oi,2,2,"small",52),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb();b.wb(25),b.dc("ngIf",!t.sinResultados),b.wb(1),b.dc("ngForOf",t.usuarios),b.wb(4),b.rc("Total de usuarios: (",t.totalUsers,")"),b.wb(1),b.dc("ngIf",0!==t.resultado),b.wb(1),b.dc("ngIf",0!==t.desde)}}function Gi(t,e){1&t&&(b.Mb(0,"p",67),b.pc(1,"- El nombre es obligatorio"),b.Lb())}function Bi(t,e){1&t&&(b.Mb(0,"p",67),b.pc(1,"- El usuario es obligatorio, Debe de tener como minimo 4 letras"),b.Lb())}function Vi(t,e){1&t&&(b.Mb(0,"p",67),b.pc(1,"- La contrase\xf1a es obligatoria, minimo 6 caracteres"),b.Lb())}let Wi=(()=>{class t{constructor(t,e,i){this.userService=t,this.fb=e,this.searchService=i,this.usuarios=[],this.usuariosTemp=[],this.totalUsers=0,this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.formSubmitted=!1,this.newUserForm=this.fb.group({usuario:["",[k.p.required,k.p.minLength(4)]],name:["",[k.p.required,k.p.minLength(3)]],password:["",[k.p.required,k.p.minLength(6)]]})}ngOnInit(){this.cargarUsuarios()}buscar(t){}cargarUsuarios(){this.userService.loadUsers().subscribe(({total:t,users:e})=>{this.totalUsers=t,this.usuarios=e,this.usuariosTemp=e,this.resultado=0,this.cargando=!1},t=>{n.a.fire("Error",t.error.msg,"error")})}crearUsuario(){this.formSubmitted=!0,this.newUserForm.invalid||this.userService.createUser(this.newUserForm.value).subscribe(t=>{console.log(t),this.formSubmitted=!1,this.cargarUsuarios(),this.newUserForm.reset(),n.a.fire("Estupendo","Se ha creado un usuario nuevo","success")},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValido(t){return!(!this.newUserForm.get(t).invalid||!this.formSubmitted)}informacionDepartamento(){}statusUpdate(t){}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(Be.a),b.Hb(k.d),b.Hb(G))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-usuarios"]],decls:53,vars:6,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","ticket1-tab",1,"nav-link","text-dark","active"],[1,"bi-gear",2,"font-size","1rem"],[1,"container-fluid"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],["id","nuevoUsuario","tabindex","-1","aria-labelledby","nuevoUsuarioModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","nuevoUsuarioModal",1,"modal-title"],[1,"bi-person-plus",2,"font-size","1rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","newDepartmentForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"row","mb-3"],[1,"col-md-12","px-md-1"],[1,"form-floating"],["formControlName","name","type","text","placeholder","Nombres",1,"form-control","text-capitalize"],["for","floatingInput"],["formControlName","usuario","type","text","placeholder","Usuario",1,"form-control"],["formControlName","password","type","password","placeholder","Contrase\xf1a",1,"form-control"],[1,"row"],[1,"text-danger","mb-2"],["class","mb-1 animated fadeIn",4,"ngIf"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"form-floating","mb-2"],[1,"position-absolute","top-50","start-90","translate-middle"],[1,"bi-search",2,"font-size","1rem"],["type","text","id","floatingInput2","placeholder","Buscar Departamento",1,"form-control",3,"keyup"],["search",""],["for","floatingInput2 "],[1,"d-flex","justify-content-end"],["type","button","data-bs-toggle","modal","data-bs-target","#nuevoUsuario",1,"btn","btn-sm","btn-primary","btnW","waves-effect","waves-ligth"],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2",1,"text-muted"],["scope","col ",1,"text-muted","w100"],["class","text-center ",4,"ngIf"],["class","trHover",4,"ngFor","ngForOf"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],[1,"text-center"],["colspan","10",1,"py-4"],[1,"trHover"],["scope","row ",4,"ngIf"],["scope","row",4,"ngIf"],["colspan","2"],["type","button","class","btn btnW waves-effect waves-ligth btn-success btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btnW waves-effect waves-ligth btn-danger btn-sm",3,"click",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#actualizarDepartamento",1,"btn","btn-link","p-1","text-primary",3,"click"],[1,"bi","bi-box-arrow-up-right"],["scope","row "],["scope","row"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-success","btn-sm",3,"click"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-danger","btn-sm",3,"click"],[1,"mb-1","animated","fadeIn"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Configuraciones / Usuarios"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Usuarios"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.oc(11,Ai,7,0,"div",8),b.oc(12,Hi,33,5,"div",8),b.Lb(),b.Lb(),b.Mb(13,"div",9),b.Mb(14,"div",10),b.Mb(15,"div",11),b.Mb(16,"div",12),b.Mb(17,"h5",13),b.Ib(18,"i",14),b.pc(19," Crear Usuario Nuevo"),b.Lb(),b.Ib(20,"button",15),b.Lb(),b.Mb(21,"div",16),b.Mb(22,"form",17),b.Tb("ngSubmit",function(){return e.crearUsuario()}),b.Mb(23,"h5",18),b.pc(24,"Informaci\xf3n del usuario"),b.Lb(),b.Mb(25,"div",19),b.Mb(26,"div",20),b.Mb(27,"div",21),b.Ib(28,"input",22),b.Mb(29,"label",23),b.pc(30,"Nombres"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(31,"div",19),b.Mb(32,"div",20),b.Mb(33,"div",21),b.Ib(34,"input",24),b.Mb(35,"label",23),b.pc(36,"Usuario"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(37,"div",19),b.Mb(38,"div",20),b.Mb(39,"div",21),b.Ib(40,"input",25),b.Mb(41,"label",23),b.pc(42,"Contrase\xf1a"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(43,"div",26),b.Mb(44,"div",27),b.oc(45,Gi,2,0,"p",28),b.oc(46,Bi,2,0,"p",28),b.oc(47,Vi,2,0,"p",28),b.Lb(),b.Lb(),b.Mb(48,"button",29),b.pc(49,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(50,"div",30),b.Mb(51,"button",31),b.pc(52,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(11),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando),b.wb(10),b.dc("formGroup",e.newUserForm),b.wb(23),b.dc("ngIf",e.campoValido("name")),b.wb(1),b.dc("ngIf",e.campoValido("usuario")),b.wb(1),b.dc("ngIf",e.campoValido("password")))},directives:[m.m,k.r,k.i,k.f,k.b,k.h,k.e,m.l],styles:[""]}),t})();function Yi(t,e){if(1&t&&(b.Mb(0,"span"),b.pc(1),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.rc(" #",t.factura.invoice," ")}}function Zi(t,e){if(1&t&&(b.Mb(0,"small"),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" ",t.factura.client.phone,"")}}function Ki(t,e){if(1&t&&(b.Mb(0,"small"),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" ",t.factura.client.email," ")}}function _i(t,e){if(1&t&&(b.Mb(0,"span"),b.pc(1),b.Lb()),2&t){const t=b.Xb(3);b.wb(1),b.rc(" ",t.factura.client.city," ")}}function Ji(t,e){if(1&t&&(b.Mb(0,"small"),b.pc(1),b.oc(2,_i,2,1,"span",6),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" ",t.factura.client.address," "),b.wb(1),b.dc("ngIf",t.factura.client.city)}}function Qi(t,e){if(1&t&&(b.Mb(0,"tr"),b.Mb(1,"th"),b.pc(2),b.Lb(),b.Mb(3,"td"),b.Mb(4,"small",35),b.pc(5),b.Lb(),b.Lb(),b.Mb(6,"td",36),b.pc(7),b.Lb(),b.Mb(8,"td"),b.pc(9),b.Lb(),b.Mb(10,"td"),b.pc(11),b.Yb(12,"currency"),b.Lb(),b.Mb(13,"td"),b.pc(14),b.Lb(),b.Mb(15,"td"),b.pc(16),b.Yb(17,"currency"),b.Lb(),b.Lb()),2&t){const t=e.$implicit,i=e.index;b.wb(2),b.rc(" ",i+1," "),b.wb(3),b.qc(t.product.code),b.wb(2),b.qc(t.product.name),b.wb(2),b.qc(t.product.type),b.wb(2),b.qc(b.Zb(12,7,t.price)),b.wb(3),b.qc(t.qty),b.wb(2),b.qc(b.Zb(17,9,t.price*t.qty))}}const ta=function(t){return["/dashboard/ventas/print",t]};function ea(t,e){if(1&t){const t=b.Nb();b.Kb(0),b.Mb(1,"div",8),b.Mb(2,"h5",9),b.pc(3),b.Lb(),b.Mb(4,"p"),b.pc(5),b.Lb(),b.Lb(),b.Mb(6,"div"),b.Mb(7,"button",10),b.Ib(8,"i",11),b.pc(9," Imprimir "),b.Lb(),b.Mb(10,"button",12),b.Tb("click",function(){b.lc(t);const e=b.Xb();return e.devolucion(e.factura.iid)}),b.Ib(11,"i",13),b.pc(12," Devolver Factura "),b.Lb(),b.Lb(),b.Mb(13,"div",14),b.Mb(14,"div",15),b.Mb(15,"div",16),b.Mb(16,"div",15),b.Mb(17,"div",17),b.Mb(18,"h6",18),b.Mb(19,"strong"),b.pc(20,"CLIENTE / RAZON SOCIAL: "),b.Lb(),b.Ib(21,"br"),b.Mb(22,"small"),b.pc(23),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"div",19),b.Mb(25,"h6",18),b.Mb(26,"strong"),b.pc(27,"CC / Nit: "),b.Lb(),b.Ib(28,"br"),b.Mb(29,"small"),b.pc(30),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(31,"div",15),b.Mb(32,"div",17),b.Mb(33,"h6",18),b.Mb(34,"strong"),b.pc(35,"TELEFONO: "),b.Lb(),b.Ib(36,"br"),b.oc(37,Zi,2,1,"small",6),b.Lb(),b.Lb(),b.Mb(38,"div",19),b.Mb(39,"h6",20),b.Mb(40,"strong"),b.pc(41,"CORREO: "),b.Lb(),b.Ib(42,"br"),b.oc(43,Ki,2,1,"small",6),b.Lb(),b.Lb(),b.Lb(),b.Mb(44,"div",15),b.Mb(45,"div",19),b.Mb(46,"h6",20),b.Mb(47,"strong"),b.pc(48,"DIRECCI\xd3N: "),b.Lb(),b.Ib(49,"br"),b.oc(50,Ji,3,2,"small",6),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(51,"div",19),b.Mb(52,"h3",21),b.pc(53),b.Lb(),b.Mb(54,"small",22),b.pc(55),b.Yb(56,"date"),b.Lb(),b.Lb(),b.Lb(),b.Mb(57,"h4",23),b.pc(58," FACTURA "),b.Lb(),b.Mb(59,"div",24),b.Mb(60,"table",25),b.Mb(61,"thead",26),b.Mb(62,"tr"),b.Mb(63,"th",27),b.pc(64,"#"),b.Lb(),b.Mb(65,"th",27),b.pc(66,"Codigo de barras"),b.Lb(),b.Mb(67,"th",28),b.pc(68,"Nombre del Producto"),b.Lb(),b.Mb(69,"th",27),b.pc(70,"tipo"),b.Lb(),b.Mb(71,"th",27),b.pc(72,"Precio"),b.Lb(),b.Mb(73,"th",27),b.pc(74,"Cantidad"),b.Lb(),b.Mb(75,"th",27),b.pc(76,"Monto"),b.Lb(),b.Lb(),b.Lb(),b.Mb(77,"tbody"),b.oc(78,Qi,18,11,"tr",29),b.Lb(),b.Lb(),b.Lb(),b.Mb(79,"div"),b.Mb(80,"div",30),b.Ib(81,"div"),b.Mb(82,"div",31),b.Mb(83,"div",32),b.Mb(84,"h5",33),b.pc(85),b.Yb(86,"currency"),b.Lb(),b.Mb(87,"h5",34),b.pc(88),b.Yb(89,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Jb()}if(2&t){const t=b.Xb();b.wb(3),b.rc("DETALLES DE LA FACTURA #",t.factura.invoice,""),b.wb(2),b.rc("Cajero: ",t.factura.user.name,""),b.wb(2),b.dc("routerLink",b.hc(20,ta,t.factura.iid)),b.wb(16),b.qc(t.factura.client.name),b.wb(7),b.rc(" ",t.factura.client.cedula,""),b.wb(7),b.dc("ngIf",t.factura.client.phone),b.wb(6),b.dc("ngIf",t.factura.client.email),b.wb(7),b.dc("ngIf",t.factura.client.address),b.wb(3),b.rc(" ",t.factura.invoice," "),b.wb(2),b.rc(" ",b.ac(56,13,t.factura.fecha,"medium")," "),b.wb(23),b.dc("ngForOf",t.factura.products),b.wb(7),b.qc(b.Zb(86,16,t.factura.amount)),b.wb(3),b.rc("Sub-total ",b.Zb(89,18,t.factura.amount/1),"")}}let ia=(()=>{class t{constructor(t,e){this.invoiceService=t,this.activatedRoute=e}ngOnInit(){this.activatedRoute.params.subscribe(({id:t})=>{this.cargarFactura(t)})}cargarFactura(t){this.invoiceService.loadInvoiceId(t).subscribe(t=>{this.factura=t},t=>{n.a.fire("Error",t.error.msg,"error")})}devolucion(t){n.a.fire({title:"Atencion",text:"Estas seguro de devolver esta factura",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, devolver",cancelButtonText:"Cancelar"}).then(e=>{e.isConfirmed&&this.invoiceService.returnInvoice(t).subscribe(t=>{console.log(t),n.a.fire("Devoluci\xf3n exitosa!","Esta factura, se ha devuelto exitosamente con todos los productos de la misma!","success")},t=>{n.a.fire("Error",t.error.msg,"error")})})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(ye),b.Hb(a.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-factura"]],decls:12,vars:2,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","facturas-tab",1,"nav-link","text-dark","active"],[1,"bi-journal-check",2,"font-size","1rem"],[4,"ngIf"],[1,"container-fluid"],[1,"mt-4"],[1,"text-dark"],["type","button",1,"btn","btn-outline-primary","btn-sm","mx-1","my-2",3,"routerLink"],[1,"bi-printer"],["type","button",1,"btn","btn-outline-danger","btn-sm","mx-1","my-2",3,"click"],[1,"bi-arrow-counterclockwise"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[1,"row"],[1,"col-md-8","text-left","text-muted"],[1,"col-md-4"],[1,"text-wrap","mb-0","text-capitalize"],[1,"col"],[1,"text-wrap","mb-0"],[1,"display-5","mb-0","d-flex","justify-content-end","text-primary"],[1,"mb-0","d-flex","justify-content-end"],[1,"text-center"],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ",1,"text-muted"],["scope","col ","colspan","2 ",1,"text-muted","text-left"],[4,"ngFor","ngForOf"],[1,"d-flex","py-2"],[1,"ms-auto","d-flex","justify-content-end"],[1,"border-start","col","px-4"],[1,"display-6","fw-bold","text-primary"],[1,"h6","fw-bold","text-primary"],[1,"text-wrap"],["colspan","2"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Facturas"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Factura "),b.oc(9,Yi,2,1,"span",6),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(10,"div",7),b.oc(11,ea,90,22,"ng-container",6),b.Lb()),2&t&&(b.wb(9),b.dc("ngIf",e.factura),b.wb(2),b.dc("ngIf",e.factura))},directives:[m.m,a.c,m.l],pipes:[m.e,m.c],encapsulation:2}),t})();function aa(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",43),b.Mb(2,"div",44),b.Mb(3,"span",45),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",18),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function ba(t,e){1&t&&(b.Mb(0,"tr",64),b.Mb(1,"th",65),b.Mb(2,"h4",18),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}function oa(t,e){1&t&&(b.Mb(0,"span",74),b.pc(1,"Disponible"),b.Lb())}function ra(t,e){1&t&&(b.Mb(0,"span",75),b.pc(1,"Ocupada"),b.Lb())}function na(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",76),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.mid)}),b.pc(1,"Activa"),b.Lb()}}function ca(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",77),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb(2).statusUpdate(e.mid)}),b.pc(1,"Desactivada"),b.Lb()}}function sa(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",66),b.Mb(1,"td",67),b.pc(2),b.Lb(),b.Mb(3,"td"),b.oc(4,oa,2,0,"span",68),b.oc(5,ra,2,0,"span",69),b.Lb(),b.Mb(6,"td"),b.oc(7,na,2,0,"button",70),b.oc(8,ca,2,0,"button",71),b.Lb(),b.Mb(9,"td",64),b.Mb(10,"button",72),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).informacionMesa(i)}),b.Ib(11,"i",73),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit;b.wb(2),b.qc(t.name),b.wb(2),b.dc("ngIf",t.disponible),b.wb(1),b.dc("ngIf",!t.disponible),b.wb(2),b.dc("ngIf",t.status),b.wb(1),b.dc("ngIf",!t.status)}}function da(t,e){if(1&t&&(b.Mb(0,"small",18),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function la(t,e){if(1&t&&(b.Mb(0,"small",18),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.listaMesas.length,")")}}function ua(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div"),b.Mb(2,"div",46),b.Mb(3,"span",47),b.Ib(4,"i",48),b.Lb(),b.Mb(5,"input",49,50),b.Tb("keyup",function(){b.lc(t);const e=b.kc(6);return b.Xb().buscar(e.value)}),b.Lb(),b.Mb(7,"label",51),b.pc(8,"Buscar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",52),b.Mb(10,"button",53),b.pc(11,"Crear"),b.Lb(),b.Lb(),b.Mb(12,"div",54),b.Mb(13,"table",55),b.Mb(14,"thead",56),b.Mb(15,"tr"),b.Mb(16,"th",57),b.pc(17,"Mesa"),b.Lb(),b.Mb(18,"th",58),b.pc(19,"Disponibilidad"),b.Lb(),b.Mb(20,"th",58),b.pc(21,"Activa"),b.Lb(),b.Mb(22,"th",59),b.pc(23,"Acciones"),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"tbody"),b.oc(25,ba,4,0,"tr",60),b.oc(26,sa,12,5,"tr",61),b.Lb(),b.Lb(),b.Lb(),b.Mb(27,"div",33),b.Mb(28,"div",62),b.Mb(29,"small",18),b.pc(30),b.Lb(),b.oc(31,da,2,1,"small",63),b.oc(32,la,2,2,"small",63),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb();b.wb(25),b.dc("ngIf",!t.sinResultados),b.wb(1),b.dc("ngForOf",t.listaMesas),b.wb(4),b.rc("Total de cajas: (",t.totalMesas,")"),b.wb(1),b.dc("ngIf",0!==t.resultado),b.wb(1),b.dc("ngIf",0!==t.desde)}}function pa(t,e){if(1&t&&(b.Mb(0,"option",78),b.pc(1),b.Lb()),2&t){const t=e.$implicit;b.dc("value",t.uid),b.wb(1),b.rc(" ",t.name," ")}}function ma(t,e){1&t&&(b.Mb(0,"p",79),b.pc(1,"- El numero de mesa es obligatorio"),b.Lb())}function ha(t,e){if(1&t&&(b.Mb(0,"option",78),b.pc(1),b.Lb()),2&t){const t=e.$implicit;b.dc("value",t.uid),b.wb(1),b.rc(" ",t.name," ")}}function fa(t,e){1&t&&(b.Mb(0,"p",79),b.pc(1,"- Asigne un nombre a la mesa"),b.Lb())}let Ma=(()=>{class t{constructor(t,e,i,a){this.mesasService=t,this.searchService=e,this.fb=i,this.userService=a,this.listaMesas=[],this.listaMesasTemp=[],this.totalMesas=0,this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.btnAtras="",this.btnAdelante="",this.formSubmitted=!1,this.newMesaForm=this.fb.group({name:["",[k.p.required,k.p.minLength(1),k.p.min(1)]],mesero:[""],img:["ticket.svg"]}),this.formSubmittedUp=!1,this.upMesaForm=this.fb.group({name:["",[k.p.required,k.p.minLength(1),k.p.min(1)]],mesero:["",[k.p.required,k.p.minLength(1),k.p.min(1)]],id:["",[k.p.required,k.p.minLength(3)]],img:[""]}),this.meseros=[]}ngOnInit(){this.cargarMeseros(),this.cargarMesas()}buscar(t){if(this.sinResultados=!0,0===t.length)return this.listaMesas=this.listaMesasTemp,void(this.resultado=0);this.sinResultados=!0,this.searchService.search("mesa",t).subscribe(({total:t,resultados:e})=>{if(0===e.length)return this.sinResultados=!1,this.listaMesas=[],void(this.resultado=0);this.totalMesas=t,this.listaMesas=e,this.resultado=e.length})}cargarMesas(){this.cargando=!0,this.sinResultados=!0,this.mesasService.loadMesas(this.desde).subscribe(({total:t,mesas:e})=>{if(0===e.length)return this.sinResultados=!1,this.cargando=!1,this.listaMesas=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalMesas=t,this.listaMesas=e,this.listaMesasTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalMesas>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalMesas<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.listaMesas.length||this.desde+10>=this.totalMesas?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}crearMesa(){this.formSubmitted=!0,this.newMesaForm.invalid||this.mesasService.createMesa(this.newMesaForm.value).subscribe(t=>{this.formSubmitted=!1,this.cargarMesas(),this.newMesaForm.reset(),n.a.fire("Estupendo","Se ha creado la mesa exitosamente","success")},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValido(t){return!(!this.newMesaForm.get(t).invalid||!this.formSubmitted)}informacionMesa(t){this.upMesaForm.setValue({name:t.name,mesero:t.mesero._id,id:t.mid,img:t.img||"ticket.svg"})}actualizarMesa(){this.formSubmittedUp=!0,this.upMesaForm.invalid||this.mesasService.updateMesa(this.upMesaForm.value,this.upMesaForm.value.id).subscribe(t=>{console.log(t),this.formSubmittedUp=!1,this.cargarMesas(),this.upMesaForm.reset(),n.a.fire("Estupendo","Se ha actualizado la mesa exitosamente","success")},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValidoUpdate(t){return!(!this.upMesaForm.get(t).invalid||!this.formSubmittedUp)}cargarMeseros(){this.userService.loadUsers().subscribe(({users:t})=>{this.meseros=t},t=>{n.a.fire("Error","No se pueden cargar los meseros","error")})}statusUpdate(){}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(st),b.Hb(G),b.Hb(k.d),b.Hb(Be.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-mesas"]],decls:103,vars:8,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","ticket1-tab",1,"nav-link","text-dark","active"],[1,"bi-gear",2,"font-size","1rem"],[1,"container-fluid","my-4"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],["id","nuevaMesa","tabindex","-1","aria-labelledby","nuevaMesaModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","nuevaMesaModal",1,"modal-title"],[1,"bi-collection",2,"font-size","1rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["id","newMesaForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"row","mb-2"],[1,"col-md-12","px-md-1"],["for",""],["aria-label","Default select example","formControlName","img",1,"form-select"],["value","ticket.svg"],["value","mesa.svg"],["value","barra.svg"],[1,"form-floating"],["formControlName","name","min","0","type","text","placeholder","Numero de mesa",1,"form-control","text-capitalize"],["for","floatingInput"],[1,"row","mb-3"],[1,"form-group"],["formControlName","mesero","name","",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],[1,"row"],[1,"text-danger","mb-2"],["class","mb-1 animated fadeIn",4,"ngIf"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","actualizarMesa","tabindex","-1","aria-labelledby","actualizarMesaModal","aria-hidden","true",1,"modal","fade"],["id","actualizarMesaModal",1,"modal-title"],["id","upMesaForm","autocomplete","off",3,"formGroup","ngSubmit"],["formControlName","mesero","name","","id","",1,"form-control"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"form-floating","mb-2"],[1,"position-absolute","top-50","start-90","translate-middle"],[1,"bi-search",2,"font-size","1rem"],["type","text","id","floatingInput2","placeholder","Buscar",1,"form-control",3,"keyup"],["search",""],["for","floatingInput2 "],[1,"d-flex","justify-content-end"],["type","button","data-bs-toggle","modal","data-bs-target","#nuevaMesa",1,"btn","btn-sm","btn-primary","btnW","waves-effect","waves-ligth"],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ","colspan","2",1,"text-muted"],["scope","col ",1,"text-muted"],["scope","col ",1,"text-muted","w100"],["class","text-center ",4,"ngIf"],["class","trHover",4,"ngFor","ngForOf"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],[1,"text-center"],["colspan","10",1,"py-4"],[1,"trHover"],["colspan","2"],["class","badge rounded-pill bg-success text-white-75",4,"ngIf"],["class","badge rounded-pill bg-danger text-white-75",4,"ngIf"],["type","button","class","btn btnW waves-effect waves-ligth btn-success btn-sm",3,"click",4,"ngIf"],["type","button","class","btn btnW waves-effect waves-ligth btn-danger btn-sm",3,"click",4,"ngIf"],["type","button","data-bs-toggle","modal","data-bs-target","#actualizarMesa",1,"btn","btn-link","p-1","text-primary",3,"click"],[1,"bi","bi-box-arrow-up-right"],[1,"badge","rounded-pill","bg-success","text-white-75"],[1,"badge","rounded-pill","bg-danger","text-white-75"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-success","btn-sm",3,"click"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","btn-danger","btn-sm",3,"click"],[3,"value"],[1,"mb-1","animated","fadeIn"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Configuraciones / Tickets - Mesas - Barras"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Tablero Principal"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.oc(11,aa,7,0,"div",8),b.oc(12,ua,33,5,"div",8),b.Lb(),b.Lb(),b.Mb(13,"div",9),b.Mb(14,"div",10),b.Mb(15,"div",11),b.Mb(16,"div",12),b.Mb(17,"h5",13),b.Ib(18,"i",14),b.pc(19," Crear Ticket - Mesa - Barra"),b.Lb(),b.Ib(20,"button",15),b.Lb(),b.Mb(21,"div",16),b.Mb(22,"form",17),b.Tb("ngSubmit",function(){return e.crearMesa()}),b.Mb(23,"h5",18),b.pc(24,"Informaci\xf2n"),b.Lb(),b.Mb(25,"div",19),b.Mb(26,"div",20),b.Mb(27,"label",21),b.pc(28,"Tipo"),b.Lb(),b.Mb(29,"select",22),b.Mb(30,"option",23),b.pc(31," Ticket"),b.Lb(),b.Mb(32,"option",24),b.pc(33," Mesa"),b.Lb(),b.Mb(34,"option",25),b.pc(35," Barra"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(36,"div",19),b.Mb(37,"div",20),b.Mb(38,"label",21),b.pc(39,"Nombre"),b.Lb(),b.Mb(40,"div",26),b.Ib(41,"input",27),b.Mb(42,"label",28),b.pc(43,"Nombre"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(44,"div",29),b.Mb(45,"div",20),b.Mb(46,"div",30),b.Mb(47,"label",21),b.pc(48,"Usuario"),b.Lb(),b.Mb(49,"select",31),b.oc(50,pa,2,2,"option",32),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(51,"div",33),b.Mb(52,"div",34),b.oc(53,ma,2,0,"p",35),b.Lb(),b.Lb(),b.Mb(54,"button",36),b.pc(55,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(56,"div",37),b.Mb(57,"button",38),b.pc(58,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(59,"div",39),b.Mb(60,"div",10),b.Mb(61,"div",11),b.Mb(62,"div",12),b.Mb(63,"h5",40),b.Ib(64,"i",14),b.pc(65," Crear Mesa Nueva"),b.Lb(),b.Ib(66,"button",15),b.Lb(),b.Mb(67,"div",16),b.Mb(68,"form",41),b.Tb("ngSubmit",function(){return e.actualizarMesa()}),b.Mb(69,"h5",18),b.pc(70,"Informaci\xf3n de la mesa"),b.Lb(),b.Mb(71,"div",19),b.Mb(72,"div",20),b.Mb(73,"label",21),b.pc(74,"Tipo"),b.Lb(),b.Mb(75,"select",22),b.Mb(76,"option",23),b.pc(77," Ticket"),b.Lb(),b.Mb(78,"option",24),b.pc(79," Mesa"),b.Lb(),b.Mb(80,"option",25),b.pc(81," Barra"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(82,"div",19),b.Mb(83,"div",20),b.Mb(84,"div",26),b.Ib(85,"input",27),b.Mb(86,"label",28),b.pc(87,"Numero de mesa"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(88,"div",29),b.Mb(89,"div",20),b.Mb(90,"div",30),b.Mb(91,"label",21),b.pc(92,"Seleccionar Mesero"),b.Lb(),b.Mb(93,"select",42),b.oc(94,ha,2,2,"option",32),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(95,"div",33),b.Mb(96,"div",34),b.oc(97,fa,2,0,"p",35),b.Lb(),b.Lb(),b.Mb(98,"button",36),b.pc(99,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Mb(100,"div",37),b.Mb(101,"button",38),b.pc(102,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(11),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando),b.wb(10),b.dc("formGroup",e.newMesaForm),b.wb(28),b.dc("ngForOf",e.meseros),b.wb(3),b.dc("ngIf",e.campoValido("name")),b.wb(15),b.dc("formGroup",e.upMesaForm),b.wb(26),b.dc("ngForOf",e.meseros),b.wb(3),b.dc("ngIf",e.campoValidoUpdate("name")))},directives:[m.m,k.r,k.i,k.f,k.o,k.h,k.e,k.k,k.q,k.b,m.l],encapsulation:2}),t})();const va=["searchCode"],La=["searchClient"],ga=["searchProduct"],wa=["comprobarPrecio"],Ia=["descripcionAdd"],ya=["montoAdd"],xa=["fechCredito"],ka=["montoE"],Ca=["descriptionE"];function Ta(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",4),b.Mb(1,"button",173),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb().cargarProductosDepartamento(e.did)}),b.Ib(2,"img",174),b.Yb(3,"imagen"),b.Mb(4,"h6"),b.pc(5),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb().$implicit;b.wb(2),b.dc("src",b.ac(3,2,t.img,"department"),b.mc),b.wb(3),b.qc(t.name)}}function Sa(t,e){if(1&t&&(b.Kb(0),b.oc(1,Ta,6,5,"div",172),b.Jb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngIf",t.visibility)}}function Pa(t,e){1&t&&(b.Mb(0,"div",155),b.Mb(1,"h4",62),b.pc(2,"Sin Resultados"),b.Lb(),b.Lb())}function Fa(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",176),b.Ib(1,"img",177),b.Yb(2,"imagen"),b.Mb(3,"div",178),b.Mb(4,"div"),b.Mb(5,"h5",179),b.pc(6),b.Lb(),b.Lb(),b.Mb(7,"div",180),b.Mb(8,"div",181),b.Mb(9,"p",182),b.pc(10),b.Yb(11,"currency"),b.Lb(),b.Mb(12,"button",183),b.Tb("click",function(){b.lc(t);const e=b.Xb().$implicit;return b.Xb().carritoTemp(e,1,e.price)}),b.Ib(13,"i",184),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb().$implicit;b.wb(1),b.dc("src",b.ac(2,3,t.img,"products"),b.mc),b.wb(5),b.qc(t.name),b.wb(4),b.qc(b.Zb(11,6,t.price))}}function Na(t,e){if(1&t&&(b.Kb(0),b.oc(1,Fa,14,8,"div",175),b.Jb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngIf",t.visibility)}}function ja(t,e){1&t&&(b.Mb(0,"div",188),b.Mb(1,"div",189),b.Mb(2,"span",190),b.pc(3,"Loading..."),b.Lb(),b.Lb(),b.Mb(4,"div"),b.Mb(5,"small",62),b.pc(6,"Cargando..."),b.Lb(),b.Lb(),b.Lb())}function Da(t,e){if(1&t){const t=b.Nb();b.Mb(0,"li",192),b.Mb(1,"div",194),b.Mb(2,"div",195),b.Mb(3,"span",196),b.pc(4),b.Lb(),b.Ib(5,"br"),b.Mb(6,"small"),b.pc(7),b.Lb(),b.Lb(),b.Mb(8,"div",197),b.Mb(9,"button",198),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(3).seleccionarCliente(i)}),b.Ib(10,"i",199),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit;b.wb(4),b.rc(" ",t.name," "),b.wb(3),b.rc(" C.C: ",t.cedula," ")}}function Aa(t,e){if(1&t&&(b.Mb(0,"ul",191),b.Mb(1,"li",192),b.Mb(2,"h6"),b.pc(3),b.Lb(),b.Lb(),b.oc(4,Da,11,2,"li",193),b.Lb()),2&t){const t=b.Xb(2);b.wb(3),b.rc("Resultados: (",t.listaClientes.length,")"),b.wb(1),b.dc("ngForOf",t.listaClientes)}}function Ea(t,e){if(1&t&&(b.Mb(0,"div",185),b.oc(1,ja,7,0,"div",186),b.oc(2,Aa,5,2,"ul",187),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.dc("ngIf",t.cargandoCliente),b.wb(1),b.dc("ngIf",!t.cargandoCliente)}}function Xa(t,e){if(1&t&&(b.Mb(0,"small"),b.pc(1),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.qc(t.clienteTemp.name)}}function qa(t,e){if(1&t&&(b.Mb(0,"small"),b.pc(1),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.rc(" ",t.clienteTemp.cedula,"")}}function Ra(t,e){if(1&t&&(b.Mb(0,"small"),b.pc(1),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.rc(" ",t.clienteTemp.phone,"")}}function Ua(t,e){if(1&t&&(b.Mb(0,"small"),b.pc(1),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.rc(" ",t.clienteTemp.email," ")}}function za(t,e){1&t&&(b.Mb(0,"tr",200),b.Mb(1,"th",201),b.Mb(2,"h4",62),b.pc(3,"No has seleccionado ningun producto"),b.Lb(),b.Lb(),b.Lb())}function $a(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",203),b.Mb(1,"td",204),b.pc(2),b.Lb(),b.Mb(3,"td"),b.pc(4),b.Yb(5,"currency"),b.Lb(),b.Mb(6,"td",200),b.pc(7),b.Lb(),b.Mb(8,"td"),b.pc(9),b.Yb(10,"currency"),b.Lb(),b.Mb(11,"td"),b.Mb(12,"button",205),b.Tb("click",function(){b.lc(t);const e=b.Xb().index;return b.Xb(2).eliminarProductoCarrito(e)}),b.Ib(13,"i",206),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.Xb().$implicit;b.wb(2),b.qc(t.product.name),b.wb(2),b.qc(b.Zb(5,4,t.price)),b.wb(3),b.qc(t.qty),b.wb(2),b.qc(b.Zb(10,6,t.price*t.qty))}}function Oa(t,e){if(1&t&&(b.Kb(0),b.oc(1,$a,14,8,"tr",202),b.Jb()),2&t){const t=e.$implicit;b.wb(1),b.dc("ngIf",t.product)}}function Ha(t,e){if(1&t&&(b.Kb(0),b.oc(1,Oa,2,1,"ng-container",7),b.Jb()),2&t){const t=b.Xb();b.wb(1),b.dc("ngForOf",t.carrito)}}function Ga(t,e){1&t&&(b.Mb(0,"button",207),b.Mb(1,"h4",208),b.pc(2,"Facturar"),b.Lb(),b.Lb())}function Ba(t,e){if(1&t){const t=b.Nb();b.Mb(0,"button",209),b.Tb("click",function(){return b.lc(t),b.Xb().focusMonto()}),b.Mb(1,"h4",210),b.pc(2,"Facturar"),b.Lb(),b.Lb()}}function Va(t,e){1&t&&(b.Mb(0,"p",211),b.pc(1,"* El nombre es obligatorio"),b.Lb())}function Wa(t,e){1&t&&(b.Mb(0,"p",211),b.pc(1,"* La cedula de ciudadania es obligatoria"),b.Lb())}function Ya(t,e){if(1&t){const t=b.Nb();b.Mb(0,"li",216),b.Mb(1,"div",194),b.Mb(2,"div",195),b.Mb(3,"span"),b.pc(4),b.Lb(),b.Lb(),b.Mb(5,"div",197),b.Mb(6,"button",198),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).seleccionarProducto(i)}),b.Ib(7,"i",199),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit;b.wb(4),b.rc(" ",t.name," ")}}function Za(t,e){if(1&t&&(b.Mb(0,"div",212),b.Mb(1,"ul",213),b.Mb(2,"li",214),b.Mb(3,"h6"),b.pc(4),b.Lb(),b.Lb(),b.oc(5,Ya,8,1,"li",215),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(4),b.rc("Resultados: (",t.listaProductos.length,")"),b.wb(1),b.dc("ngForOf",t.listaProductos)}}function Ka(t,e){if(1&t&&(b.Mb(0,"div",89),b.Mb(1,"label",217),b.pc(2,"Precio:"),b.Lb(),b.Ib(3,"input",218,219),b.Lb()),2&t){const t=b.Xb();b.wb(3),b.dc("value",t.productTemp.price)}}function _a(t,e){if(1&t&&(b.Mb(0,"div",89),b.Mb(1,"label",78),b.pc(2,"Precio Al Mayor:"),b.Lb(),b.Ib(3,"input",220,221),b.Lb()),2&t){const t=b.Xb();b.wb(3),b.dc("value",t.productTemp.wholesale)}}function Ja(t,e){1&t&&(b.Mb(0,"small",222),b.pc(1,"Resta"),b.Lb())}function Qa(t,e){1&t&&(b.Mb(0,"small",223),b.pc(1,"Vueltos"),b.Lb())}const tb=function(t,e){return{"text-danger":t,"text-success":e}};function eb(t,e){if(1&t&&(b.Mb(0,"h4",224),b.pc(1),b.Yb(2,"currency"),b.Lb()),2&t){const t=b.Xb();b.dc("ngClass",b.ic(4,tb,t.totalPagos<t.total,t.totalPagos>=t.total)),b.wb(1),b.rc(" ",b.Zb(2,2,t.vueltos)," ")}}function ib(t,e){if(1&t&&(b.Mb(0,"span"),b.pc(1),b.Lb()),2&t){const t=b.Xb().$implicit;b.wb(1),b.rc("- ",t.description,"")}}function ab(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",203),b.Mb(1,"th"),b.pc(2),b.Lb(),b.Mb(3,"td"),b.Mb(4,"p",117),b.pc(5),b.oc(6,ib,2,1,"span",33),b.Lb(),b.Lb(),b.Mb(7,"td"),b.pc(8),b.Yb(9,"currency"),b.Lb(),b.Mb(10,"td"),b.Mb(11,"button",225),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb().eliminarPagos(i)}),b.Ib(12,"i",226),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit,i=e.index;b.wb(2),b.qc(i+1),b.wb(3),b.rc("",t.type," "),b.wb(1),b.dc("ngIf",t.description),b.wb(2),b.rc(" ",b.Zb(9,4,t.amount)," ")}}function bb(t,e){1&t&&(b.Mb(0,"option",227),b.pc(1,"Efectivo"),b.Lb())}function ob(t,e){1&t&&(b.Mb(0,"option",228),b.pc(1,"Tarjeta"),b.Lb())}function rb(t,e){1&t&&(b.Mb(0,"option",229),b.pc(1,"Vale"),b.Lb())}function nb(t,e){1&t&&(b.Mb(0,"option",230),b.pc(1,"Credito"),b.Lb())}function cb(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",135),b.Mb(1,"label",231),b.pc(2,"Descripci\xf3n"),b.Lb(),b.Mb(3,"input",232,233),b.Tb("keyup",function(){return b.lc(t),b.kc(4).value}),b.Lb(),b.Lb()}}function sb(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",135),b.Mb(1,"label",234),b.pc(2,"Monto"),b.Lb(),b.Mb(3,"input",235,236),b.Tb("keyup",function(){return b.lc(t),b.kc(4).value}),b.Lb(),b.Lb()}if(2&t){const t=b.Xb();b.wb(3),b.dc("value",t.total)}}function db(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",135),b.Mb(1,"button",237),b.Tb("click",function(){b.lc(t);const e=b.Xb(),i=b.kc(247);return e.agregarPagos(i.value,e.montoAdd.value,e.descripcionAdd.value)}),b.pc(2,"Agregar"),b.Lb(),b.Lb()}}function lb(t,e){1&t&&(b.Mb(0,"div",135),b.Mb(1,"label",238),b.pc(2,"Fecha limite"),b.Lb(),b.Ib(3,"input",239,240),b.Lb())}function ub(t,e){if(1&t&&(b.Mb(0,"div",82),b.Mb(1,"h6",241),b.pc(2),b.Lb(),b.Mb(3,"h4",242),b.pc(4),b.Yb(5,"currency"),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(2),b.rc(" ",t.productoCom.name," "),b.wb(2),b.rc(" ",b.Zb(5,2,t.productoCom.price)," ")}}let pb=(()=>{class t{constructor(t,e,i,a,b,o,r,n,c,s){this.productService=t,this.clientService=e,this.searchService=i,this.fb=a,this.invoiceService=b,this.turnoService=o,this.departmentService=r,this.activatedRoute=n,this.mesasServices=c,this.router=s,this.carrito=[],this.productUp=[],this.total=0,this.listaClientes=[],this.listaClientesTemp=[],this.totalClientes=0,this.clienteTemp={name:"",cedula:"",phone:"",email:"",address:"",city:""},this.sinResultadosClientes=!1,this.cargandoCliente=!0,this.newClientForm=this.fb.group({name:["",[k.p.required,k.p.minLength(3)]],cedula:["",[k.p.required,k.p.minLength(6)]],email:["",[k.p.email,k.p.minLength(7)]],phone:["",[k.p.minLength(3)]]}),this.formSubmitted=!1,this.listaProductos=[],this.listaProductosTemp=[],this.totalProductos=0,this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.btnAtras="",this.btnAdelante="",this.productTemp={code:"",name:"",type:"",cost:0,gain:0,price:0,wholesale:0,getImage:""},this.payments=[],this.credit=!1,this.invoiceForm=this.fb.group({amount:["",[k.p.required,k.p.min(this.total)]],client:["",[k.p.required]],type:["efectivo",[k.p.required]],payments:[""],mesero:[""],mesa:[""],products:[""],credito:[this.credit],fechaCredito:[""]}),this.vueltos=0,this.totalPagos=0,this.movimientos=[],this.departmentos=[],this.departmentosTemp=[],this.totalDepartamentos=0}ngOnInit(){if(null===localStorage.getItem("turno"))return n.a.fire("Atenci\xf3n!","Debes de abrir una caja antes de poder facturar","info"),void this.router.navigateByUrl("/");this.cargarTurno(),this.cargarProductos(),this.cargarDepartamentos(),this.activatedRoute.params.subscribe(({id:t})=>{this.mesaID=t,this.cargarMesa(t)})}cargarMesa(t){this.productUp=[],this.carrito=[],this.mesasServices.loadMesaId(t).subscribe(t=>{this.mesaID=t.mid,this.carrito=t.carrito,this.mesa=t,this.meserID=t.mesero._id;for(let e=0;e<t.carrito.length;e++)this.productUp.push({product:t.carrito[e].product._id,qty:t.carrito[e].qty,price:t.carrito[e].price});this.sumarTotales()})}buscarCodigo(t){this.productService.cargarProductoCodigo(t).subscribe(t=>{if(null===t||!1===t.status)return n.a.fire("Error","No existe el producto, verifica el codigo de barras o si el producto a sido desactivado!","error"),this.searchCode.nativeElement.value="",void(this.searchCode.nativeElement.onFocus=!0);"Granel"===t.type?n.a.fire({title:"Cantidad",input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,confirmButtonText:"Confirmar",showLoaderOnConfirm:!0,preConfirm:t=>t}).then(e=>{e.value>0&&this.carritoTemp(t,e.value,t.price)}):this.carritoTemp(t,1,t.price),this.searchCode.nativeElement.value="",this.searchCode.nativeElement.onFocus=!0},t=>{n.a.fire("Error",t.error.msg,"error")})}carritoTemp(t,e,i){const a=this.productUp.findIndex(e=>e.product===t.pid);if(-1===a)this.productUp.push({product:t.pid,qty:e,price:i});else{let t=this.productUp[a].qty;t+=e,this.productUp[a].qty=t}this.mesa.carrito=this.productUp,this.mesasServices.updateMesa(this.mesa,this.mesaID).subscribe(t=>{},t=>{n.a.fire("Error",t.error.msg,"error")}),this.cargarMesa(this.mesaID)}eliminarProductoCarrito(t){n.a.fire({title:"Estas Seguro?",text:"De eliminar este producto del carrito!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar!"}).then(e=>{e.isConfirmed&&(this.productUp.splice(t,1),this.mesa.carrito=this.productUp,this.mesasServices.updateMesa(this.mesa,this.mesaID).subscribe(t=>{},t=>{n.a.fire("Error",t.error.msg,"error")}),this.cargarMesa(this.mesaID),n.a.fire("Eliminado!","El producto se a eliminado con exito.","success"))})}sumarTotales(){if(this.total=0,this.carrito.length>0)for(let t=0;t<this.carrito.length;t++)this.total+=this.carrito[t].price*this.carrito[t].qty}buscarCliente(t){if(this.cargandoCliente=!1,this.sinResultadosClientes=!1,0===t.length)return this.listaClientes=this.listaClientesTemp,this.sinResultadosClientes=!0,void(this.cargandoCliente=!0);this.searchService.search("clients",t).subscribe(({total:t,resultados:e})=>{if(this.cargandoCliente=!1,0===e.length)return this.listaClientes=[],this.totalClientes=0,void(this.sinResultadosClientes=!0);this.listaClientes=e,this.totalClientes=t})}seleccionarCliente(t){this.clienteTemp=t,this.searchClient.nativeElement.value="",this.listaClientes=[],this.totalClientes=0,this.cargandoCliente=!0,this.sinResultadosClientes=!1}crearCliente(){this.formSubmitted=!0,this.newClientForm.invalid||this.clientService.createClient(this.newClientForm.value).subscribe(t=>{n.a.fire("Estupendo","Se ha creado el cliente exitosamente!","success"),this.formSubmitted=!1,this.newClientForm.reset()},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValido(t){return!(!this.newClientForm.get(t).invalid||!this.formSubmitted)}cargarProductosDepartamento(t){this.cargando=!0,this.sinResultados=!0,this.productService.cargarProductoDepartamento(t).subscribe(({total:t,products:e})=>{if(0===e.length)return this.sinResultados=!1,this.cargando=!1,this.listaProductos=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalProductos=t,this.listaProductos=e,this.listaProductosTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalProductos>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalProductos<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.listaProductos.length||this.desde+10>=this.totalProductos?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}cargarProductos(){this.cargando=!0,this.sinResultados=!0,this.productService.cargarProductos(this.desde).subscribe(({total:t,products:e})=>{if(0===e.length)return this.sinResultados=!1,this.cargando=!1,this.listaProductos=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalProductos=t,this.listaProductos=e,this.listaProductosTemp=e,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalProductos>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalProductos<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.listaProductos.length||this.desde+10>=this.totalProductos?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}buscarProducto(t){0!==t.length?this.searchService.search("products",t).subscribe(({total:t,resultados:e})=>{if(0===e.length)return this.listaProductos=[],void(this.totalProductos=0);this.listaProductos=e,this.totalProductos=t}):this.listaProductos=this.listaProductosTemp}seleccionarProducto(t){this.searchProduct.nativeElement.value="",this.listaProductos=[],this.totalProductos=0,this.productTemp=t}evniarAlCarrito(t,e,i){if(""===i||0===this.productTemp.price)return void n.a.fire("Atenci\xf3n","No has seleccionado ningun producto","info");if(0===Number(t)||t<0)return void n.a.fire("Atenci\xf3n","No has seleccionado una cantidad validad","info");let a;a=e?this.productTemp.wholesale:this.productTemp.price,this.carritoTemp(this.productTemp,t,a),this.productTemp={code:"",name:"",type:"",cost:0,gain:0,price:0,wholesale:0,getImage:""},this.searchProduct.nativeElement.onFocus=!0}comprobrarPrecio(t){this.productService.cargarProductoCodigo(t).subscribe(t=>{this.productoCom=t,this.comprobarPrecio.nativeElement.value="",this.comprobarPrecio.nativeElement.focus()},t=>{n.a.fire("Error",t.error.msg,"error")})}focusMonto(){this.montoAdd.nativeElement.focus()}agregarPagos(t,e,i=""){if("credito"===t)return this.credit=!0,this.descripcionAdd.nativeElement.value="",void(this.montoAdd.nativeElement.value="");if(0===e||e<1)return void n.a.fire("Atenci\xf3n","No has agregado un monto","info");let a=Number(this.total-this.totalPagos);Number(this.montoAdd.nativeElement.value)>a?(e=this.total-this.totalPagos,this.vueltos=this.montoAdd.nativeElement.value-a):(e=this.montoAdd.nativeElement.value,this.vueltos=this.montoAdd.nativeElement.value-a),this.payments.push({type:t,amount:e,description:i}),this.descripcionAdd.nativeElement.value="",this.montoAdd.nativeElement.value="",this.sumarPagos()}eliminarPagos(t){const e=this.payments.indexOf(t);-1!==e&&this.payments.splice(e,1),this.sumarPagos(),this.vueltos=this.total-this.totalPagos}limpiarPagos(t=""){this.credit="credito"===t,this.payments=[],this.vueltos=0}sumarPagos(){if(this.totalPagos=0,this.payments.length>0)for(let t=0;t<this.payments.length;t++)this.totalPagos+=Number(this.payments[t].amount)}crearFactura(){if(this.totalPagos<this.total&&!this.credit)n.a.fire("Importante","El monto del pago es diferente al del total, porfavor verificar","warning");else if(""===this.invoiceForm.value.fechaCredito&&this.credit)n.a.fire("Importante","Debe de asignar una fecha de caducida a la factura a credito","warning");else try{this.invoiceForm.setValue({amount:this.total,client:this.clienteTemp.cid,type:this.invoiceForm.value.type,payments:this.payments,products:this.carrito,credito:this.credit,mesa:this.mesaID,mesero:this.meserID,fechaCredito:this.invoiceForm.value.fechaCredito}),console.log(this.invoiceForm.value.mesero),this.invoiceService.createInvoice(this.invoiceForm.value,this.turno.tid).subscribe(t=>{console.log(t.invoice),this.invoiceForm.reset({type:"efectivo"}),this.total=0,this.totalPagos=0,this.carrito=[],this.payments=[],this.clienteTemp={name:"",cedula:"",phone:"",email:"",address:"",city:"",cid:""},this.credit=!1,this.mesa.carrito=[],this.mesasServices.updateMesa(this.mesa,this.mesaID).subscribe(t=>{},t=>{n.a.fire("Error",t.error.msg,"error")}),this.cargarMesa(this.mesaID),this.turno.sales.push({facturas:t.invoice.iid}),this.turnoService.updateTurno(this.turno,this.turno.tid).subscribe(t=>{},t=>{n.a.fire("Error",t.error.msg,"error")}),n.a.fire("Success",`Se ha creado la factura <strong> #${t.invoice.invoice}</strong>, exitosamente`,"success"),window.open("./dashboard/ventas/print/"+t.invoice.iid,"_blank")},t=>{n.a.fire("Error",t.error.msg,"error")})}catch(t){n.a.fire("Error","Aun faltan campos importantes, porfavor verificar","error")}}cargarTurno(){this.turnoService.getTurnoId(localStorage.getItem("turno")).subscribe(t=>{this.turno=t,this.movimientos=t.movements})}entradaSalida(t,e,i){""!==e&&0!==i?("salida"===t&&(i*=-1),this.movimientos.push({type:t,descripcion:e,monto:i}),this.turno.movements=this.movimientos,this.turnoService.updateTurno(this.turno,this.turno.tid).subscribe(t=>{this.montoE.nativeElement.value="",this.descriptionE.nativeElement.value=""},t=>{n.a.fire("Error",t.error.msg,"error")})):n.a.fire("Error","Todos los campos son obligatorios","error")}cargarDepartamentos(){this.cargando=!0,this.sinResultados=!0,this.departmentService.loadDepartment().subscribe(({total:t,departments:e})=>{this.totalDepartamentos=t,this.departmentos=e,this.departmentosTemp=e,this.resultado=0,this.cargando=!1},t=>{n.a.fire("Error",t.error.msg,"error")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(Mt),b.Hb(O),b.Hb(G),b.Hb(k.d),b.Hb(ye),b.Hb(p.a),b.Hb(Lt),b.Hb(a.a),b.Hb(st),b.Hb(a.b))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-mesa"]],viewQuery:function(t,e){if(1&t&&(b.tc(va,!0),b.tc(La,!0),b.tc(ga,!0),b.tc(wa,!0),b.tc(Ia,!0),b.tc(ya,!0),b.tc(xa,!0),b.tc(ka,!0),b.tc(Ca,!0)),2&t){let t;b.jc(t=b.Ub())&&(e.searchCode=t.first),b.jc(t=b.Ub())&&(e.searchClient=t.first),b.jc(t=b.Ub())&&(e.searchProduct=t.first),b.jc(t=b.Ub())&&(e.comprobarPrecio=t.first),b.jc(t=b.Ub())&&(e.descripcionAdd=t.first),b.jc(t=b.Ub())&&(e.montoAdd=t.first),b.jc(t=b.Ub())&&(e.fechCredito=t.first),b.jc(t=b.Ub())&&(e.montoE=t.first),b.jc(t=b.Ub())&&(e.descriptionE=t.first)}},decls:323,vars:46,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-8","align-self-start"],[1,"p-2","border-bottom","my-2","d-flex","justify-content-start","overflow-auto","container-scroll"],[1,"p-2"],["type","button",1,"btn","bg-white","btnW","waves-effect","waves-blue","text-muted",3,"click"],[1,"bi-grid-3x3-gap",2,"font-size","2rem"],[4,"ngFor","ngForOf"],[1,"my-2"],[1,"d-flex","flex-wrap","mx-auto"],["for","searchCode",1,"px-2","col-form-label"],[1,"px-2","col-8","d-flex","align-justify-start"],["type","text","placeholder","Ingrese o busca un codigo de barras",1,"form-control",3,"keyup.enter"],["searchCode",""],[1,"d-flex","justify-content-center","flex-wrap"],["class","py-4",4,"ngIf"],[1,"col-md-4","bg-white","py-4","px-2","border-start",2,"min-height","100vh"],[1,"mb-3"],["type","button","data-bs-toggle","modal","data-bs-target","#buscarCliente",1,"btn","btn-outline-success","btn-sm","m-2"],[1,"bi-people"],["type","button","data-bs-toggle","modal","data-bs-target","#buscarProducto",1,"btn","btn-outline-primary","btn-sm","m-2"],[1,"bi-box"],["type","button","data-bs-toggle","modal","data-bs-target","#entradaSalidas",1,"btn","btn-outline-primary","btn-sm","m-2"],[1,"bi-arrow-left-right"],[1,"d-grid"],["type","text","placeholder","buscar cliente",1,"form-control",3,"keyup"],["searchClient",""],["class","bg-white py-3 px-2 shadow","style","position: absolute; z-index: 1020;",4,"ngIf"],["id","printDiv"],[1,"row","mt-2"],[1,"col-md-8","text-left","text-muted"],[1,""],[1,"mb-0","text-capitalize"],[4,"ngIf"],[1,"col"],[1,"text-wrap","mb-0","text-capitalize"],[1,"text-wrap","mb-0"],[1,"text-primary","text-wrap"],[1,"table-responsive"],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ","colspan","2 ",1,"text-muted","text-left"],["scope","col ",1,"text-muted"],["class","text-center ",4,"ngIf"],[1,"py-2",2,"bottom","0"],[1,"d-flex","justify-content-center"],[1,"col-4"],["type","button","class","btn disabled btn-dark btnW waves-effect waves-dark text-white",4,"ngIf"],["type","button","class","btn btn-dark btnW waves-effect waves-dark text-white","data-bs-toggle","modal","data-bs-target","#facturar",3,"click",4,"ngIf"],[1,"col","ms-auto","text-end"],[1,"fw-normal","text-primary"],[1,"h6","fw-normal","text-primary"],["id","buscarCliente","tabindex","-1","aria-labelledby","buscarClienteModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","buscarClienteModal",1,"modal-title"],[1,"bi-people",2,"font-size","1rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"mt-2"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"col-md-10","mx-auto","p-2"],[1,"form-floating"],["formControlName","name","type","text","placeholder","Nombres",1,"form-control","text-capitalize"],["for","floatingInput"],["class","mb-1 animated fadeIn text-danger",4,"ngIf"],["formControlName","cedula","type","text","placeholder","Cedula de ciudadania",1,"form-control"],["formControlName","email","type","email","placeholder","Email",1,"form-control"],["formControlName","phone","type","text","placeholder","Telefono",1,"form-control"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],["id","buscarProducto","tabindex","-1","aria-labelledby","buscarProductoModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered",2,"min-height","350px"],["id","buscarProductoModal",1,"modal-title"],[1,"bi-file-spreadsheet",2,"font-size","1rem"],["for","precioM"],["type","text","placeholder","buscar producto",1,"form-control",3,"keyup"],["searchProduct",""],["class","bg-white px-2 shadow col-10","style","position: absolute; z-index: 1020;",4,"ngIf"],[1,"mt-4"],[1,"form-group"],["for",""],["readonly","","type","text","placeholder","Codigo de Barras",1,"form-control",3,"value"],["barcode",""],["readonly","","type","text","placeholder","Nombre",1,"form-control",3,"value"],["class","form-group col-md-6",4,"ngIf"],[1,"form-group","col-md-6"],["for","cantidad"],["type","number","min","1","placeholder","","value","1",1,"form-control"],["cantidad",""],[1,"form-check","form-switch","mt-2"],["type","checkbox",1,"form-check-input",3,"ngModel","ngModelChange"],["mayoreo",""],["for","mayor",1,"form-check-label"],["type","button",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary",3,"click"],["id","facturar","tabindex","-1","aria-labelledby","facturarModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-xl","modal-dialog-centered"],[1,"modal-body","p-0"],[1,"py-2"],[1,"col","px-0","bg-white"],[1,"bg-header-blue","py-1","px-2"],[1,"text-white","fw-normal","mb-0"],[1,"container-fluid","py-4"],[1,"text-center","my-3"],[1,"display-4","text-primary"],["class","text-danger animated fadeIn",4,"ngIf"],["class","text-success animated fadeIn",4,"ngIf"],["class","mb-0 fw-normal animated fadeIn",3,"ngClass",4,"ngIf"],["autocomplete","off",3,"formGroup"],[1,"row","text-center"],[1,"col","p-2"],["type","radio","name","type","formControlName","type","id","efectivo-outlined","value","efectivo","autocomplete","off","checked","",1,"btn-check",3,"click"],["for","efectivo-outlined",1,"btn","btn-outline-success"],[1,"px-3","bi-cash-stack",2,"font-size","1.5rem"],[1,"mb-0"],["type","radio","name","type","formControlName","type","id","tarjeta-outlined","value","tarjeta","autocomplete","off",1,"btn-check",3,"click"],["for","tarjeta-outlined",1,"btn","btn-outline-primary"],[1,"px-3","bi-credit-card",2,"font-size","1.5rem"],["type","radio","name","options-outlined","name","type","formControlName","type","id","vale-outlined","value","vale","autocomplete","off",1,"btn-check",3,"click"],["for","vale-outlined",1,"btn","btn-outline-secondary"],[1,"px-3","bi-card-heading",2,"font-size","1.5rem"],["type","radio","name","options-outlined","name","type","formControlName","type","id","mixto-outlined","value","mixto","autocomplete","off",1,"btn-check",3,"click"],["for","mixto-outlined",1,"btn","btn-outline-dark"],[1,"px-3","bi-patch-question",2,"font-size","1.5rem"],["type","radio","name","options-outlined","name","type","formControlName","type","id","credito-outlined","value","credito","autocomplete","off",1,"btn-check",3,"click"],["for","credito-outlined",1,"btn","btn-outline-warning"],[1,"px-3","bi-clock-history",2,"font-size","1.5rem"],[1,"mx-auto"],[1,"table","table-sm","table-borderless"],["formArrayName","payments"],["class","trHover",4,"ngFor","ngForOf"],[1,"row","g-3","d-flex","justify-content-center"],[1,"col-auto"],["aria-label","Default select example",1,"form-select",3,"change"],["typeAdd",""],["value","efectivo",4,"ngIf"],["value","tarjeta",4,"ngIf"],["value","vale",4,"ngIf"],["value","credito",4,"ngIf"],["class","col-auto",4,"ngIf"],[1,"my-4","float-end"],["type","button",1,"btn","btn-outline-primary",3,"click"],["id","entradaSalidas","tabindex","-1","aria-labelledby","entradaSalidasModal","aria-hidden","true",1,"modal","fade"],["id","entradaSalidasModal",1,"modal-title"],[1,"bi-arrow-left-right",2,"font-size","1rem"],["id","nav-tab","role","tablist",1,"nav","nav-tabs"],["id","nav-entradas-tab","data-bs-toggle","tab","href","#nav-entradas","role","tab","aria-controls","nav-entradas","aria-selected","true",1,"nav-link","active"],[1,"bi-box-arrow-in-right"],["id","nav-salidas-tab","data-bs-toggle","tab","href","#nav-salidas","role","tab","aria-controls","nav-salidas","aria-selected","false",1,"nav-link"],[1,"bi-box-arrow-right"],["id","nav-tabContent",1,"tab-content"],["id","nav-entradas","role","tabpanel","aria-labelledby","nav-entradas-tab",1,"tab-pane","fade","show","active"],[1,"py-4"],["type","number","placeholder","Monto de entrada",1,"form-control"],["montoE",""],["type","text","placeholder","Descripci\xf3n",1,"form-control"],["descriptionE",""],[1,"col","py-2"],["id","nav-salidas","role","tabpanel","aria-labelledby","nav-salidas-tab",1,"tab-pane","fade"],["type","number","placeholder","Monto de salida",1,"form-control"],["montoS",""],["descriptionS",""],["id","verificarPrecio","tabindex","-1","aria-labelledby","verificarPrecioModal","aria-hidden","true",1,"modal","fade"],["id","verificarPrecioModal",1,"modal-title"],[1,"bi-upc-scan",2,"font-size","1rem"],[1,"text-center","pb-4"],["type","text","placeholder","Escanear Codigo",1,"form-control",3,"keyup.enter"],["comprobarPrecio",""],["class","mt-4",4,"ngIf"],["class","p-2",4,"ngIf"],["type","button",1,"btn","bg-white","btnW","waves-effect","waves-blue","text-muted","p-2",3,"click"],["alt","...",1,"card-img-top",2,"max-height","50px","width","auto",3,"src"],["class","card m-1 animated fadeIn","style","width: 12rem;",4,"ngIf"],[1,"card","m-1","animated","fadeIn",2,"width","12rem"],["alt","...",1,"card-img-top",2,"height","180px","width","auto",3,"src"],[1,"card-body","py-2","d-flex","align-items-start","flex-column"],[1,"card-title","mb-1"],[1,"col-12","mt-auto"],[1,"d-flex","align-items-center"],[1,"mb-0","text-success"],["type","button",1,"btn","btn-link","btn-primary","text-white","ms-auto",2,"font-size","1rem",3,"click"],[1,"bi","bi-cart-plus"],[1,"bg-white","py-3","px-2","shadow",2,"position","absolute","z-index","1020"],["class","text-center py-3",4,"ngIf"],["class","list-group list-group-flush overflow-auto","style","max-height: 200px; min-width: 250px;",4,"ngIf"],[1,"text-center","py-3"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"list-group","list-group-flush","overflow-auto",2,"max-height","200px","min-width","250px"],[1,"list-group-item"],["class","list-group-item",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"align-self-center"],[1,"text-capitalize","fw-bold"],[1,"ms-auto"],[1,"btn","btn-link","p-1","text-success","float-end",3,"click"],[1,"bi-arrow-90deg-right"],[1,"text-center"],["colspan","10",1,"py-4"],["class","trHover",4,"ngIf"],[1,"trHover"],["colspan","2"],["type","button",1,"btn","btn-link","p-1","text-danger",3,"click"],[1,"bi-trash",2,"font-size","0.9rem"],["type","button",1,"btn","disabled","btn-dark","btnW","waves-effect","waves-dark","text-white"],[1,"display-7"],["type","button","data-bs-toggle","modal","data-bs-target","#facturar",1,"btn","btn-dark","btnW","waves-effect","waves-dark","text-white",3,"click"],[1,"display-6"],[1,"mb-1","animated","fadeIn","text-danger"],[1,"bg-white","px-2","shadow","col-10",2,"position","absolute","z-index","1020"],[1,"list-group","list-group-flush","overflow-auto",2,"max-height","200px"],[1,"list-group-item","py-1"],["class","list-group-item py-1 trHover",4,"ngFor","ngForOf"],[1,"list-group-item","py-1","trHover"],["for","precio"],["readonly","","type","number","min","1","placeholder","Precio",1,"form-control",3,"value"],["precio",""],["readonly","","type","number","min","1","placeholder","Precio Al Mayor",1,"form-control",3,"value"],["precioM",""],[1,"text-danger","animated","fadeIn"],[1,"text-success","animated","fadeIn"],[1,"mb-0","fw-normal","animated","fadeIn",3,"ngClass"],["type","button",1,"btn","btn-link","p-1","text-danger","text-right",3,"click"],[1,"bi-trash"],["value","efectivo"],["value","tarjeta"],["value","vale"],["value","credito"],["for","Descripci\xf3n",1,"visually-hidden"],["type","text","id","Descripci\xf3n","placeholder","Descripci\xf3n",1,"form-control","w100",3,"keyup"],["descripcionAdd",""],["for","monto",1,"visually-hidden"],["type","number","id","monto","placeholder","Monto","autofocus","true",1,"form-control",3,"value","keyup"],["montoAdd",""],["type","button",1,"btn","btn-primary","mb-3",3,"click"],["for","credi",1,"visually-hidden"],["type","date","formControlName","fechaCredito","id","credi","placeholder","Selecciona una fecha limite",1,"form-control"],["fechCredito",""],[1,"text-muted","mb-0"],[1,"display-2","text-primary"]],template:function(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",0),b.Mb(1,"div",1),b.Mb(2,"div",2),b.Mb(3,"div",3),b.Mb(4,"div",4),b.Mb(5,"button",5),b.Tb("click",function(){return e.cargarProductos()}),b.Ib(6,"i",6),b.Mb(7,"h5"),b.pc(8,"Todos"),b.Lb(),b.Lb(),b.Lb(),b.oc(9,Sa,2,1,"ng-container",7),b.Lb(),b.Mb(10,"div",8),b.Mb(11,"div",9),b.Mb(12,"label",10),b.pc(13,"Codigo del Prodcuto:"),b.Lb(),b.Mb(14,"div",11),b.Mb(15,"input",12,13),b.Tb("keyup.enter",function(){b.lc(t);const i=b.kc(16);return e.buscarCodigo(i.value)}),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(17,"div",14),b.oc(18,Pa,3,0,"div",15),b.oc(19,Na,2,1,"ng-container",7),b.Lb(),b.Lb(),b.Mb(20,"div",16),b.Mb(21,"div",17),b.Mb(22,"button",18),b.Ib(23,"i",19),b.pc(24," Crear Cliente "),b.Lb(),b.Mb(25,"button",20),b.Ib(26,"i",21),b.pc(27," Productos "),b.Lb(),b.Mb(28,"button",22),b.Ib(29,"i",23),b.pc(30," Entradas y Salidas "),b.Lb(),b.Lb(),b.Mb(31,"div",24),b.Mb(32,"div",17),b.Mb(33,"div"),b.Mb(34,"input",25,26),b.Tb("keyup",function(){b.lc(t);const i=b.kc(35);return e.buscarCliente(i.value)}),b.Lb(),b.Lb(),b.oc(36,Ea,3,2,"div",27),b.Lb(),b.Lb(),b.Mb(37,"div",28),b.Mb(38,"div",29),b.Mb(39,"div",30),b.Mb(40,"div",31),b.Mb(41,"h6",32),b.Mb(42,"strong"),b.pc(43,"CLIENTE / RAZON SOCIAL: "),b.Lb(),b.oc(44,Xa,2,1,"small",33),b.Lb(),b.Lb(),b.Mb(45,"div",34),b.Mb(46,"h6",35),b.Mb(47,"strong"),b.pc(48,"CC / Nit: "),b.Lb(),b.oc(49,qa,2,1,"small",33),b.Lb(),b.Lb(),b.Mb(50,"div",31),b.Mb(51,"h6",35),b.Mb(52,"strong"),b.pc(53,"TELEFONO: "),b.Lb(),b.oc(54,Ra,2,1,"small",33),b.Lb(),b.Lb(),b.Mb(55,"div",34),b.Mb(56,"h6",36),b.Mb(57,"strong"),b.pc(58,"CORREO: "),b.Lb(),b.oc(59,Ua,2,1,"small",33),b.Lb(),b.Lb(),b.Mb(60,"div",34),b.Mb(61,"h6",36),b.Mb(62,"span",37),b.pc(63),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Ib(64,"hr",8),b.Mb(65,"div",38),b.Mb(66,"table",39),b.Mb(67,"thead",40),b.Mb(68,"tr"),b.Mb(69,"th",41),b.pc(70,"Descripci\xf3n"),b.Lb(),b.Mb(71,"th",42),b.pc(72,"Precio"),b.Lb(),b.Mb(73,"th",42),b.pc(74,"Cantidad"),b.Lb(),b.Mb(75,"th",42),b.pc(76,"Monto"),b.Lb(),b.Ib(77,"th",42),b.Lb(),b.Lb(),b.Mb(78,"tbody"),b.oc(79,za,4,0,"tr",43),b.oc(80,Ha,2,1,"ng-container",33),b.Lb(),b.Lb(),b.Lb(),b.Mb(81,"div",44),b.Mb(82,"div",45),b.Mb(83,"div",46),b.oc(84,Ga,3,0,"button",47),b.oc(85,Ba,3,0,"button",48),b.Lb(),b.Mb(86,"div",49),b.Mb(87,"h4",50),b.pc(88),b.Yb(89,"currency"),b.Lb(),b.Mb(90,"small",51),b.pc(91),b.Yb(92,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(93,"div",52),b.Mb(94,"div",53),b.Mb(95,"div",54),b.Mb(96,"div",55),b.Mb(97,"h5",56),b.Ib(98,"i",57),b.pc(99,"Crear Cliente"),b.Lb(),b.Ib(100,"button",58),b.Lb(),b.Mb(101,"div",59),b.Mb(102,"div",60),b.Mb(103,"form",61),b.Tb("ngSubmit",function(){return e.crearCliente()}),b.Mb(104,"h5",62),b.pc(105,"Datos Personales"),b.Lb(),b.Mb(106,"div",63),b.Mb(107,"div",64),b.Ib(108,"input",65),b.Mb(109,"label",66),b.pc(110,"Nombres"),b.Lb(),b.oc(111,Va,2,0,"p",67),b.Lb(),b.Lb(),b.Mb(112,"div",63),b.Mb(113,"div",64),b.Ib(114,"input",68),b.Mb(115,"label",66),b.pc(116,"Cedula de ciudadania"),b.Lb(),b.oc(117,Wa,2,0,"p",67),b.Lb(),b.Lb(),b.Mb(118,"div",63),b.Mb(119,"div",64),b.Ib(120,"input",69),b.Mb(121,"label",66),b.pc(122,"Email"),b.Lb(),b.Lb(),b.Lb(),b.Mb(123,"div",63),b.Mb(124,"div",64),b.Ib(125,"input",70),b.Mb(126,"label",66),b.pc(127,"Telefono"),b.Lb(),b.Lb(),b.Lb(),b.Mb(128,"button",71),b.pc(129,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(130,"div",72),b.Mb(131,"button",73),b.pc(132,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(133,"div",74),b.Mb(134,"div",75),b.Mb(135,"div",54),b.Mb(136,"div",55),b.Mb(137,"h5",76),b.Ib(138,"i",77),b.pc(139," Productos"),b.Lb(),b.Ib(140,"button",58),b.Lb(),b.Mb(141,"div",59),b.Mb(142,"div",34),b.Mb(143,"div",8),b.Mb(144,"div"),b.Mb(145,"label",78),b.pc(146,"Buscar Productos:"),b.Lb(),b.Mb(147,"input",79,80),b.Tb("keyup",function(){b.lc(t);const i=b.kc(148);return e.buscarProducto(i.value)}),b.Lb(),b.Lb(),b.oc(149,Za,6,2,"div",81),b.Lb(),b.Mb(150,"div",82),b.Mb(151,"div",83),b.Mb(152,"label",84),b.pc(153,"Codigo de barras:"),b.Lb(),b.Ib(154,"input",85,86),b.Lb(),b.Mb(156,"div",83),b.Mb(157,"label",84),b.pc(158,"Nombre:"),b.Lb(),b.Ib(159,"input",87),b.Lb(),b.Mb(160,"div",1),b.oc(161,Ka,5,1,"div",88),b.oc(162,_a,5,1,"div",88),b.Mb(163,"div",89),b.Mb(164,"label",90),b.pc(165,"Cantidad:"),b.Lb(),b.Ib(166,"input",91,92),b.Lb(),b.Lb(),b.Mb(168,"div",93),b.Mb(169,"input",94,95),b.Tb("ngModelChange",function(e){return b.lc(t),b.kc(170).checked=e}),b.Lb(),b.Mb(171,"label",96),b.pc(172,"Aplicar Mayoreo"),b.Lb(),b.Lb(),b.Mb(173,"button",97),b.Tb("click",function(){b.lc(t);const i=b.kc(167),a=b.kc(170),o=b.kc(155);return e.evniarAlCarrito(i.value,a.checked,o.value)}),b.pc(174,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(175,"div",72),b.Mb(176,"button",73),b.pc(177,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(178,"div",98),b.Mb(179,"div",99),b.Mb(180,"div",54),b.Mb(181,"div",100),b.Mb(182,"div",0),b.Mb(183,"div",101),b.Mb(184,"div",102),b.Mb(185,"div",103),b.Mb(186,"h4",104),b.pc(187,"Cobrar"),b.Lb(),b.Lb(),b.Mb(188,"div",105),b.Mb(189,"div",106),b.Mb(190,"h4",107),b.pc(191),b.Yb(192,"currency"),b.Lb(),b.oc(193,Ja,2,0,"small",108),b.oc(194,Qa,2,0,"small",109),b.oc(195,eb,3,7,"h4",110),b.Lb(),b.Mb(196,"div",45),b.Mb(197,"div"),b.Mb(198,"form",111),b.Mb(199,"div",112),b.Mb(200,"div",113),b.Mb(201,"input",114),b.Tb("click",function(){return e.limpiarPagos()}),b.Lb(),b.Mb(202,"label",115),b.Ib(203,"i",116),b.Mb(204,"p",117),b.pc(205,"Efectivo"),b.Lb(),b.Lb(),b.Lb(),b.Mb(206,"div",113),b.Mb(207,"input",118),b.Tb("click",function(){return e.limpiarPagos()}),b.Lb(),b.Mb(208,"label",119),b.Ib(209,"i",120),b.Mb(210,"p",117),b.pc(211,"Tarjeta"),b.Lb(),b.Lb(),b.Lb(),b.Mb(212,"div",113),b.Mb(213,"input",121),b.Tb("click",function(){return e.limpiarPagos()}),b.Lb(),b.Mb(214,"label",122),b.Ib(215,"i",123),b.Mb(216,"p",117),b.pc(217,"Vale"),b.Lb(),b.Lb(),b.Lb(),b.Mb(218,"div",113),b.Mb(219,"input",124),b.Tb("click",function(){return e.limpiarPagos()}),b.Lb(),b.Mb(220,"label",125),b.Ib(221,"i",126),b.Mb(222,"p",117),b.pc(223,"Mixto"),b.Lb(),b.Lb(),b.Lb(),b.Mb(224,"div",113),b.Mb(225,"input",127),b.Tb("click",function(){return e.limpiarPagos("credito")}),b.Lb(),b.Mb(226,"label",128),b.Ib(227,"i",129),b.Mb(228,"p",117),b.pc(229,"Credito"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(230,"div",130),b.Mb(231,"div",38),b.Mb(232,"table",131),b.Mb(233,"thead"),b.Mb(234,"tr"),b.Mb(235,"th"),b.pc(236,"#"),b.Lb(),b.Mb(237,"th"),b.pc(238,"Descripcion"),b.Lb(),b.Mb(239,"th"),b.pc(240,"Monto"),b.Lb(),b.Ib(241,"th"),b.Lb(),b.Lb(),b.Mb(242,"tbody",132),b.oc(243,ab,13,6,"tr",133),b.Lb(),b.Lb(),b.Lb(),b.Mb(244,"div",134),b.Mb(245,"div",135),b.Mb(246,"select",136,137),b.Tb("change",function(){return b.lc(t),b.kc(247).value}),b.oc(248,bb,2,0,"option",138),b.oc(249,ob,2,0,"option",139),b.oc(250,rb,2,0,"option",140),b.oc(251,nb,2,0,"option",141),b.Lb(),b.Lb(),b.oc(252,cb,5,0,"div",142),b.oc(253,sb,5,1,"div",142),b.oc(254,db,3,0,"div",142),b.oc(255,lb,5,0,"div",142),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(256,"div",143),b.Mb(257,"button",144),b.Tb("click",function(){return e.crearFactura()}),b.pc(258," Imprimir "),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(259,"div",145),b.Mb(260,"div",53),b.Mb(261,"div",54),b.Mb(262,"div",55),b.Mb(263,"h5",146),b.Ib(264,"i",147),b.pc(265," Movimientos "),b.Lb(),b.Ib(266,"button",58),b.Lb(),b.Mb(267,"div",59),b.Mb(268,"nav"),b.Mb(269,"div",148),b.Mb(270,"a",149),b.Ib(271,"i",150),b.pc(272," Entradas"),b.Lb(),b.Mb(273,"a",151),b.Ib(274,"i",152),b.pc(275," Salidas"),b.Lb(),b.Lb(),b.Lb(),b.Mb(276,"div",153),b.Mb(277,"div",154),b.Mb(278,"div",155),b.Mb(279,"div",83),b.Mb(280,"label",84),b.pc(281,"Entrada"),b.Lb(),b.Ib(282,"input",156,157),b.Lb(),b.Mb(284,"div",83),b.Mb(285,"label",84),b.pc(286,"Descripci\xf3n"),b.Lb(),b.Ib(287,"input",158,159),b.Lb(),b.Mb(289,"div",160),b.Mb(290,"button",97),b.Tb("click",function(){b.lc(t);const i=b.kc(288),a=b.kc(283);return e.entradaSalida("entrada",i.value,a.value)}),b.pc(291,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(292,"div",161),b.Mb(293,"div",155),b.Mb(294,"div",83),b.Mb(295,"label",84),b.pc(296,"Salida"),b.Lb(),b.Ib(297,"input",162,163),b.Lb(),b.Mb(299,"div",83),b.Mb(300,"label",84),b.pc(301,"Descripci\xf3n"),b.Lb(),b.Ib(302,"input",158,164),b.Lb(),b.Mb(304,"div",160),b.Mb(305,"button",97),b.Tb("click",function(){b.lc(t);const i=b.kc(303),a=b.kc(298);return e.entradaSalida("salida",i.value,a.value)}),b.pc(306,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(307,"div",165),b.Mb(308,"div",53),b.Mb(309,"div",54),b.Mb(310,"div",55),b.Mb(311,"h5",166),b.Ib(312,"i",167),b.pc(313," Verificar Precio "),b.Lb(),b.Ib(314,"button",58),b.Lb(),b.Mb(315,"div",59),b.Mb(316,"div",168),b.Mb(317,"h4",62),b.pc(318,"Comprobar Precio"),b.Lb(),b.Mb(319,"div",83),b.Mb(320,"input",169,170),b.Tb("keyup.enter",function(){b.lc(t);const i=b.kc(321);return e.comprobrarPrecio(i.value)}),b.Lb(),b.Lb(),b.oc(322,ub,6,4,"div",171),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.kc(170);b.wb(9),b.dc("ngForOf",e.departmentos),b.wb(9),b.dc("ngIf",e.listaProductos.length<1),b.wb(1),b.dc("ngForOf",e.listaProductos),b.wb(17),b.dc("ngIf",e.listaClientes.length>0),b.wb(8),b.dc("ngIf",e.clienteTemp.name),b.wb(5),b.dc("ngIf",e.clienteTemp.cedula),b.wb(5),b.dc("ngIf",e.clienteTemp.phone),b.wb(5),b.dc("ngIf",e.clienteTemp.email),b.wb(4),b.sc(" ",e.mesa.name," - ",e.mesa.mesero.name," "),b.wb(16),b.dc("ngIf",0===e.carrito.length),b.wb(1),b.dc("ngIf",e.carrito.length>0),b.wb(4),b.dc("ngIf",""===e.clienteTemp.cedula||0===e.carrito.length),b.wb(1),b.dc("ngIf",""!==e.clienteTemp.cedula&&e.carrito.length>0),b.wb(3),b.qc(b.Zb(89,40,e.total)),b.wb(3),b.rc("Sub-total ",b.Zb(92,42,e.total/1),""),b.wb(12),b.dc("formGroup",e.newClientForm),b.wb(8),b.dc("ngIf",e.campoValido("name")),b.wb(6),b.dc("ngIf",e.campoValido("cedula")),b.wb(32),b.dc("ngIf",e.listaProductos.length>0),b.wb(5),b.dc("value",e.productTemp.code),b.wb(5),b.dc("value",e.productTemp.name),b.wb(2),b.dc("ngIf",!t.checked),b.wb(1),b.dc("ngIf",t.checked),b.wb(7),b.dc("ngModel",t.checked),b.wb(22),b.qc(b.Zb(192,44,e.total)),b.wb(2),b.dc("ngIf",e.totalPagos>0&&e.totalPagos<e.total),b.wb(1),b.dc("ngIf",e.totalPagos>0&&e.totalPagos>=e.total),b.wb(1),b.dc("ngIf",e.totalPagos>0),b.wb(3),b.dc("formGroup",e.invoiceForm),b.wb(45),b.dc("ngForOf",e.payments),b.wb(5),b.dc("ngIf","efectivo"===e.invoiceForm.value.type||"mixto"===e.invoiceForm.value.type),b.wb(1),b.dc("ngIf","tarjeta"===e.invoiceForm.value.type||"mixto"===e.invoiceForm.value.type),b.wb(1),b.dc("ngIf","vale"===e.invoiceForm.value.type||"mixto"===e.invoiceForm.value.type),b.wb(1),b.dc("ngIf","credito"===e.invoiceForm.value.type),b.wb(1),b.dc("ngIf",!e.credit),b.wb(1),b.dc("ngIf",!e.credit),b.wb(1),b.dc("ngIf",!e.credit),b.wb(1),b.dc("ngIf",e.credit),b.wb(67),b.dc("ngIf",e.productoCom)}},directives:[m.l,m.m,k.r,k.i,k.f,k.b,k.h,k.e,k.a,k.j,k.m,k.c,m.k,k.k,k.q],pipes:[m.c,oe],encapsulation:2}),t})();function mb(t,e){1&t&&b.Ib(0,"img",34)}function hb(t,e){1&t&&b.Ib(0,"img",35)}function fb(t,e){1&t&&(b.Mb(0,"p",36),b.pc(1,"- El nombre es obligatorio"),b.Lb())}function Mb(t,e){1&t&&(b.Mb(0,"p",36),b.pc(1,"- La direcci\xf3n es obligatoria"),b.Lb())}function vb(t,e){1&t&&(b.Mb(0,"p",36),b.pc(1,"- Debes de agregar un numero telefonico"),b.Lb())}function Lb(t,e){1&t&&(b.Mb(0,"p",36),b.pc(1,"- El nit es obligatorio"),b.Lb())}let gb=(()=>{class t{constructor(t,e,i){this.empresaService=t,this.fb=e,this.fileUploadService=i,this.formSubmitted=!1,this.formUpdate=this.fb.group({name:["",[k.p.required,k.p.minLength(3)]],address:["",[k.p.required,k.p.minLength(3)]],phone:["",[k.p.required,k.p.minLength(5)]],nit:["",[k.p.required,k.p.minLength(3)]],tax:[""],eid:["",[k.p.required]],impuesto:[""]}),this.imgTemp=null}ngOnInit(){this.cargarDatos()}cargarDatos(){this.empresaService.getDatos().subscribe(t=>{this.empresa=t;const{tax:e,name:i,address:a,phone:b,nit:o,eid:r,impuesto:n}=t;this.formUpdate.reset({tax:e,name:i,address:a,phone:b,nit:o,eid:r,impuesto:n})})}actualizarDatos(){this.formSubmitted=!0,this.formUpdate.invalid||this.empresaService.updateDatos(this.formUpdate.value,this.empresa.eid).subscribe(t=>{this.cargarDatos(),n.a.fire("Estupendo","La empresa a sido creada","success"),this.formSubmitted=!1,this.formUpdate.reset()},t=>{n.a.fire("Error",t.error.msg,"error")})}campoValido(t){return!(!this.formUpdate.get(t).invalid||!this.formSubmitted)}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(o.a),b.Hb(k.d),b.Hb(Rt))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-empresa"]],decls:68,vars:7,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","ticket1-tab",1,"nav-link","text-dark","active"],[1,"bi-gear",2,"font-size","1rem"],[1,"container-fluid","my-2"],[1,"text-dark"],[1,"row"],[1,"col-lg-4","text-center"],[1,"card"],[1,"card-body","text-center"],["src","http://localhost:3000/api/uploads/logo/no-image","class","avatar-redondo-lg mx-auto","alt","",4,"ngIf"],["class","avatar-redondo-lg mx-auto","alt","",4,"ngIf"],[1,"small","font-italic","text-muted","mb-4"],[1,"mb-3"],["for","formFileSm",1,"form-label"],[1,"col-lg-8"],[1,"card-header"],[1,"card-body"],["id","upProductForm","autocomplete","off",3,"formGroup","ngSubmit"],[1,"text-muted"],[1,"form-floating"],["formControlName","name","type","text","placeholder","Nombre de mi empresa",1,"form-control","text-capitalize"],["for","floatingInput"],["formControlName","address","type","text","placeholder","Direcci\xf2n de mi empresa",1,"form-control"],[1,"col-md-4"],["formControlName","phone","type","text","placeholder","Telefono",1,"form-control"],[1,"px-md-1","col-md-4"],["formControlName","nit","type","text","placeholder","Nit",1,"form-control"],["formControlName","tax","type","number","min","0","placeholder","Impuesto",1,"form-control"],[1,"text-danger","mb-2"],["class","mb-1 animated fadeIn",4,"ngIf"],["type","submit",1,"btn","btnW","waves-effect","waves-ligth","px-3","btn-primary"],["src","http://localhost:3000/api/uploads/logo/no-image","alt","",1,"avatar-redondo-lg","mx-auto"],["alt","",1,"avatar-redondo-lg","mx-auto"],[1,"mb-1","animated","fadeIn"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Mi Empresa"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Informaci\xf3n de mi empresa"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div"),b.Mb(11,"h5",7),b.pc(12,"ADMINISTRACI\xd3N DE MI EMPRESA"),b.Lb(),b.Mb(13,"p"),b.pc(14,"Configura toda la informaci\xf3n de tu empresa desde este modulo."),b.Lb(),b.Lb(),b.Mb(15,"div",8),b.Mb(16,"div",9),b.Mb(17,"div",10),b.Mb(18,"div",11),b.oc(19,mb,1,0,"img",12),b.oc(20,hb,1,0,"img",13),b.Mb(21,"div",14),b.pc(22,"JPG - PNG - WEBP - no mayor a 5 mb"),b.Lb(),b.Mb(23,"div",15),b.Mb(24,"label",16),b.pc(25,"Seleccionar Imagen"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(26,"div",17),b.Mb(27,"div",10),b.Mb(28,"div",18),b.pc(29," Informaci\xf2n "),b.Lb(),b.Mb(30,"div",19),b.Mb(31,"form",20),b.Tb("ngSubmit",function(){return e.actualizarDatos()}),b.Mb(32,"h5",21),b.pc(33,"Datos de mi empresa"),b.Lb(),b.Mb(34,"div",15),b.Mb(35,"div",22),b.Ib(36,"input",23),b.Mb(37,"label",24),b.pc(38,"Nombre de mi empresa"),b.Lb(),b.Lb(),b.Lb(),b.Mb(39,"div",15),b.Mb(40,"div",22),b.Ib(41,"input",25),b.Mb(42,"label",24),b.pc(43,"Direcci\xf2n de mi empresa"),b.Lb(),b.Lb(),b.Lb(),b.Mb(44,"div",8),b.Mb(45,"div",26),b.Mb(46,"div",22),b.Ib(47,"input",27),b.Mb(48,"label",24),b.pc(49,"Telefono"),b.Lb(),b.Lb(),b.Lb(),b.Mb(50,"div",28),b.Mb(51,"div",22),b.Ib(52,"input",29),b.Mb(53,"label",24),b.pc(54,"Nit"),b.Lb(),b.Lb(),b.Lb(),b.Mb(55,"div",26),b.Mb(56,"div",22),b.Ib(57,"input",30),b.Mb(58,"label",24),b.pc(59,"Impuesto"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(60,"div",8),b.Mb(61,"div",31),b.oc(62,fb,2,0,"p",32),b.oc(63,Mb,2,0,"p",32),b.oc(64,vb,2,0,"p",32),b.oc(65,Lb,2,0,"p",32),b.Lb(),b.Lb(),b.Mb(66,"button",33),b.pc(67,"Guardar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(19),b.dc("ngIf",e.empresa),b.wb(1),b.dc("ngIf",!e.empresa),b.wb(11),b.dc("formGroup",e.formUpdate),b.wb(31),b.dc("ngIf",e.campoValido("name")),b.wb(1),b.dc("ngIf",e.campoValido("address")),b.wb(1),b.dc("ngIf",e.campoValido("phone")),b.wb(1),b.dc("ngIf",e.campoValido("nit")))},directives:[m.m,k.r,k.i,k.f,k.b,k.h,k.e,k.l],encapsulation:2}),t})();function wb(t,e){1&t&&(b.Mb(0,"p",43),b.Ib(1,"i",44),b.pc(2," Existe una diferencia, todo va a quedar almacenado "),b.Lb())}function Ib(t,e){1&t&&(b.Mb(0,"p",45),b.Ib(1,"i",46),b.pc(2," Todo en orden"),b.Lb())}const yb=function(t,e){return{"text-danger":t,"text-success":e}};let xb=(()=>{class t{constructor(t,e,i){this.turnoService=t,this.cajaService=e,this.router=i,this.efectivo=0,this.tarjeta=0,this.credito=0,this.vales=0,this.transferencia=0,this.inicial=0,this.abEfectivo=0,this.entradas=0,this.salidas=0,this.movimientos=[]}ngOnInit(){null!==localStorage.getItem("turno")?(this.cargarTurno(),this.cargarCaja()):n.a.fire("Atenci\xf3n!","No existe un turno asignado, no puedes hacer cortes ni cierres","info")}cargarCaja(){this.cajaService.loadOneCaja(localStorage.getItem("turno")).subscribe(t=>{this.caja=t},t=>{n.a.fire("Error",t.error.msg,"error")})}cargarTurno(){this.turnoService.getTurnoId(localStorage.getItem("turno")).subscribe(t=>{this.turno=t,this.movimientos=t.movements,this.inicial=t.initial,this.procesarInformacion()})}procesarInformacion(){const t=this.turno.sales;console.log(t);for(let i=0;i<t.length;i++){if(null===t[i].facturas.payments)return;let e=t[i].facturas.payments;for(let t=0;t<e.length;t++)switch(e[t].type){case"efectivo":this.efectivo+=e[t].amount;break;case"tarjeta":this.tarjeta+=e[t].amount;break;case"credito":this.credito+=e[t].amount;break;case"vales":this.vales+=e[t].amount;break;case"transferencia":this.transferencia+=e[t].amount}}const e=this.movimientos;for(let i=0;i<e.length;i++)switch(e[i].type){case"entrada":this.entradas+=e[i].monto;break;case"salida":this.salidas+=e[i].monto}}cerrarTurno(t){const e=this.efectivo+this.entradas+this.inicial+this.abEfectivo+this.salidas;Number(t)!==e&&(this.turno.diferencia=!0,this.turno.montoD=Number(t)-e),this.turno.cerrado=!0,this.turno.cierre=new Date,this.turnoService.updateTurno(this.turno,this.turno.tid).subscribe(t=>{},t=>{n.a.fire("Error",t.error.msg,"error")}),this.caja.cerrada=!0,this.cajaService.updateCaja(this.caja,this.caja.caid).subscribe(t=>{localStorage.removeItem("turno"),this.router.navigateByUrl("/")},t=>{n.a.fire("Error",t.error.msg,"error")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(p.a),b.Hb(u),b.Hb(a.b))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-corte"]],decls:161,vars:51,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","facturas-tab",1,"nav-link","text-dark","active"],[1,"bi-bar-chart",2,"font-size","1rem"],[1,"container-fluid","mb-5"],[1,"my-4"],[1,"text-dark"],["type","button","data-bs-toggle","modal","data-bs-target","#cierre",1,"btn","btn-sm","btn-outline-success"],[1,"bi-calculator"],[1,"row","d-flex","justify-content-center"],[1,"col-auto","p-2"],[1,"card","shadow","px-2",2,"width","18rem"],[1,"card-body"],[1,"card-title","mb-0"],[1,"table-responsive"],[1,"table","table-borderless","table-hover","table-sm","animated","fadeIn"],["colspan","2"],[1,"text-danger"],[1,"border-top"],[1,"fw-bold"],[1,"card","shadow","px-2","bg-success","border-0",2,"width","18rem"],[1,"card-body","text-white"],[1,"card-title","mb-0","text-center"],[1,"text-center"],["id","cierre","tabindex","-1","aria-labelledby","cierreModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered","modal-dialog-scrollable"],[1,"modal-content"],[1,"modal-header"],["id","cierreModal",1,"modal-title"],[1,"bi-arrow-left-right",2,"font-size","1rem"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body","mb-4"],[1,"table"],["scope","row"],[1,"form-group"],["type","number","name","","id","","placeholder","efectivo en caja","aria-describedby","helpId",1,"form-control",3,"keyup"],["cajaA",""],[3,"ngClass"],["class","animated fadeIn mb-2 text-danger",4,"ngIf"],["class","animated fadeIn mb-2 text-success",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"animated","fadeIn","mb-2","text-danger"],[1,"bi-exclamation-triangle"],[1,"animated","fadeIn","mb-2","text-success"],[1,"bi-check2-all"]],template:function(t,e){if(1&t){const t=b.Nb();b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Corte"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Corte"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.Mb(11,"h5",8),b.pc(12,"Realizar Cierre de caja"),b.Lb(),b.Mb(13,"p"),b.pc(14,"Automaticamente se guardara toda la informaci\xf3n de caja y el usuario"),b.Lb(),b.Mb(15,"button",9),b.Ib(16,"i",10),b.pc(17," Cerrar Caja"),b.Lb(),b.Lb(),b.Mb(18,"div",11),b.Mb(19,"div",12),b.Mb(20,"div",13),b.Mb(21,"div",14),b.Mb(22,"h5",15),b.pc(23,"Dinero en caja"),b.Lb(),b.Lb(),b.Mb(24,"div",16),b.Mb(25,"table",17),b.Mb(26,"tbody"),b.Mb(27,"tr"),b.Mb(28,"td",18),b.Mb(29,"small"),b.pc(30," Fondo Caja "),b.Lb(),b.Lb(),b.Mb(31,"td"),b.pc(32),b.Yb(33,"currency"),b.Lb(),b.Lb(),b.Mb(34,"tr"),b.Mb(35,"td",18),b.Mb(36,"small"),b.pc(37," Ventas en efectivo "),b.Lb(),b.Lb(),b.Mb(38,"td"),b.pc(39),b.Yb(40,"currency"),b.Lb(),b.Lb(),b.Mb(41,"tr"),b.Mb(42,"td",18),b.Mb(43,"small"),b.pc(44," Abonos en efectivo "),b.Lb(),b.Lb(),b.Mb(45,"td"),b.pc(46),b.Yb(47,"currency"),b.Lb(),b.Lb(),b.Mb(48,"tr"),b.Mb(49,"td",18),b.Mb(50,"small"),b.pc(51," Entradas "),b.Lb(),b.Lb(),b.Mb(52,"td"),b.pc(53),b.Yb(54,"currency"),b.Lb(),b.Lb(),b.Mb(55,"tr",19),b.Mb(56,"td",18),b.Mb(57,"small"),b.pc(58," Salidas "),b.Lb(),b.Lb(),b.Mb(59,"td"),b.pc(60),b.Yb(61,"currency"),b.Lb(),b.Lb(),b.Mb(62,"tr",20),b.Mb(63,"td",18),b.Mb(64,"small",21),b.pc(65," Total "),b.Lb(),b.Lb(),b.Mb(66,"td",21),b.pc(67),b.Yb(68,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(69,"div",12),b.Mb(70,"div",13),b.Mb(71,"div",14),b.Mb(72,"h5",15),b.pc(73,"Ventas del dia"),b.Lb(),b.Lb(),b.Mb(74,"div",16),b.Mb(75,"table",17),b.Mb(76,"tbody"),b.Mb(77,"tr"),b.Mb(78,"td",18),b.Mb(79,"small"),b.pc(80," En Efectivo "),b.Lb(),b.Lb(),b.Mb(81,"td"),b.pc(82),b.Yb(83,"currency"),b.Lb(),b.Lb(),b.Mb(84,"tr"),b.Mb(85,"td",18),b.Mb(86,"small"),b.pc(87," Con tarjeta "),b.Lb(),b.Lb(),b.Mb(88,"td"),b.pc(89),b.Yb(90,"currency"),b.Lb(),b.Lb(),b.Mb(91,"tr"),b.Mb(92,"td",18),b.Mb(93,"small"),b.pc(94," Con Transferencia "),b.Lb(),b.Lb(),b.Mb(95,"td"),b.pc(96),b.Yb(97,"currency"),b.Lb(),b.Lb(),b.Mb(98,"tr"),b.Mb(99,"td",18),b.Mb(100,"small"),b.pc(101," A credito "),b.Lb(),b.Lb(),b.Mb(102,"td"),b.pc(103),b.Yb(104,"currency"),b.Lb(),b.Lb(),b.Mb(105,"tr"),b.Mb(106,"td",18),b.Mb(107,"small"),b.pc(108," Con Vales "),b.Lb(),b.Lb(),b.Mb(109,"td"),b.pc(110),b.Yb(111,"currency"),b.Lb(),b.Lb(),b.Mb(112,"tr",20),b.Mb(113,"td",18),b.Mb(114,"small",21),b.pc(115," Total "),b.Lb(),b.Lb(),b.Mb(116,"td",21),b.pc(117),b.Yb(118,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(119,"div",12),b.Mb(120,"div",22),b.Mb(121,"div",23),b.Mb(122,"h4",24),b.pc(123,"Ventas Totales"),b.Lb(),b.Mb(124,"h5",25),b.pc(125),b.Yb(126,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(127,"div",26),b.Mb(128,"div",27),b.Mb(129,"div",28),b.Mb(130,"div",29),b.Mb(131,"h5",30),b.Ib(132,"i",31),b.pc(133," Cierre "),b.Lb(),b.Ib(134,"button",32),b.Lb(),b.Mb(135,"div",33),b.Mb(136,"table",34),b.Mb(137,"tbody"),b.Mb(138,"tr"),b.Mb(139,"td",35),b.pc(140,"Efectivo esperado en caja:"),b.Lb(),b.Mb(141,"td"),b.pc(142),b.Yb(143,"currency"),b.Lb(),b.Lb(),b.Mb(144,"tr"),b.Mb(145,"td",35),b.pc(146,"Cuanto efectivo hay en caja"),b.Lb(),b.Mb(147,"td"),b.Mb(148,"div",36),b.Mb(149,"input",37,38),b.Tb("keyup",function(){return b.lc(t),b.kc(150).value}),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(151,"tr"),b.Mb(152,"td",35),b.pc(153," Diferencia "),b.Lb(),b.Mb(154,"td",39),b.pc(155),b.Yb(156,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.oc(157,wb,3,0,"p",40),b.oc(158,Ib,3,0,"p",41),b.Mb(159,"button",42),b.Tb("click",function(){b.lc(t);const i=b.kc(150);return e.cerrarTurno(i.value)}),b.pc(160,"Hacer cierre"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=b.kc(150);b.wb(32),b.rc(" ",b.Zb(33,18,e.inicial),""),b.wb(7),b.rc(" ",b.Zb(40,20,e.efectivo)," "),b.wb(7),b.rc(" ",b.Zb(47,22,e.abEfectivo)," "),b.wb(7),b.rc(" ",b.Zb(54,24,e.entradas)," "),b.wb(7),b.rc(" ",b.Zb(61,26,e.salidas)," "),b.wb(7),b.rc(" ",b.Zb(68,28,e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas)," "),b.wb(15),b.rc(" ",b.Zb(83,30,e.efectivo)," "),b.wb(7),b.rc(" ",b.Zb(90,32,e.tarjeta)," "),b.wb(7),b.rc(" ",b.Zb(97,34,e.transferencia)," "),b.wb(7),b.rc(" ",b.Zb(104,36,e.credito)," "),b.wb(7),b.rc(" ",b.Zb(111,38,e.vales)," "),b.wb(7),b.rc(" ",b.Zb(118,40,e.efectivo+e.tarjeta+e.transferencia+e.credito+e.vales)," "),b.wb(8),b.rc(" ",b.Zb(126,42,e.efectivo+e.tarjeta+e.transferencia+e.vales)," "),b.wb(17),b.qc(b.Zb(143,44,e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas)),b.wb(12),b.dc("ngClass",b.ic(48,yb,e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas-t.value!=0,e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas-t.value>0)),b.wb(1),b.rc(" ",b.Zb(156,46,t.value-(e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas))," "),b.wb(2),b.dc("ngIf",e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas-t.value!=0),b.wb(1),b.dc("ngIf",e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas-t.value==0)}},directives:[m.k,m.m],pipes:[m.c],encapsulation:2}),t})();function kb(t,e){1&t&&(b.Mb(0,"div"),b.Mb(1,"div",34),b.Mb(2,"div",35),b.Mb(3,"span",36),b.pc(4,"Loading..."),b.Lb(),b.Lb(),b.Lb(),b.Mb(5,"small",37),b.pc(6,"cargando..."),b.Lb(),b.Lb())}function Cb(t,e){1&t&&(b.Mb(0,"tr",21),b.Mb(1,"th",56),b.Mb(2,"h4",37),b.pc(3,"Sin Resultados"),b.Lb(),b.Lb(),b.Lb())}function Tb(t,e){1&t&&b.Ib(0,"i",66)}function Sb(t,e){1&t&&b.Ib(0,"i",67)}function Pb(t,e){1&t&&(b.Mb(0,"span",68),b.pc(1,"Abierto"),b.Lb())}function Fb(t,e){1&t&&(b.Mb(0,"span",69),b.pc(1,"Cerrado"),b.Lb())}function Nb(t,e){if(1&t){const t=b.Nb();b.Mb(0,"tr",57),b.Mb(1,"td"),b.oc(2,Tb,1,0,"i",58),b.oc(3,Sb,1,0,"i",59),b.Lb(),b.Mb(4,"td",28),b.pc(5),b.Lb(),b.Mb(6,"td"),b.pc(7),b.Lb(),b.Mb(8,"td"),b.oc(9,Pb,2,0,"span",60),b.oc(10,Fb,2,0,"span",61),b.Lb(),b.Mb(11,"td",21),b.Mb(12,"small",62),b.pc(13),b.Yb(14,"date"),b.Lb(),b.Mb(15,"small",63),b.pc(16),b.Yb(17,"date"),b.Lb(),b.Lb(),b.Mb(18,"td",21),b.Mb(19,"button",64),b.Tb("click",function(){b.lc(t);const i=e.$implicit;return b.Xb(2).cargarTurnoId(i.tid)}),b.Ib(20,"i",65),b.Lb(),b.Lb(),b.Lb()}if(2&t){const t=e.$implicit;b.wb(2),b.dc("ngIf",t.diferencia),b.wb(1),b.dc("ngIf",!t.diferencia),b.wb(2),b.qc(t.cajero.name),b.wb(2),b.qc(t.caja.name),b.wb(2),b.dc("ngIf",!t.cerrado),b.wb(1),b.dc("ngIf",t.cerrado),b.wb(3),b.rc(" ",b.ac(14,8,t.fecha,"medium")," "),b.wb(3),b.qc(b.ac(17,11,t.cierre,"medium"))}}function jb(t,e){if(1&t&&(b.Mb(0,"small",37),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.rc(" - (Resultados: ",t.resultado,")")}}function Db(t,e){if(1&t&&(b.Mb(0,"small",37),b.pc(1),b.Lb()),2&t){const t=b.Xb(2);b.wb(1),b.sc(" - (Desde el: ",t.desde+1," Hasta el: ",t.desde+t.listaTurnos.length,")")}}function Ab(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div",70),b.Mb(1,"button",71),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(-10)}),b.pc(2,"Anterior"),b.Lb(),b.Mb(3,"button",71),b.Tb("click",function(){return b.lc(t),b.Xb(2).cambiarPagina(10)}),b.pc(4,"Siguiente"),b.Lb(),b.Lb()}if(2&t){const t=b.Xb(2);b.wb(1),b.yb("",t.btnAtras," btn btn-sm btn-dark btnW waves-effect waves-light px-3"),b.wb(2),b.yb("",t.btnAdelante," btn btn-sm btn-dark btnW waves-effect waves-light px-3 ms-2")}}function Eb(t,e){if(1&t){const t=b.Nb();b.Mb(0,"div"),b.Mb(1,"div",38),b.Mb(2,"div"),b.Mb(3,"button",39),b.Tb("click",function(){return b.lc(t),b.Xb().cargarTurno()}),b.Ib(4,"i",40),b.pc(5," Recargar "),b.Lb(),b.Lb(),b.Mb(6,"div",41),b.Mb(7,"input",42,43),b.Tb("change",function(){b.lc(t);const e=b.kc(8);return b.Xb().buscar(e.value)}),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",26),b.Mb(10,"table",44),b.Mb(11,"thead",45),b.Mb(12,"tr"),b.Ib(13,"th"),b.Mb(14,"th",46),b.pc(15,"Usuario"),b.Lb(),b.Mb(16,"th",47),b.pc(17,"Mesa"),b.Lb(),b.Mb(18,"th",47),b.pc(19,"Disponibilidad"),b.Lb(),b.Mb(20,"th",48),b.pc(21,"Fecha"),b.Lb(),b.Mb(22,"th",49),b.pc(23,"Acciones"),b.Lb(),b.Lb(),b.Lb(),b.Mb(24,"tbody"),b.oc(25,Cb,4,0,"tr",50),b.oc(26,Nb,21,14,"tr",51),b.Lb(),b.Lb(),b.Lb(),b.Mb(27,"div",52),b.Mb(28,"div",53),b.Mb(29,"small",37),b.pc(30),b.Lb(),b.oc(31,jb,2,1,"small",54),b.oc(32,Db,2,2,"small",54),b.Lb(),b.oc(33,Ab,5,6,"div",55),b.Lb(),b.Lb()}if(2&t){const t=b.kc(8),e=b.Xb();b.wb(25),b.dc("ngIf",!e.sinResultados),b.wb(1),b.dc("ngForOf",e.listaTurnos),b.wb(4),b.rc("Total de cajas: (",e.totalTurnos,")"),b.wb(1),b.dc("ngIf",0!==e.resultado),b.wb(1),b.dc("ngIf",0!==e.desde),b.wb(1),b.dc("ngIf",0===t.value.length)}}const Xb=function(t,e){return{"bg-danger":t,"bg-success":e}};function qb(t,e){if(1&t&&(b.Mb(0,"div",17),b.Mb(1,"div",72),b.Mb(2,"div",19),b.Mb(3,"h5",20),b.pc(4,"Diferencia"),b.Lb(),b.Mb(5,"p",73),b.pc(6),b.Yb(7,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(1),b.dc("ngClass",b.ic(4,Xb,t.montoDiferencia<0,t.montoDiferencia>0)),b.wb(5),b.rc(" ",b.Zb(7,2,t.montoDiferencia)," ")}}let Rb=(()=>{class t{constructor(t,e){this.turnoService=t,this.searchService=e,this.listaTurnos=[],this.listaTurnosTemp=[],this.totalTurnos=0,this.resultado=0,this.desde=0,this.cargando=!0,this.sinResultados=!0,this.btnAtras="",this.btnAdelante="",this.efectivo=0,this.tarjeta=0,this.credito=0,this.vales=0,this.transferencia=0,this.inicial=0,this.abEfectivo=0,this.entradas=0,this.salidas=0,this.montoDiferencia=0,this.movimientos=[]}ngOnInit(){this.cargarTurno()}cargarTurno(){this.turnoService.loadTurno(this.desde).subscribe(({turnos:t,total:e})=>{if(0===t.length)return this.sinResultados=!1,this.cargando=!1,this.listaTurnos=[],this.resultado=0,this.btnAtras="disabled",void(this.btnAdelante="disabled");this.totalTurnos=e,this.listaTurnos=t,this.listaTurnosTemp=t,this.resultado=0,this.cargando=!1,0===this.desde&&this.totalTurnos>10?(this.btnAtras="disabled",this.btnAdelante=""):0===this.desde&&this.totalTurnos<11?(this.btnAtras="disabled",this.btnAdelante="disabled"):this.desde>this.listaTurnos.length||this.desde+10>=this.totalTurnos?(this.btnAtras="",this.btnAdelante="disabled"):(this.btnAtras="",this.btnAdelante="")})}cambiarPagina(t){this.desde+=t,this.desde<0?this.desde=0:this.desde>this.totalTurnos&&(this.desde-=t),this.cargarTurno()}buscar(t){return this.sinResultados=!0,null===t?(this.listaTurnos=this.listaTurnosTemp,void(this.resultado=0)):t?(this.sinResultados=!0,void this.turnoService.loadTurnoDate(t).subscribe(({total:t,turnos:e})=>{if(0===e.length)return this.sinResultados=!1,this.listaTurnos=[],void(this.resultado=0);this.totalTurnos=t,this.listaTurnos=e,this.resultado=e.length})):(this.listaTurnos=this.listaTurnosTemp,void(this.resultado=0))}cargarTurnoId(t){this.turnoService.getTurnoId(t).subscribe(t=>{this.turnoId=t,this.movimientos=t.movements,this.inicial=t.initial,this.procesarInformacion()})}procesarInformacion(){this.montoDiferencia=0;const t=this.turnoId.sales;for(let i=0;i<t.length;i++){let e=t[i].facturas.payments;for(let t=0;t<e.length;t++)switch(e[t].type){case"efectivo":this.efectivo+=e[t].amount;break;case"tarjeta":this.tarjeta+=e[t].amount;break;case"credito":this.credito+=e[t].amount;break;case"vales":this.vales+=e[t].amount;break;case"transferencia":this.transferencia+=e[t].amount}}const e=this.movimientos;for(let i=0;i<e.length;i++)switch(e[i].type){case"entrada":this.entradas+=e[i].monto;break;case"salida":this.salidas+=e[i].monto}this.turnoId.diferencia&&(this.montoDiferencia=this.turnoId.montoD)}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(p.a),b.Hb(G))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-cierres"]],decls:134,vars:42,consts:[[1,"bg-header-blue","py-2","px-3","mb-2"],[1,"text-white","m-0"],["id","myTab","role","tablist",1,"nav","nav-tabs","px-3"],["role","presentation",1,"nav-item"],["id","ticket1-tab",1,"nav-link","text-dark","active"],[1,"bi-gear",2,"font-size","1rem"],[1,"container-fluid","my-4"],[1,"shadow-lg","p-3","mb-5","rounded","bg-white"],[4,"ngIf"],["id","turnoDetalles","tabindex","-1","aria-labelledby","turnoDetallesModal","aria-hidden","true",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],["id","turnoDetallesModal",1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],[1,"row","d-flex","justify-content-center"],[1,"col-auto","p-2"],[1,"card","shadow","px-2","bg-success","border-0",2,"width","18rem"],[1,"card-body","text-white"],[1,"card-title","mb-0","text-center"],[1,"text-center"],["class","col-auto p-2",4,"ngIf"],[1,"card","shadow","px-2",2,"width","18rem"],[1,"card-body"],[1,"card-title","mb-0"],[1,"table-responsive"],[1,"table","table-borderless","table-hover","table-sm","animated","fadeIn"],["colspan","2"],[1,"text-danger"],[1,"border-top"],[1,"fw-bold"],[1,"modal-footer"],["type","button","data-bs-dismiss","modal",1,"btn","btn-secondary"],[1,"text-center","p-4"],["role","status",1,"spinner-grow","text-secondary"],[1,"visually-hidden"],[1,"text-muted"],[1,"d-flex"],["type","button",1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi-arrow-clockwise"],[1,"col-4","col-md-2","ms-auto"],["type","date",1,"form-control",3,"change"],["search",""],[1,"table","table-borderless","table-striped","table-hover","table-sm","animated","fadeIn"],[1,"border-bottom"],["scope","col ","colspan","2",1,"text-muted"],["scope","col ",1,"text-muted"],["scope","col ",1,"text-muted","text-center"],["scope","col ",1,"text-muted","w100","text-rigth"],["class","text-center ",4,"ngIf"],["class","trHover",4,"ngFor","ngForOf"],[1,"row"],[1,"col","col-md-4"],["class","text-muted",4,"ngIf"],["class","col d-flex justify-content-end",4,"ngIf"],["colspan","10",1,"py-4"],[1,"trHover"],["class","text-warning bi-exclamation-triangle",4,"ngIf"],["class","text-success bi-check2-all",4,"ngIf"],["class","badge rounded-pill bg-success text-white-75",4,"ngIf"],["class","badge rounded-pill bg-danger text-white-75",4,"ngIf"],[1,"badge","rounded-pill","bg-primary","text-wrap"],[1,"badge","rounded-pill","bg-dark","text-wrap"],["type","button","data-bs-toggle","modal","data-bs-target","#turnoDetalles",1,"btn","btn-link","p-1","text-primary",3,"click"],[1,"bi","bi-box-arrow-up-right"],[1,"text-warning","bi-exclamation-triangle"],[1,"text-success","bi-check2-all"],[1,"badge","rounded-pill","bg-success","text-white-75"],[1,"badge","rounded-pill","bg-danger","text-white-75"],[1,"col","d-flex","justify-content-end"],["type","button",3,"click"],[1,"card","shadow","px-2","border-0",2,"width","18rem",3,"ngClass"],[1,"text-center","mb-0"]],template:function(t,e){1&t&&(b.Mb(0,"header"),b.Mb(1,"div",0),b.Mb(2,"h5",1),b.pc(3,"Configuraciones / Cierres"),b.Lb(),b.Lb(),b.Mb(4,"ul",2),b.Mb(5,"li",3),b.Mb(6,"a",4),b.Ib(7,"i",5),b.pc(8," Tablero Principal"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(9,"div",6),b.Mb(10,"div",7),b.oc(11,kb,7,0,"div",8),b.oc(12,Eb,34,6,"div",8),b.Lb(),b.Lb(),b.Mb(13,"div",9),b.Mb(14,"div",10),b.Mb(15,"div",11),b.Mb(16,"div",12),b.Mb(17,"h5",13),b.pc(18,"Detalles del Cierre"),b.Lb(),b.Ib(19,"button",14),b.Lb(),b.Mb(20,"div",15),b.Mb(21,"div",16),b.Mb(22,"div",17),b.Mb(23,"div",18),b.Mb(24,"div",19),b.Mb(25,"h4",20),b.pc(26,"Ventas Totales"),b.Lb(),b.Mb(27,"h5",21),b.pc(28),b.Yb(29,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.oc(30,qb,8,7,"div",22),b.Mb(31,"div",17),b.Mb(32,"div",23),b.Mb(33,"div",24),b.Mb(34,"h5",25),b.pc(35,"Dinero en caja"),b.Lb(),b.Lb(),b.Mb(36,"div",26),b.Mb(37,"table",27),b.Mb(38,"tbody"),b.Mb(39,"tr"),b.Mb(40,"td",28),b.Mb(41,"small"),b.pc(42," Fondo Caja "),b.Lb(),b.Lb(),b.Mb(43,"td"),b.pc(44),b.Yb(45,"currency"),b.Lb(),b.Lb(),b.Mb(46,"tr"),b.Mb(47,"td",28),b.Mb(48,"small"),b.pc(49," Ventas en efectivo "),b.Lb(),b.Lb(),b.Mb(50,"td"),b.pc(51),b.Yb(52,"currency"),b.Lb(),b.Lb(),b.Mb(53,"tr"),b.Mb(54,"td",28),b.Mb(55,"small"),b.pc(56," Abonos en efectivo "),b.Lb(),b.Lb(),b.Mb(57,"td"),b.pc(58),b.Yb(59,"currency"),b.Lb(),b.Lb(),b.Mb(60,"tr"),b.Mb(61,"td",28),b.Mb(62,"small"),b.pc(63," Entradas "),b.Lb(),b.Lb(),b.Mb(64,"td"),b.pc(65),b.Yb(66,"currency"),b.Lb(),b.Lb(),b.Mb(67,"tr",29),b.Mb(68,"td",28),b.Mb(69,"small"),b.pc(70," Salidas "),b.Lb(),b.Lb(),b.Mb(71,"td"),b.pc(72),b.Yb(73,"currency"),b.Lb(),b.Lb(),b.Mb(74,"tr",30),b.Mb(75,"td",28),b.Mb(76,"small",31),b.pc(77," Total "),b.Lb(),b.Lb(),b.Mb(78,"td",31),b.pc(79),b.Yb(80,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(81,"div",17),b.Mb(82,"div",23),b.Mb(83,"div",24),b.Mb(84,"h5",25),b.pc(85,"Ventas del dia"),b.Lb(),b.Lb(),b.Mb(86,"div",26),b.Mb(87,"table",27),b.Mb(88,"tbody"),b.Mb(89,"tr"),b.Mb(90,"td",28),b.Mb(91,"small"),b.pc(92," En Efectivo "),b.Lb(),b.Lb(),b.Mb(93,"td"),b.pc(94),b.Yb(95,"currency"),b.Lb(),b.Lb(),b.Mb(96,"tr"),b.Mb(97,"td",28),b.Mb(98,"small"),b.pc(99," Con tarjeta "),b.Lb(),b.Lb(),b.Mb(100,"td"),b.pc(101),b.Yb(102,"currency"),b.Lb(),b.Lb(),b.Mb(103,"tr"),b.Mb(104,"td",28),b.Mb(105,"small"),b.pc(106," Con Transferencia "),b.Lb(),b.Lb(),b.Mb(107,"td"),b.pc(108),b.Yb(109,"currency"),b.Lb(),b.Lb(),b.Mb(110,"tr"),b.Mb(111,"td",28),b.Mb(112,"small"),b.pc(113," A credito "),b.Lb(),b.Lb(),b.Mb(114,"td"),b.pc(115),b.Yb(116,"currency"),b.Lb(),b.Lb(),b.Mb(117,"tr"),b.Mb(118,"td",28),b.Mb(119,"small"),b.pc(120," Con Vales "),b.Lb(),b.Lb(),b.Mb(121,"td"),b.pc(122),b.Yb(123,"currency"),b.Lb(),b.Lb(),b.Mb(124,"tr",30),b.Mb(125,"td",28),b.Mb(126,"small",31),b.pc(127," Total "),b.Lb(),b.Lb(),b.Mb(128,"td",31),b.pc(129),b.Yb(130,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Mb(131,"div",32),b.Mb(132,"button",33),b.pc(133,"Cerrar"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(11),b.dc("ngIf",e.cargando),b.wb(1),b.dc("ngIf",!e.cargando),b.wb(16),b.rc(" ",b.Zb(29,16,e.efectivo+e.tarjeta+e.transferencia+e.vales)," "),b.wb(2),b.dc("ngIf",0!==e.montoDiferencia),b.wb(14),b.rc(" ",b.Zb(45,18,e.inicial),""),b.wb(7),b.rc(" ",b.Zb(52,20,e.efectivo)," "),b.wb(7),b.rc(" ",b.Zb(59,22,e.abEfectivo)," "),b.wb(7),b.rc(" ",b.Zb(66,24,e.entradas)," "),b.wb(7),b.rc(" ",b.Zb(73,26,e.salidas)," "),b.wb(7),b.rc(" ",b.Zb(80,28,e.inicial+e.efectivo+e.abEfectivo+e.entradas+e.salidas)," "),b.wb(15),b.rc(" ",b.Zb(95,30,e.efectivo)," "),b.wb(7),b.rc(" ",b.Zb(102,32,e.tarjeta)," "),b.wb(7),b.rc(" ",b.Zb(109,34,e.transferencia)," "),b.wb(7),b.rc(" ",b.Zb(116,36,e.credito)," "),b.wb(7),b.rc(" ",b.Zb(123,38,e.vales)," "),b.wb(7),b.rc(" ",b.Zb(130,40,e.efectivo+e.tarjeta+e.transferencia+e.credito+e.vales)," "))},directives:[m.m,m.l,m.k],pipes:[m.c,m.e],encapsulation:2}),t})();var Ub=i("Xldm");const zb=["PrintTemplate"];function $b(t,e){if(1&t&&(b.Mb(0,"p",22),b.pc(1,"Direcci\xf3n: "),b.Mb(2,"small",23),b.pc(3),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(3),b.qc(t.empresa.address)}}function Ob(t,e){if(1&t&&(b.Mb(0,"p",24),b.pc(1,"NIT: "),b.Mb(2,"small",23),b.pc(3),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(3),b.qc(t.empresa.nit)}}function Hb(t,e){if(1&t&&(b.Mb(0,"p",24),b.pc(1,"Tel: "),b.Mb(2,"small",23),b.pc(3),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(3),b.qc(t.empresa.phone)}}function Gb(t,e){if(1&t&&(b.Mb(0,"h6",12),b.pc(1," TELEFONO "),b.Ib(2,"br"),b.Mb(3,"small",13),b.pc(4),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(4),b.rc(" ",t.factura.client.phone," ")}}function Bb(t,e){if(1&t&&(b.Mb(0,"h6",12),b.pc(1," DIRECCI\xd3N "),b.Ib(2,"br"),b.Mb(3,"small",13),b.pc(4),b.Lb(),b.Lb()),2&t){const t=b.Xb();b.wb(4),b.rc(" ",t.factura.client.address," ")}}function Vb(t,e){if(1&t&&(b.Mb(0,"tr",25),b.Mb(1,"td"),b.Mb(2,"small",26),b.pc(3),b.Yb(4,"currency"),b.Lb(),b.Ib(5,"br"),b.Mb(6,"small",26),b.pc(7),b.Lb(),b.Lb(),b.Mb(8,"td"),b.Mb(9,"small",26),b.pc(10),b.Yb(11,"currency"),b.Lb(),b.Lb(),b.Lb()),2&t){const t=e.$implicit;b.wb(3),b.sc(" ",t.qty," x ",b.Zb(4,4,t.price)," "),b.wb(4),b.rc(" ",t.product.name," "),b.wb(3),b.rc(" ",b.Zb(11,6,t.qty*t.price)," ")}}const Wb=[{path:"",component:x,data:{titulo:"Dashboard"}},{path:"clientes",component:nt,data:{titulo:"Clientes"}},{path:"compras",component:ge,data:{titulo:"Compras"}},{path:"configuracion",component:we,data:{titulo:"Configuracion"}},{path:"configuracion/caja",component:Di,data:{titulo:"Caja"}},{path:"configuracion/cierres",component:Rb,data:{titulo:"Cierres"}},{path:"configuracion/empresa",component:gb,data:{titulo:"Mi Empresa"}},{path:"configuracion/mesas",component:Ma,data:{titulo:"Mesas"}},{path:"configuracion/usuarios",component:Wi,data:{titulo:"Usuarios"}},{path:"corte",component:xb,data:{titulo:"Corte"}},{path:"facturas",component:Ge,data:{titulo:"Facturas"}},{path:"factura/:id",component:ia,data:{titulo:"Detalles de factura"}},{path:"inventario",component:Le,data:{titulo:"Inventario"}},{path:"perfil",component:Ke,data:{titulo:"Perfil"}},{path:"productos",component:ve,data:{titulo:"Productos"}},{path:"producto/:id",component:fi,data:{titulo:"Producto"}},{path:"ventas",component:ht,data:{titulo:"Ventas"}},{path:"ventas/mesa/:id",component:pb,data:{titulo:"Mesa"}},{path:"ventas/print/:id",component:(()=>{class t{constructor(t,e,i,a){this.activatedRoute=t,this.invoiceService=e,this.printerService=i,this.empresaService=a,this.title="ngx-printer-demo",this.printWindowSubscription=this.printerService.$printWindowOpen.subscribe(t=>{console.log("Print window is open:",t)}),this.$printItems=this.printerService.$printItems}ngOnInit(){this.cargarDatos(),this.activatedRoute.params.subscribe(({id:t})=>{this.cargarFactura(t)})}printDiv(){this.printerService.printDiv("printDiv")}cargarFactura(t){this.invoiceService.loadInvoiceId(t).subscribe(t=>{this.factura=t,console.log(this.factura),setTimeout(()=>{this.printDiv()},3e3)},t=>{n.a.fire("Error",t.error.msg,"error")})}cargarDatos(){this.empresaService.getDatos().subscribe(t=>{this.empresa=t},t=>{n.a.fire("Error",t.error.msg,"error")})}}return t.\u0275fac=function(e){return new(e||t)(b.Hb(a.a),b.Hb(ye),b.Hb(Ub.a),b.Hb(o.a))},t.\u0275cmp=b.Bb({type:t,selectors:[["app-print"]],viewQuery:function(t,e){if(1&t&&b.tc(zb,!0),2&t){let t;b.jc(t=b.Ub())&&(e.PrintTemplateTpl=t.first)}},decls:50,vars:19,consts:[[1,"container-fluid","mb-5"],[1,"my-4"],[1,"text-dark"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"],[1,"bi-printer"],[1,"d-flex","justify-content-center"],["id","printDiv",1,"card","border-0","pb-4",2,"width","14rem","color","black","background","white"],[1,"card-body","px-1","mb-2",2,"border-bottom","2px solid black"],[1,"card-title","mb-2","text-wrap","text-center"],["class","mb-0 text-wrap fw-bold text-left lh-1",4,"ngIf"],["class","mb-0 text-wrap fw-bold text-left lh-sm",4,"ngIf"],[1,"pb-2",2,"border-bottom","2px solid black"],[1,"mb-0","text-wrap","text-left"],[1,"text-wrap","fw-normal"],["class","mb-0 text-wrap text-left",4,"ngIf"],[1,"py-2",2,"border-bottom","2px solid black"],[1,"table","table-borderless","table-hover","table-sm"],[2,"color","black"],["class","trHover",4,"ngFor","ngForOf"],[1,"",2,"border-top","2px solid black"],[1,"fw-bold"],[1,"mb-0","text-wrap","text-rigth"],[1,"mb-0","text-wrap","fw-bold","text-left","lh-1"],[1,"fw-normal"],[1,"mb-0","text-wrap","fw-bold","text-left","lh-sm"],[1,"trHover"],[1,"text-wrap"]],template:function(t,e){1&t&&(b.Mb(0,"div",0),b.Mb(1,"div",1),b.Mb(2,"h5",2),b.pc(3,"Imprimir factura"),b.Lb(),b.Mb(4,"p"),b.pc(5,"Si, la factura no se imprime automaticamente dar click en siguiente boton"),b.Lb(),b.Mb(6,"button",3),b.Tb("click",function(){return e.printDiv()}),b.Ib(7,"i",4),b.pc(8," Imprimir ticket"),b.Lb(),b.Lb(),b.Mb(9,"div",5),b.Mb(10,"div",6),b.Mb(11,"div",7),b.Mb(12,"h4",8),b.pc(13),b.Lb(),b.oc(14,$b,4,1,"p",9),b.oc(15,Ob,4,1,"p",10),b.oc(16,Hb,4,1,"p",10),b.Lb(),b.Mb(17,"div",11),b.Mb(18,"h6",12),b.pc(19," CLIENTE / RAZON SOCIAL "),b.Ib(20,"br"),b.Mb(21,"small",13),b.pc(22),b.Lb(),b.Lb(),b.Mb(23,"h6",12),b.pc(24," CC / NIT "),b.Ib(25,"br"),b.Mb(26,"small",13),b.pc(27),b.Lb(),b.Lb(),b.oc(28,Gb,5,1,"h6",14),b.oc(29,Bb,5,1,"h6",14),b.Mb(30,"h6",12),b.Mb(31,"p",13),b.pc(32),b.Lb(),b.Lb(),b.Lb(),b.Mb(33,"div",15),b.Mb(34,"h5",12),b.pc(35),b.Lb(),b.Mb(36,"small",12),b.pc(37),b.Yb(38,"date"),b.Lb(),b.Lb(),b.Mb(39,"table",16),b.Mb(40,"tbody",17),b.oc(41,Vb,12,8,"tr",18),b.Mb(42,"tr",19),b.Mb(43,"td"),b.Mb(44,"h6",12),b.pc(45,"Total"),b.Lb(),b.Lb(),b.Mb(46,"td",20),b.Mb(47,"h6",21),b.pc(48),b.Yb(49,"currency"),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb(),b.Lb()),2&t&&(b.wb(13),b.rc(" ",e.empresa.name," "),b.wb(1),b.dc("ngIf",e.empresa.address),b.wb(1),b.dc("ngIf",e.empresa.nit),b.wb(1),b.dc("ngIf",e.empresa.phone),b.wb(6),b.rc(" ",e.factura.client.name," "),b.wb(5),b.rc(" ",e.factura.client.cedula," "),b.wb(1),b.dc("ngIf",e.factura.client.phone),b.wb(1),b.dc("ngIf",e.factura.client.address),b.wb(3),b.sc(" ",e.factura.mesa.name," - ",e.factura.mesero.name," "),b.wb(3),b.rc("Factura: ",e.factura.invoice,""),b.wb(2),b.rc("Fecha: ",b.ac(38,14,e.factura.fecha,"short"),""),b.wb(4),b.dc("ngForOf",e.factura.products),b.wb(7),b.rc(" ",b.Zb(49,17,e.factura.amount)," "))},directives:[m.m,m.l],pipes:[m.e,m.c],encapsulation:2}),t})(),data:{titulo:"Imprimir Factura"}}];let Yb=(()=>{class t{}return t.\u0275mod=b.Fb({type:t}),t.\u0275inj=b.Eb({factory:function(e){return new(e||t)},imports:[[a.e.forChild(Wb)],a.e]}),t})()}}]);